!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bertin={})}(this,(function(t){"use strict";var e="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),n.hasOwnProperty(e)?{space:n[e],local:t}:t}function i(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===e&&n.documentElement.namespaceURI===e?n.createElement(t):n.createElementNS(r,t)}}function o(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function a(t){var e=r(t);return(e.local?o:i)(e)}function s(){}function u(t){return null==t?s:function(){return this.querySelector(t)}}function l(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function c(){return[]}function h(t){return null==t?c:function(){return this.querySelectorAll(t)}}function f(t){return function(){return this.matches(t)}}function p(t){return function(e){return e.matches(t)}}var d=Array.prototype.find;function g(){return this.firstElementChild}var y=Array.prototype.filter;function _(){return Array.from(this.children)}function v(t){return new Array(t.length)}function m(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function x(t){return function(){return t}}function b(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new m(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function M(t,e,n,r,i,o,a){var s,u,l,c=new Map,h=e.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(u=e[s])&&(p[s]=l=a.call(u,u.__data__,s,e)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=a.call(t,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new m(t,o[s]);for(s=0;s<h;++s)(u=e[s])&&c.get(p[s])===u&&(i[s]=u)}function w(t){return t.__data__}function E(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function S(t){return function(){this.removeAttribute(t)}}function I(t){return function(){this.removeAttributeNS(t.space,t.local)}}function C(t,e){return function(){this.setAttribute(t,e)}}function O(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function P(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function L(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function A(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function T(t){return function(){this.style.removeProperty(t)}}function k(t,e,n){return function(){this.style.setProperty(t,e,n)}}function R(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function D(t,e){return t.style.getPropertyValue(e)||A(t).getComputedStyle(t,null).getPropertyValue(e)}function F(t){return function(){delete this[t]}}function z(t,e){return function(){this[t]=e}}function G(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function q(t){return t.trim().split(/^|\s+/)}function j(t){return t.classList||new B(t)}function B(t){this._node=t,this._names=q(t.getAttribute("class")||"")}function U(t,e){for(var n=j(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function V(t,e){for(var n=j(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function W(t){return function(){U(this,t)}}function Y(t){return function(){V(this,t)}}function X(t,e){return function(){(e.apply(this,arguments)?U:V)(this,t)}}function $(){this.textContent=""}function H(t){return function(){this.textContent=t}}function Q(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function J(){this.innerHTML=""}function K(t){return function(){this.innerHTML=t}}function Z(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function tt(){this.nextSibling&&this.parentNode.appendChild(this)}function et(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nt(){return null}function rt(){var t=this.parentNode;t&&t.removeChild(this)}function it(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ot(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function at(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function st(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function ut(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function lt(t,e,n){var r=A(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ct(t,e){return function(){return lt(this,t,e)}}function ht(t,e){return function(){return lt(this,t,e.apply(this,arguments))}}m.prototype={constructor:m,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},B.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ft=[null];function pt(t,e){this._groups=t,this._parents=e}function dt(){return new pt([[document.documentElement]],ft)}function gt(t){return"string"==typeof t?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],ft)}pt.prototype=dt.prototype={constructor:pt,select:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,c=r[i]=new Array(l),h=0;h<l;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new pt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return l(t.apply(this,arguments))}}(t):h(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new pt(r,i)},selectChild:function(t){return this.select(null==t?g:function(t){return function(){return d.call(this.children,t)}}("function"==typeof t?t:p(t)))},selectChildren:function(t){return this.selectAll(null==t?_:function(t){return function(){return y.call(this.children,t)}}("function"==typeof t?t:p(t)))},filter:function(t){"function"!=typeof t&&(t=f(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new pt(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,w);var n=e?M:b,r=this._parents,i=this._groups;"function"!=typeof t&&(t=x(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],f=h.length,p=E(t.call(c,c&&c.__data__,l,r)),d=p.length,g=s[l]=new Array(d),y=a[l]=new Array(d),_=u[l]=new Array(f);n(c,h,g,y,_,p,e);for(var v,m,N=0,S=0;N<d;++N)if(v=g[N]){for(N>=S&&(S=N+1);!(m=y[S])&&++S<d;);v._next=m||null}}return(a=new pt(a,r))._enter=s,a._exit=u,a},enter:function(){return new pt(this._enter||this._groups.map(v),this._parents)},exit:function(){return new pt(this._exit||this._groups.map(v),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l,c=n[u],h=r[u],f=c.length,p=s[u]=new Array(f),d=0;d<f;++d)(l=c[d]||h[d])&&(p[d]=l);for(;u<i;++u)s[u]=n[u];return new pt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=N);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new pt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=r(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?I:S:"function"==typeof e?n.local?L:P:n.local?O:C)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?T:"function"==typeof e?R:k)(t,e,null==n?"":n)):D(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?F:"function"==typeof e?G:z)(t,e)):this.node()[t]},classed:function(t,e){var n=q(t+"");if(arguments.length<2){for(var r=j(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?X:e?W:Y)(n,e))},text:function(t){return arguments.length?this.each(null==t?$:("function"==typeof t?Q:H)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?Z:K)(t)):this.node().innerHTML},raise:function(){return this.each(tt)},lower:function(){return this.each(et)},append:function(t){var e="function"==typeof t?t:a(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:a(t),r=null==e?nt:"function"==typeof e?e:u(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(rt)},clone:function(t){return this.select(t?ot:it)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=at(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?ut:st,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ht:ct)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var yt=0;function _t(){return new vt}function vt(){this._="@"+(++yt).toString(36)}function mt(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xt(t,e){if(t=mt(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}vt.prototype=_t.prototype={constructor:vt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var bt=Object.freeze({__proto__:null,create:function(t){return gt(a(t).call(document.documentElement))},creator:a,local:_t,matcher:f,namespace:r,namespaces:n,pointer:xt,pointers:function(t,e){return t.target&&(t=mt(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>xt(t,e)))},select:gt,selectAll:function(t){return"string"==typeof t?new pt([document.querySelectorAll(t)],[document.documentElement]):new pt([l(t)],ft)},selection:dt,selector:u,selectorAll:h,style:D,window:A});function Mt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Et(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Mt,n=(e,n)=>Mt(t(e),n),r=(e,n)=>t(e)-n):(e=t===Mt||t===wt?t:Nt,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Nt(){return 0}function St(t){return null===t?NaN:+t}const It=Et(Mt),Ct=It.right,Ot=It.left,Pt=Et(St).center;var Lt=Ct;function At(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function Tt(t){return 0|t.length}function kt(t){return!(t>0)}function Rt(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function Dt(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function Ft(t,e){const n=Dt(t,e);return n?Math.sqrt(n):n}function zt(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Gt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}class qt extends Map{constructor(t,e=Wt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Bt(this,t))}has(t){return super.has(Bt(this,t))}set(t,e){return super.set(Ut(this,t),e)}delete(t){return super.delete(Vt(this,t))}}class jt extends Set{constructor(t,e=Wt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(Bt(this,t))}add(t){return super.add(Ut(this,t))}delete(t){return super.delete(Vt(this,t))}}function Bt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ut({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Vt({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Wt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Yt(t){return t}function Xt(t,...e){return Zt(t,Yt,Yt,e)}function $t(t,...e){return Zt(t,Array.from,Yt,e)}function Ht(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function Qt(t,e,...n){return Zt(t,Yt,e,n)}function Jt(t,e,...n){return Zt(t,Array.from,e,n)}function Kt(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function Zt(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new qt,s=r[o++];let u=-1;for(const t of i){const e=s(t,++u,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function te(t,e){return Array.from(e,(e=>t[e]))}function ee(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),r.sort(((t,n)=>{for(const r of e){const e=re(r[t],r[n]);if(e)return e}}))):(n=t.map(n),r.sort(((t,e)=>re(n[t],n[e])))),te(t,r)}return t.sort(ne(n))}function ne(t=Mt){if(t===Mt)return re;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function re(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var ie=Array.prototype.slice;function oe(t){return()=>t}var ae=Math.sqrt(50),se=Math.sqrt(10),ue=Math.sqrt(2);function le(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=ce(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}function ce(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ae?10:o>=se?5:o>=ue?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ae?10:o>=se?5:o>=ue?2:1)}function he(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ae?i*=10:o>=se?i*=5:o>=ue&&(i*=2),e<t?-i:i}function fe(t,e,n){let r;for(;;){const i=ce(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function pe(t){return Math.ceil(Math.log(At(t))/Math.LN2)+1}function de(){var t=Yt,e=zt,n=pe;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var l=e(u),c=l[0],h=l[1],f=n(u,c,h);if(!Array.isArray(f)){const t=h,n=+f;if(e===zt&&([c,h]=fe(c,h,n)),(f=le(c,h,n))[0]<=c&&(a=ce(c,h,n)),f[f.length-1]>=h)if(t>=h&&e===zt){const t=ce(c,h,n);isFinite(t)&&(t>0?h=(Math.floor(h/t)+1)*t:t<0&&(h=(Math.ceil(h*-t)+1)/-t))}else f.pop()}for(var p=f.length;f[0]<=c;)f.shift(),--p;for(;f[p-1]>h;)f.pop(),--p;var d,g=new Array(p+1);for(i=0;i<=p;++i)(d=g[i]=[]).x0=i>0?f[i-1]:c,d.x1=i<p?f[i]:h;if(isFinite(a)){if(a>0)for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=h&&g[Math.min(p,Math.floor((o-c)/a))].push(r[i]);else if(a<0)for(i=0;i<s;++i)if(null!=(o=u[i])&&c<=o&&o<=h){const t=Math.floor((c-o)*a);g[Math.min(p,t+(f[t]<=o))].push(r[i])}}else for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=h&&g[Lt(f,o,0,p)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:oe(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:oe([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?oe(ie.call(t)):oe(t),r):n},r}function ge(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function ye(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function _e(t,e,n=0,r=t.length-1,i){for(i=void 0===i?re:ne(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);_e(t,e,Math.max(n,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),i)}const o=t[e];let a=n,s=r;for(ve(t,n,e),i(t[r],o)>0&&ve(t,n,r);a<s;){for(ve(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?ve(t,n,s):(++s,ve(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function ve(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function me(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),r=t.length){if((e=+e)<=0||r<2)return ye(t);if(e>=1)return ge(t);var r,i=(r-1)*e,o=Math.floor(i),a=ge(_e(t,o).subarray(0,o+1));return a+(ye(t.subarray(o+1))-a)*(i-o)}}function xe(t,e,n=St){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function be(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Me(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function we(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Ee(t,e){return[t,e]}function Ne(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Se(t,e=Mt){if(1===e.length)return we(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)<0)&&(n=o,r=i);return r}var Ie=Ce(Math.random);function Ce(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function Oe(t){if(!(i=t.length))return[];for(var e=-1,n=ye(t,Pe),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function Pe(t){return t.length}function Le(t){return t instanceof jt?t:new jt(t)}function Ae(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=Te(t);if(r.has(e))continue;let i,o;for(;({value:i,done:o}=n.next());){if(o)return!1;const t=Te(i);if(r.add(t),Object.is(e,t))break}}return!0}function Te(t){return null!==t&&"object"==typeof t?t.valueOf():t}var ke=Object.freeze({__proto__:null,bisect:Lt,bisectRight:Ct,bisectLeft:Ot,bisectCenter:Pt,ascending:Mt,bisector:Et,count:At,cross:function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(Rt)).map(Tt),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(kt))return o;for(;;){o.push(i.map(((e,n)=>t[n][e])));let a=r;for(;++i[a]===n[a];){if(0===a)return e?o.map(e):o;i[a--]=0}}},cumsum:function(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)},descending:wt,deviation:Ft,extent:zt,Adder:Gt,fsum:function(t,e){const n=new Gt;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n},fcumsum:function(t,e){const n=new Gt;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))},group:Xt,flatGroup:function(t,...e){return Ht($t(t,...e),e)},flatRollup:function(t,e,...n){return Ht(Jt(t,e,...n),n)},groups:$t,index:function(t,...e){return Zt(t,Yt,Kt,e)},indexes:function(t,...e){return Zt(t,Array.from,Kt,e)},rollup:Qt,rollups:Jt,groupSort:function(t,e,n){return(2!==e.length?ee(Qt(t,e,n),(([t,e],[n,r])=>Mt(e,r)||Mt(t,n))):ee(Xt(t,n),(([t,n],[r,i])=>e(n,i)||Mt(t,r)))).map((([t])=>t))},bin:de,histogram:de,thresholdFreedmanDiaconis:function(t,e,n){return Math.ceil((n-e)/(2*(me(t,.75)-me(t,.25))*Math.pow(At(t),-1/3)))},thresholdScott:function(t,e,n){return Math.ceil((n-e)*Math.cbrt(At(t))/(3.49*Ft(t)))},thresholdSturges:pe,max:ge,maxIndex:be,mean:function(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},median:function(t,e){return me(t,.5,e)},merge:Me,min:ye,minIndex:we,mode:function(t,e){const n=new qt;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r},nice:fe,pairs:function(t,e=Ee){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n},permute:te,quantile:me,quantileSorted:xe,quickselect:_e,range:Ne,rank:function(t,e=Mt){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=Mt);const i=(t,r)=>e(n[t],n[r]);let o,a;return Uint32Array.from(n,((t,e)=>e)).sort(e===Mt?(t,e)=>re(n[t],n[e]):ne(i)).forEach(((t,e)=>{const n=i(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,a=e),r[t]=a):r[t]=NaN})),r},least:function(t,e=Mt){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?Mt(t,i)<0:0===Mt(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)<0:0===e(i,i))&&(n=i,r=!0);return n},leastIndex:Se,greatest:function(t,e=Mt){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?Mt(t,i)>0:0===Mt(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)>0:0===e(i,i))&&(n=i,r=!0);return n},greatestIndex:function(t,e=Mt){if(1===e.length)return be(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)>0)&&(n=o,r=i);return r},scan:function(t,e){const n=Se(t,e);return n<0?void 0:n},shuffle:Ie,shuffler:Ce,sum:function(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n},ticks:le,tickIncrement:ce,tickStep:he,transpose:Oe,variance:Dt,zip:function(){return Oe(arguments)},every:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0},some:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1},filter:function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n},map:function(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))},reduce:function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++a,t);return n},reverse:function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},sort:ee,difference:function(t,...e){t=new jt(t);for(const n of e)for(const e of n)t.delete(e);return t},disjoint:function(t,e){const n=e[Symbol.iterator](),r=new jt;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0},intersection:function(t,...e){t=new jt(t),e=e.map(Le);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t},subset:function(t,e){return Ae(e,t)},superset:Ae,union:function(...t){const e=new jt;for(const n of t)for(const t of n)e.add(t);return e},InternMap:qt,InternSet:jt}),Re=1e-6,De=1e-12,Fe=Math.PI,ze=Fe/2,Ge=Fe/4,qe=2*Fe,je=180/Fe,Be=Fe/180,Ue=Math.abs,Ve=Math.atan,We=Math.atan2,Ye=Math.cos,Xe=Math.ceil,$e=Math.exp,He=Math.hypot,Qe=Math.log,Je=Math.pow,Ke=Math.sin,Ze=Math.sign||function(t){return t>0?1:t<0?-1:0},tn=Math.sqrt,en=Math.tan;function nn(t){return t>1?0:t<-1?Fe:Math.acos(t)}function rn(t){return t>1?ze:t<-1?-ze:Math.asin(t)}function on(t){return(t=Ke(t/2))*t}function an(){}function sn(t,e){t&&ln.hasOwnProperty(t.type)&&ln[t.type](t,e)}var un={Feature:function(t,e){sn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)sn(n[r].geometry,e)}},ln={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){cn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)cn(n[r],e,0)},Polygon:function(t,e){hn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)sn(n[r],e)}};function cn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function hn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)cn(t[n],e,1);e.polygonEnd()}function fn(t,e){t&&un.hasOwnProperty(t.type)?un[t.type](t,e):sn(t,e)}var pn,dn,gn,yn,_n,vn,mn,xn,bn,Mn,wn,En,Nn,Sn,In,Cn,On=new Gt,Pn=new Gt,Ln={point:an,lineStart:an,lineEnd:an,polygonStart:function(){On=new Gt,Ln.lineStart=An,Ln.lineEnd=Tn},polygonEnd:function(){var t=+On;Pn.add(t<0?qe+t:t),this.lineStart=this.lineEnd=this.point=an},sphere:function(){Pn.add(qe)}};function An(){Ln.point=kn}function Tn(){Rn(pn,dn)}function kn(t,e){Ln.point=Rn,pn=t,dn=e,gn=t*=Be,yn=Ye(e=(e*=Be)/2+Ge),_n=Ke(e)}function Rn(t,e){var n=(t*=Be)-gn,r=n>=0?1:-1,i=r*n,o=Ye(e=(e*=Be)/2+Ge),a=Ke(e),s=_n*a,u=yn*o+s*Ye(i),l=s*r*Ke(i);On.add(We(l,u)),gn=t,yn=o,_n=a}function Dn(t){return Pn=new Gt,fn(t,Ln),2*Pn}function Fn(t){return[We(t[1],t[0]),rn(t[2])]}function zn(t){var e=t[0],n=t[1],r=Ye(n);return[r*Ye(e),r*Ke(e),Ke(n)]}function Gn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function jn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Un(t){var e=tn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Vn,Wn,Yn,Xn,$n,Hn,Qn,Jn,Kn,Zn,tr,er,nr,rr,ir,or,ar={point:sr,lineStart:lr,lineEnd:cr,polygonStart:function(){ar.point=hr,ar.lineStart=fr,ar.lineEnd=pr,Sn=new Gt,Ln.polygonStart()},polygonEnd:function(){Ln.polygonEnd(),ar.point=sr,ar.lineStart=lr,ar.lineEnd=cr,On<0?(vn=-(xn=180),mn=-(bn=90)):Sn>Re?bn=90:Sn<-1e-6&&(mn=-90),Cn[0]=vn,Cn[1]=xn},sphere:function(){vn=-(xn=180),mn=-(bn=90)}};function sr(t,e){In.push(Cn=[vn=t,xn=t]),e<mn&&(mn=e),e>bn&&(bn=e)}function ur(t,e){var n=zn([t*Be,e*Be]);if(Nn){var r=qn(Nn,n),i=qn([r[1],-r[0],0],r);Un(i),i=Fn(i);var o,a=t-Mn,s=a>0?1:-1,u=i[0]*je*s,l=Ue(a)>180;l^(s*Mn<u&&u<s*t)?(o=i[1]*je)>bn&&(bn=o):l^(s*Mn<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*je)<mn&&(mn=o):(e<mn&&(mn=e),e>bn&&(bn=e)),l?t<Mn?dr(vn,t)>dr(vn,xn)&&(xn=t):dr(t,xn)>dr(vn,xn)&&(vn=t):xn>=vn?(t<vn&&(vn=t),t>xn&&(xn=t)):t>Mn?dr(vn,t)>dr(vn,xn)&&(xn=t):dr(t,xn)>dr(vn,xn)&&(vn=t)}else In.push(Cn=[vn=t,xn=t]);e<mn&&(mn=e),e>bn&&(bn=e),Nn=n,Mn=t}function lr(){ar.point=ur}function cr(){Cn[0]=vn,Cn[1]=xn,ar.point=sr,Nn=null}function hr(t,e){if(Nn){var n=t-Mn;Sn.add(Ue(n)>180?n+(n>0?360:-360):n)}else wn=t,En=e;Ln.point(t,e),ur(t,e)}function fr(){Ln.lineStart()}function pr(){hr(wn,En),Ln.lineEnd(),Ue(Sn)>Re&&(vn=-(xn=180)),Cn[0]=vn,Cn[1]=xn,Nn=null}function dr(t,e){return(e-=t)<0?e+360:e}function gr(t,e){return t[0]-e[0]}function yr(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function _r(t){var e,n,r,i,o,a,s;if(bn=xn=-(vn=mn=1/0),In=[],fn(t,ar),n=In.length){for(In.sort(gr),e=1,o=[r=In[0]];e<n;++e)yr(r,(i=In[e])[0])||yr(r,i[1])?(dr(r[0],i[1])>dr(r[0],r[1])&&(r[1]=i[1]),dr(i[0],r[1])>dr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=dr(r[1],i[0]))>a&&(a=s,vn=i[0],xn=r[1])}return In=Cn=null,vn===1/0||mn===1/0?[[NaN,NaN],[NaN,NaN]]:[[vn,mn],[xn,bn]]}var vr={sphere:an,point:mr,lineStart:br,lineEnd:Er,polygonStart:function(){vr.lineStart=Nr,vr.lineEnd=Sr},polygonEnd:function(){vr.lineStart=br,vr.lineEnd=Er}};function mr(t,e){t*=Be;var n=Ye(e*=Be);xr(n*Ye(t),n*Ke(t),Ke(e))}function xr(t,e,n){++Vn,Yn+=(t-Yn)/Vn,Xn+=(e-Xn)/Vn,$n+=(n-$n)/Vn}function br(){vr.point=Mr}function Mr(t,e){t*=Be;var n=Ye(e*=Be);rr=n*Ye(t),ir=n*Ke(t),or=Ke(e),vr.point=wr,xr(rr,ir,or)}function wr(t,e){t*=Be;var n=Ye(e*=Be),r=n*Ye(t),i=n*Ke(t),o=Ke(e),a=We(tn((a=ir*o-or*i)*a+(a=or*r-rr*o)*a+(a=rr*i-ir*r)*a),rr*r+ir*i+or*o);Wn+=a,Hn+=a*(rr+(rr=r)),Qn+=a*(ir+(ir=i)),Jn+=a*(or+(or=o)),xr(rr,ir,or)}function Er(){vr.point=mr}function Nr(){vr.point=Ir}function Sr(){Cr(er,nr),vr.point=mr}function Ir(t,e){er=t,nr=e,t*=Be,e*=Be,vr.point=Cr;var n=Ye(e);rr=n*Ye(t),ir=n*Ke(t),or=Ke(e),xr(rr,ir,or)}function Cr(t,e){t*=Be;var n=Ye(e*=Be),r=n*Ye(t),i=n*Ke(t),o=Ke(e),a=ir*o-or*i,s=or*r-rr*o,u=rr*i-ir*r,l=He(a,s,u),c=rn(l),h=l&&-c/l;Kn.add(h*a),Zn.add(h*s),tr.add(h*u),Wn+=c,Hn+=c*(rr+(rr=r)),Qn+=c*(ir+(ir=i)),Jn+=c*(or+(or=o)),xr(rr,ir,or)}function Or(t){Vn=Wn=Yn=Xn=$n=Hn=Qn=Jn=0,Kn=new Gt,Zn=new Gt,tr=new Gt,fn(t,vr);var e=+Kn,n=+Zn,r=+tr,i=He(e,n,r);return i<De&&(e=Hn,n=Qn,r=Jn,Wn<Re&&(e=Yn,n=Xn,r=$n),(i=He(e,n,r))<De)?[NaN,NaN]:[We(n,e)*je,rn(r/i)*je]}function Pr(t){return function(){return t}}function Lr(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Ar(t,e){return[Ue(t)>Fe?t+Math.round(-t/qe)*qe:t,e]}function Tr(t,e,n){return(t%=qe)?e||n?Lr(Rr(t),Dr(e,n)):Rr(t):e||n?Dr(e,n):Ar}function kr(t){return function(e,n){return[(e+=t)>Fe?e-qe:e<-Fe?e+qe:e,n]}}function Rr(t){var e=kr(t);return e.invert=kr(-t),e}function Dr(t,e){var n=Ye(t),r=Ke(t),i=Ye(e),o=Ke(e);function a(t,e){var a=Ye(e),s=Ye(t)*a,u=Ke(t)*a,l=Ke(e),c=l*n+s*r;return[We(u*i-c*o,s*n-l*r),rn(c*i+u*o)]}return a.invert=function(t,e){var a=Ye(e),s=Ye(t)*a,u=Ke(t)*a,l=Ke(e),c=l*i-u*o;return[We(u*i+l*o,s*n+c*r),rn(c*n-s*r)]},a}function Fr(t){function e(e){return(e=t(e[0]*Be,e[1]*Be))[0]*=je,e[1]*=je,e}return t=Tr(t[0]*Be,t[1]*Be,t.length>2?t[2]*Be:0),e.invert=function(e){return(e=t.invert(e[0]*Be,e[1]*Be))[0]*=je,e[1]*=je,e},e}function zr(t,e,n,r,i,o){if(n){var a=Ye(e),s=Ke(e),u=r*n;null==i?(i=e+r*qe,o=e-u/2):(i=Gr(a,i),o=Gr(a,o),(r>0?i<o:i>o)&&(i+=r*qe));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Fn([a,-s*Ye(c),-s*Ke(c)]),t.point(l[0],l[1])}}function Gr(t,e){(e=zn(e))[0]-=t,Un(e);var n=nn(-e[1]);return((-e[2]<0?-n:n)+qe-Re)%qe}function qr(){var t,e,n=Pr([0,0]),r=Pr(90),i=Pr(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=je,n[1]*=je}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*Be,u=i.apply(this,arguments)*Be;return t=[],e=Tr(-a[0]*Be,-a[1]*Be,0).invert,zr(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:Pr([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Pr(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Pr(+t),a):i},a}function jr(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:an,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Br(t,e){return Ue(t[0]-e[0])<Re&&Ue(t[1]-e[1])<Re}function Ur(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Vr(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Br(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new Ur(r,t,null,!0)),u.push(n.o=new Ur(r,null,n,!1)),s.push(n=new Ur(a,t,null,!1)),u.push(n.o=new Ur(a,null,n,!0))}})),s.length){for(u.sort(e),Wr(s),Wr(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Wr(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Yr(t){return Ue(t[0])<=Fe?t[0]:Ze(t[0])*((Ue(t[0])+Fe)%qe-Fe)}function Xr(t,e){var n=Yr(e),r=e[1],i=Ke(r),o=[Ke(n),-Ye(n),0],a=0,s=0,u=new Gt;1===i?r=ze+Re:-1===i&&(r=-ze-Re);for(var l=0,c=t.length;l<c;++l)if(f=(h=t[l]).length)for(var h,f,p=h[f-1],d=Yr(p),g=p[1]/2+Ge,y=Ke(g),_=Ye(g),v=0;v<f;++v,d=x,y=M,_=w,p=m){var m=h[v],x=Yr(m),b=m[1]/2+Ge,M=Ke(b),w=Ye(b),E=x-d,N=E>=0?1:-1,S=N*E,I=S>Fe,C=y*M;if(u.add(We(C*N*Ke(S),_*w+C*Ye(S))),a+=I?E+N*qe:E,I^d>=n^x>=n){var O=qn(zn(p),zn(m));Un(O);var P=qn(o,O);Un(P);var L=(I^E>=0?-1:1)*rn(P[2]);(r>L||r===L&&(O[0]||O[1]))&&(s+=I^E>=0?1:-1)}}return(a<-1e-6||a<Re&&u<-1e-12)^1&s}function $r(t,e,n,r){return function(i){var o,a,s,u=e(i),l=jr(),c=e(l),h=!1,f={point:p,lineStart:g,lineEnd:y,polygonStart:function(){f.point=_,f.lineStart=v,f.lineEnd=m,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=g,f.lineEnd=y,a=Me(a);var t=Xr(o,r);a.length?(h||(i.polygonStart(),h=!0),Vr(a,Qr,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){u.point(t,e)}function g(){f.point=d,u.lineStart()}function y(){f.point=p,u.lineEnd()}function _(t,e){s.push([t,e]),c.point(t,e)}function v(){c.lineStart(),s=[]}function m(){_(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),f=l.result(),p=f.length;if(s.pop(),o.push(s),s=null,p)if(1&u){if((e=(n=f[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(Hr))}return f}}function Hr(t){return t.length>1}function Qr(t,e){return((t=t.x)[0]<0?t[1]-ze-Re:ze-t[1])-((e=e.x)[0]<0?e[1]-ze-Re:ze-e[1])}Ar.invert=Ar;var Jr=$r((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Fe:-Fe,u=Ue(o-n);Ue(u-Fe)<Re?(t.point(n,r=(r+a)/2>0?ze:-ze),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Fe&&(Ue(n-i)<Re&&(n-=i*Re),Ue(o-s)<Re&&(o-=s*Re),r=function(t,e,n,r){var i,o,a=Ke(t-n);return Ue(a)>Re?Ve((Ke(e)*(o=Ye(r))*Ke(n)-Ke(r)*(i=Ye(e))*Ke(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*ze,r.point(-Fe,i),r.point(0,i),r.point(Fe,i),r.point(Fe,0),r.point(Fe,-i),r.point(0,-i),r.point(-Fe,-i),r.point(-Fe,0),r.point(-Fe,i);else if(Ue(t[0]-e[0])>Re){var o=t[0]<e[0]?Fe:-Fe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Fe,-ze]);function Kr(t){var e=Ye(t),n=6*Be,r=e>0,i=Ue(e)>Re;function o(t,n){return Ye(t)*Ye(n)>e}function a(t,n,r){var i=[1,0,0],o=qn(zn(t),zn(n)),a=Gn(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=e*a/u,c=-e*s/u,h=qn(i,o),f=Bn(i,l);jn(f,Bn(o,c));var p=h,d=Gn(f,p),g=Gn(p,p),y=d*d-g*(Gn(f,f)-1);if(!(y<0)){var _=tn(y),v=Bn(p,(-d-_)/g);if(jn(v,f),v=Fn(v),!r)return v;var m,x=t[0],b=n[0],M=t[1],w=n[1];b<x&&(m=x,x=b,b=m);var E=b-x,N=Ue(E-Fe)<Re;if(!N&&w<M&&(m=M,M=w,w=m),N||E<Re?N?M+w>0^v[1]<(Ue(v[0]-x)<Re?M:w):M<=v[1]&&v[1]<=w:E>Fe^(x<=v[0]&&v[0]<=b)){var S=Bn(p,(-d+_)/g);return jn(S,f),[v,Fn(S)]}}}function s(e,n){var i=r?t:Fe-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return $r(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=o(h,f),y=r?g?0:s(h,f):g?s(h+(h<0?Fe:-Fe),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(p=a(e,d))||Br(e,p)||Br(d,p))&&(d[2]=1),g!==u)c=0,g?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^g){var _;y&n||!(_=a(d,e,!0))||(c=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1],3)))}!g||e&&Br(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,o){zr(o,t,n,i,e,r)}),r?[0,-t]:[-Fe,t-Fe])}var Zr,ti,ei,ni,ri=1e9,ii=-ri;function oi(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return Ue(r[0]-t)<Re?i>0?0:3:Ue(r[0]-n)<Re?i>0?2:1:Ue(r[1]-e)<Re?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,h,f,p,d,g,y,_,v,m=a,x=jr(),b={point:M,lineStart:function(){b.point=w,l&&l.push(c=[]);_=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(w(h,f),p&&y&&x.rejoin(),u.push(x.result()));b.point=M,y&&m.lineEnd()},polygonStart:function(){m=x,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,h=s[0],f=h[0],p=h[1];u<c;++u)o=f,a=p,f=(h=s[u])[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=Me(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Vr(u,s,e,o,a),a.polygonEnd());m=a,u=l=c=null}};function M(t,e){i(t,e)&&m.point(t,e)}function w(o,a){var s=i(o,a);if(l&&c.push([o,a]),_)h=o,f=a,p=s,_=!1,s&&(m.lineStart(),m.point(o,a));else if(s&&y)m.point(o,a);else{var u=[d=Math.max(ii,Math.min(ri,d)),g=Math.max(ii,Math.min(ri,g))],x=[o=Math.max(ii,Math.min(ri,o)),a=Math.max(ii,Math.min(ri,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}}(u,x,t,e,n,r)?s&&(m.lineStart(),m.point(o,a),v=!1):(y||(m.lineStart(),m.point(u[0],u[1])),m.point(x[0],x[1]),s||m.lineEnd(),v=!1)}d=o,g=a,y=s}return b}}var ai={sphere:an,point:an,lineStart:function(){ai.point=ui,ai.lineEnd=si},lineEnd:an,polygonStart:an,polygonEnd:an};function si(){ai.point=ai.lineEnd=an}function ui(t,e){ti=t*=Be,ei=Ke(e*=Be),ni=Ye(e),ai.point=li}function li(t,e){t*=Be;var n=Ke(e*=Be),r=Ye(e),i=Ue(t-ti),o=Ye(i),a=r*Ke(i),s=ni*n-ei*r*o,u=ei*n+ni*r*o;Zr.add(We(tn(a*a+s*s),u)),ti=t,ei=n,ni=r}function ci(t){return Zr=new Gt,fn(t,ai),+Zr}var hi=[null,null],fi={type:"LineString",coordinates:hi};function pi(t,e){return hi[0]=t,hi[1]=e,ci(fi)}var di={Feature:function(t,e){return yi(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(yi(n[r].geometry,e))return!0;return!1}},gi={Sphere:function(){return!0},Point:function(t,e){return _i(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(_i(n[r],e))return!0;return!1},LineString:function(t,e){return vi(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(vi(n[r],e))return!0;return!1},Polygon:function(t,e){return mi(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(mi(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(yi(n[r],e))return!0;return!1}};function yi(t,e){return!(!t||!gi.hasOwnProperty(t.type))&&gi[t.type](t,e)}function _i(t,e){return 0===pi(t,e)}function vi(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=pi(t[o],e)))return!0;if(o>0&&(i=pi(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<De*i)return!0;n=r}return!1}function mi(t,e){return!!Xr(t.map(xi),bi(e))}function xi(t){return(t=t.map(bi)).pop(),t}function bi(t){return[t[0]*Be,t[1]*Be]}function Mi(t,e,n){var r=Ne(t,e-Re,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function wi(t,e,n){var r=Ne(t,e-Re,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Ei(){var t,e,n,r,i,o,a,s,u,l,c,h,f=10,p=f,d=90,g=360,y=2.5;function _(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ne(Xe(r/d)*d,n,d).map(c).concat(Ne(Xe(s/g)*g,a,g).map(h)).concat(Ne(Xe(e/f)*f,t,f).filter((function(t){return Ue(t%d)>Re})).map(u)).concat(Ne(Xe(o/p)*p,i,p).filter((function(t){return Ue(t%g)>Re})).map(l))}return _.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},_.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(h(a).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),_.precision(y)):[[r,s],[n,a]]},_.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),_.precision(y)):[[e,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(d=+t[0],g=+t[1],_):[d,g]},_.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],_):[f,p]},_.precision=function(f){return arguments.length?(y=+f,u=Mi(o,i,90),l=wi(e,t,y),c=Mi(s,a,90),h=wi(r,n,y),_):y},_.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ni(t,e){var n=t[0]*Be,r=t[1]*Be,i=e[0]*Be,o=e[1]*Be,a=Ye(r),s=Ke(r),u=Ye(o),l=Ke(o),c=a*Ye(n),h=a*Ke(n),f=u*Ye(i),p=u*Ke(i),d=2*rn(tn(on(o-r)+a*u*on(i-n))),g=Ke(d),y=d?function(t){var e=Ke(t*=d)/g,n=Ke(d-t)/g,r=n*c+e*f,i=n*h+e*p,o=n*s+e*l;return[We(i,r)*je,We(o,tn(r*r+i*i))*je]}:function(){return[n*je,r*je]};return y.distance=d,y}var Si,Ii,Ci,Oi,Pi=t=>t,Li=new Gt,Ai=new Gt,Ti={point:an,lineStart:an,lineEnd:an,polygonStart:function(){Ti.lineStart=ki,Ti.lineEnd=Fi},polygonEnd:function(){Ti.lineStart=Ti.lineEnd=Ti.point=an,Li.add(Ue(Ai)),Ai=new Gt},result:function(){var t=Li/2;return Li=new Gt,t}};function ki(){Ti.point=Ri}function Ri(t,e){Ti.point=Di,Si=Ci=t,Ii=Oi=e}function Di(t,e){Ai.add(Oi*t-Ci*e),Ci=t,Oi=e}function Fi(){Di(Si,Ii)}var zi=Ti,Gi=1/0,qi=Gi,ji=-Gi,Bi=ji,Ui={point:function(t,e){t<Gi&&(Gi=t);t>ji&&(ji=t);e<qi&&(qi=e);e>Bi&&(Bi=e)},lineStart:an,lineEnd:an,polygonStart:an,polygonEnd:an,result:function(){var t=[[Gi,qi],[ji,Bi]];return ji=Bi=-(qi=Gi=1/0),t}};var Vi,Wi,Yi,Xi,$i=Ui,Hi=0,Qi=0,Ji=0,Ki=0,Zi=0,to=0,eo=0,no=0,ro=0,io={point:oo,lineStart:ao,lineEnd:lo,polygonStart:function(){io.lineStart=co,io.lineEnd=ho},polygonEnd:function(){io.point=oo,io.lineStart=ao,io.lineEnd=lo},result:function(){var t=ro?[eo/ro,no/ro]:to?[Ki/to,Zi/to]:Ji?[Hi/Ji,Qi/Ji]:[NaN,NaN];return Hi=Qi=Ji=Ki=Zi=to=eo=no=ro=0,t}};function oo(t,e){Hi+=t,Qi+=e,++Ji}function ao(){io.point=so}function so(t,e){io.point=uo,oo(Yi=t,Xi=e)}function uo(t,e){var n=t-Yi,r=e-Xi,i=tn(n*n+r*r);Ki+=i*(Yi+t)/2,Zi+=i*(Xi+e)/2,to+=i,oo(Yi=t,Xi=e)}function lo(){io.point=oo}function co(){io.point=fo}function ho(){po(Vi,Wi)}function fo(t,e){io.point=po,oo(Vi=Yi=t,Wi=Xi=e)}function po(t,e){var n=t-Yi,r=e-Xi,i=tn(n*n+r*r);Ki+=i*(Yi+t)/2,Zi+=i*(Xi+e)/2,to+=i,eo+=(i=Xi*t-Yi*e)*(Yi+t),no+=i*(Xi+e),ro+=3*i,oo(Yi=t,Xi=e)}var go=io;function yo(t){this._context=t}yo.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,qe)}},result:an};var _o,vo,mo,xo,bo,Mo=new Gt,wo={point:an,lineStart:function(){wo.point=Eo},lineEnd:function(){_o&&No(vo,mo),wo.point=an},polygonStart:function(){_o=!0},polygonEnd:function(){_o=null},result:function(){var t=+Mo;return Mo=new Gt,t}};function Eo(t,e){wo.point=No,vo=xo=t,mo=bo=e}function No(t,e){xo-=t,bo-=e,Mo.add(tn(xo*xo+bo*bo)),xo=t,bo=e}var So=wo;function Io(){this._string=[]}function Co(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Oo(t){return function(e){var n=new Po;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Po(){}function Lo(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),fn(n,t.stream($i)),e($i.result()),null!=r&&t.clipExtent(r),t}function Ao(t,e,n){return Lo(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function To(t,e,n){return Ao(t,[[0,0],e],n)}function ko(t,e,n){return Lo(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function Ro(t,e,n){return Lo(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}Io.prototype={_radius:4.5,_circle:Co(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Co(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Po.prototype={constructor:Po,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Do=Ye(30*Be);function Fo(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,f,p,d,g,y){var _=l-r,v=c-i,m=_*_+v*v;if(m>4*e&&g--){var x=a+f,b=s+p,M=u+d,w=tn(x*x+b*b+M*M),E=rn(M/=w),N=Ue(Ue(M)-1)<Re||Ue(o-h)<Re?(o+h)/2:We(b,x),S=t(N,E),I=S[0],C=S[1],O=I-r,P=C-i,L=v*O-_*P;(L*L/m>e||Ue((_*O+v*P)/m-.5)>.3||a*f+s*p+u*d<Do)&&(n(r,i,o,a,s,u,I,C,N,x/=w,b/=w,M,g,y),y.point(I,C),n(I,C,N,x,b,M,l,c,h,f,p,d,g,y))}}return function(e){var r,i,o,a,s,u,l,c,h,f,p,d,g={point:y,lineStart:_,lineEnd:m,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var o=zn([r,i]),a=t(r,i);n(c,h,l,f,p,d,c=a[0],h=a[1],l=r,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function m(){g.point=y,e.lineEnd()}function x(){_(),g.point=b,g.lineEnd=M}function b(t,e){v(r=t,e),i=c,o=h,a=f,s=p,u=d,g.point=v}function M(){n(c,h,l,f,p,d,i,o,r,a,s,u,16,e),g.lineEnd=m,m()}return g}}(t,e):function(t){return Oo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var zo=Oo({point:function(t,e){this.stream.point(t*Be,e*Be)}});function Go(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=Ye(o),s=Ke(o),u=a*t,l=s*t,c=a/t,h=s/t,f=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return d.invert=function(t,e){return[r*(c*t-h*e+f),i*(p-h*t-c*e)]},d}function qo(t){return jo((function(){return t}))()}function jo(t){var e,n,r,i,o,a,s,u,l,c,h=150,f=480,p=250,d=0,g=0,y=0,_=0,v=0,m=0,x=1,b=1,M=null,w=Jr,E=null,N=Pi,S=.5;function I(t){return u(t[0]*Be,t[1]*Be)}function C(t){return(t=u.invert(t[0],t[1]))&&[t[0]*je,t[1]*je]}function O(){var t=Go(h,0,0,x,b,m).apply(null,e(d,g)),r=Go(h,f-t[0],p-t[1],x,b,m);return n=Tr(y,_,v),s=Lr(e,r),u=Lr(n,s),a=Fo(s,S),P()}function P(){return l=c=null,I}return I.stream=function(t){return l&&c===t?l:l=zo(function(t){return Oo({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(w(a(N(c=t)))))},I.preclip=function(t){return arguments.length?(w=t,M=void 0,P()):w},I.postclip=function(t){return arguments.length?(N=t,E=r=i=o=null,P()):N},I.clipAngle=function(t){return arguments.length?(w=+t?Kr(M=t*Be):(M=null,Jr),P()):M*je},I.clipExtent=function(t){return arguments.length?(N=null==t?(E=r=i=o=null,Pi):oi(E=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),P()):null==E?null:[[E,r],[i,o]]},I.scale=function(t){return arguments.length?(h=+t,O()):h},I.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],O()):[f,p]},I.center=function(t){return arguments.length?(d=t[0]%360*Be,g=t[1]%360*Be,O()):[d*je,g*je]},I.rotate=function(t){return arguments.length?(y=t[0]%360*Be,_=t[1]%360*Be,v=t.length>2?t[2]%360*Be:0,O()):[y*je,_*je,v*je]},I.angle=function(t){return arguments.length?(m=t%360*Be,O()):m*je},I.reflectX=function(t){return arguments.length?(x=t?-1:1,O()):x<0},I.reflectY=function(t){return arguments.length?(b=t?-1:1,O()):b<0},I.precision=function(t){return arguments.length?(a=Fo(s,S=t*t),P()):tn(S)},I.fitExtent=function(t,e){return Ao(I,t,e)},I.fitSize=function(t,e){return To(I,t,e)},I.fitWidth=function(t,e){return ko(I,t,e)},I.fitHeight=function(t,e){return Ro(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&C,O()}}function Bo(t){var e=0,n=Fe/3,r=jo(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Be,n=t[1]*Be):[e*je,n*je]},i}function Uo(t,e){var n=Ke(t),r=(n+Ke(e))/2;if(Ue(r)<Re)return function(t){var e=Ye(t);function n(t,n){return[t*e,Ke(n)/e]}return n.invert=function(t,n){return[t/e,rn(n*e)]},n}(t);var i=1+n*(2*r-n),o=tn(i)/r;function a(t,e){var n=tn(i-2*r*Ke(e))/r;return[n*Ke(t*=r),o-n*Ye(t)]}return a.invert=function(t,e){var n=o-e,a=We(t,Ue(n))*Ze(n);return n*r<0&&(a-=Fe*Ze(t)*Ze(n)),[a/r,rn((i-(t*t+n*n)*r*r)/(2*r))]},a}function Vo(){return Bo(Uo).scale(155.424).center([0,33.6442])}function Wo(){return Vo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Yo(t){return function(e,n){var r=Ye(e),i=Ye(n),o=t(r*i);return o===1/0?[2,0]:[o*i*Ke(e),o*Ke(n)]}}function Xo(t){return function(e,n){var r=tn(e*e+n*n),i=t(r),o=Ke(i),a=Ye(i);return[We(e*o,r*a),rn(r&&n*o/r)]}}var $o=Yo((function(t){return tn(2/(1+t))}));$o.invert=Xo((function(t){return 2*rn(t/2)}));var Ho=Yo((function(t){return(t=nn(t))&&t/Ke(t)}));function Qo(t,e){return[t,Qe(en((ze+e)/2))]}function Jo(t){var e,n,r,i=qo(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Fe*a(),s=i(Fr(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Qo?[[Math.max(s[0]-o,l),e],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),c()):a()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function Ko(t){return en((ze+t)/2)}function Zo(t,e){var n=Ye(t),r=t===e?Ke(t):Qe(n/Ye(e))/Qe(Ko(e)/Ko(t)),i=n*Je(Ko(t),r)/r;if(!r)return Qo;function o(t,e){i>0?e<-ze+Re&&(e=-ze+Re):e>ze-Re&&(e=ze-Re);var n=i/Je(Ko(e),r);return[n*Ke(r*t),i-n*Ye(r*t)]}return o.invert=function(t,e){var n=i-e,o=Ze(r)*tn(t*t+n*n),a=We(t,Ue(n))*Ze(n);return n*r<0&&(a-=Fe*Ze(t)*Ze(n)),[a/r,2*Ve(Je(i/o,1/r))-ze]},o}function ta(t,e){return[t,e]}function ea(){return qo(ta).scale(152.63)}function na(t,e){var n=Ye(t),r=t===e?Ke(t):(n-Ye(e))/(e-t),i=n/r+t;if(Ue(r)<Re)return ta;function o(t,e){var n=i-e,o=r*t;return[n*Ke(o),i-n*Ye(o)]}return o.invert=function(t,e){var n=i-e,o=We(t,Ue(n))*Ze(n);return n*r<0&&(o-=Fe*Ze(t)*Ze(n)),[o/r,i-Ze(r)*tn(t*t+n*n)]},o}Ho.invert=Xo((function(t){return t})),Qo.invert=function(t,e){return[t,2*Ve($e(e))-ze]},ta.invert=ta;var ra=1.340264,ia=-.081106,oa=893e-6,aa=.003796,sa=tn(3)/2;function ua(t,e){var n=rn(sa*Ke(e)),r=n*n,i=r*r*r;return[t*Ye(n)/(sa*(ra+3*ia*r+i*(7*oa+9*aa*r))),n*(ra+ia*r+i*(oa+aa*r))]}function la(t,e){var n=Ye(e),r=Ye(t)*n;return[n*Ke(t)/r,Ke(e)/r]}function ca(){return qo(la).scale(144.049).clipAngle(60)}function ha(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function fa(t,e){return[Ye(e)*Ke(t),Ke(e)]}function pa(){return qo(fa).scale(249.5).clipAngle(90.000001)}function da(t,e){var n=Ye(e),r=1+Ye(t)*n;return[n*Ke(t)/r,Ke(e)/r]}function ga(t,e){return[Qe(en((ze+e)/2)),-t]}ua.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(ra+ia*i+o*(oa+aa*i))-e)/(ra+3*ia*i+o*(7*oa+9*aa*i)))*r)*i*i,!(Ue(n)<De));++a);return[sa*t*(ra+3*ia*i+o*(7*oa+9*aa*i))/Ye(r),rn(Ke(r)/sa)]},la.invert=Xo(Ve),ha.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ue(n)>Re&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},fa.invert=Xo(rn),da.invert=Xo((function(t){return 2*Ve(t)})),ga.invert=function(t,e){return[-e,2*Ve($e(t))-ze]};var ya=Object.freeze({__proto__:null,geoArea:Dn,geoBounds:_r,geoCentroid:Or,geoCircle:qr,geoClipAntimeridian:Jr,geoClipCircle:Kr,geoClipExtent:function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=oi(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},geoClipRectangle:oi,geoContains:function(t,e){return(t&&di.hasOwnProperty(t.type)?di[t.type]:yi)(t,e)},geoDistance:pi,geoGraticule:Ei,geoGraticule10:function(){return Ei()()},geoInterpolate:Ni,geoLength:ci,geoPath:function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),fn(t,n(r))),r.result()}return o.area=function(t){return fn(t,n(zi)),zi.result()},o.measure=function(t){return fn(t,n(So)),So.result()},o.bounds=function(t){return fn(t,n($i)),$i.result()},o.centroid=function(t){return fn(t,n(go)),go.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,Pi):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Io):new yo(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},geoAlbers:Wo,geoAlbersUsa:function(){var t,e,n,r,i,o,a=Wo(),s=Vo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Vo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(l),r=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+Re,c+.12*e+Re],[o-.214*e-Re,c+.234*e-Re]]).stream(l),i=u.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+Re,c+.166*e+Re],[o-.115*e-Re,c+.234*e-Re]]).stream(l),h()},c.fitExtent=function(t,e){return Ao(c,t,e)},c.fitSize=function(t,e){return To(c,t,e)},c.fitWidth=function(t,e){return ko(c,t,e)},c.fitHeight=function(t,e){return Ro(c,t,e)},c.scale(1070)},geoAzimuthalEqualArea:function(){return qo($o).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:$o,geoAzimuthalEquidistant:function(){return qo(Ho).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:Ho,geoConicConformal:function(){return Bo(Zo).scale(109.5).parallels([30,30])},geoConicConformalRaw:Zo,geoConicEqualArea:Vo,geoConicEqualAreaRaw:Uo,geoConicEquidistant:function(){return Bo(na).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:na,geoEqualEarth:function(){return qo(ua).scale(177.158)},geoEqualEarthRaw:ua,geoEquirectangular:ea,geoEquirectangularRaw:ta,geoGnomonic:ca,geoGnomonicRaw:la,geoIdentity:function(){var t,e,n,r,i,o,a,s=1,u=0,l=0,c=1,h=1,f=0,p=null,d=1,g=1,y=Oo({point:function(t,e){var n=m([t,e]);this.stream.point(n[0],n[1])}}),_=Pi;function v(){return d=s*c,g=s*h,o=a=null,m}function m(n){var r=n[0]*d,i=n[1]*g;if(f){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+l]}return m.invert=function(n){var r=n[0]-u,i=n[1]-l;if(f){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/d,i/g]},m.stream=function(t){return o&&a===t?o:o=y(_(a=t))},m.postclip=function(t){return arguments.length?(_=t,p=n=r=i=null,v()):_},m.clipExtent=function(t){return arguments.length?(_=null==t?(p=n=r=i=null,Pi):oi(p=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==p?null:[[p,n],[r,i]]},m.scale=function(t){return arguments.length?(s=+t,v()):s},m.translate=function(t){return arguments.length?(u=+t[0],l=+t[1],v()):[u,l]},m.angle=function(n){return arguments.length?(e=Ke(f=n%360*Be),t=Ye(f),v()):f*je},m.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},m.reflectY=function(t){return arguments.length?(h=t?-1:1,v()):h<0},m.fitExtent=function(t,e){return Ao(m,t,e)},m.fitSize=function(t,e){return To(m,t,e)},m.fitWidth=function(t,e){return ko(m,t,e)},m.fitHeight=function(t,e){return Ro(m,t,e)},m},geoProjection:qo,geoProjectionMutator:jo,geoMercator:function(){return Jo(Qo).scale(961/qe)},geoMercatorRaw:Qo,geoNaturalEarth1:function(){return qo(ha).scale(175.295)},geoNaturalEarth1Raw:ha,geoOrthographic:pa,geoOrthographicRaw:fa,geoStereographic:function(){return qo(da).scale(250).clipAngle(142)},geoStereographicRaw:da,geoTransverseMercator:function(){var t=Jo(ga),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:ga,geoRotation:Fr,geoStream:fn,geoTransform:function(t){return{stream:Oo(t)}}}),_a=Math.abs,va=Math.atan,ma=Math.atan2,xa=Math.cos,ba=Math.exp,Ma=Math.floor,wa=Math.log,Ea=Math.max,Na=Math.min,Sa=Math.pow,Ia=Math.round,Ca=Math.sign||function(t){return t>0?1:t<0?-1:0},Oa=Math.sin,Pa=Math.tan,La=1e-6,Aa=1e-12,Ta=Math.PI,ka=Ta/2,Ra=Ta/4,Da=Math.SQRT1_2,Fa=Va(2),za=Va(Ta),Ga=2*Ta,qa=180/Ta,ja=Ta/180;function Ba(t){return t>1?ka:t<-1?-ka:Math.asin(t)}function Ua(t){return t>1?0:t<-1?Ta:Math.acos(t)}function Va(t){return t>0?Math.sqrt(t):0}function Wa(t){return(ba(t)-ba(-t))/2}function Ya(t){return(ba(t)+ba(-t))/2}function Xa(t){var e=Pa(t/2),n=2*wa(xa(t/2))/(e*e);function r(t,e){var r=xa(t),i=xa(e),o=Oa(e),a=i*r,s=-((1-a?wa((1+a)/2)/(1-a):-.5)+n/(1+a));return[s*i*Oa(t),s*o]}return r.invert=function(e,r){var i,o=Va(e*e+r*r),a=-t/2,s=50;if(!o)return[0,0];do{var u=a/2,l=xa(u),c=Oa(u),h=c/l,f=-wa(_a(l));a-=i=(2/h*f-n*h-o)/(-f/(c*c)+1-n/(2*l*l))*(l<0?.7:1)}while(_a(i)>La&&--s>0);var p=Oa(a);return[ma(e*p,o*xa(a)),Ba(r*p/o)]},r}function $a(t,e){var n=xa(e),r=function(t){return t?t/Math.sin(t):1}(Ua(n*xa(t/=2)));return[2*n*Oa(t)*r,Oa(e)*r]}function Ha(t){var e=Oa(t),n=xa(t),r=t>=0?1:-1,i=Pa(r*t),o=(1+e-n)/2;function a(t,a){var s=xa(a),u=xa(t/=2);return[(1+s)*Oa(t),(r*a>-ma(u,i)-.001?0:10*-r)+o+Oa(a)*n-(1+s)*e*u]}return a.invert=function(t,a){var s=0,u=0,l=50;do{var c=xa(s),h=Oa(s),f=xa(u),p=Oa(u),d=1+f,g=d*h-t,y=o+p*n-d*e*c-a,_=d*c/2,v=-h*p,m=e*d*h/2,x=n*f+e*c*p,b=v*m-x*_,M=(y*v-g*x)/b/2,w=(g*m-y*_)/b;_a(w)>2&&(w/=2),s-=M,u-=w}while((_a(M)>La||_a(w)>La)&&--l>0);return r*u>-ma(xa(s),i)-.001?[2*s,u]:null},a}function Qa(t,e){var n=Pa(e/2),r=Va(1-n*n),i=1+r*xa(t/=2),o=Oa(t)*r/i,a=n/i,s=o*o,u=a*a;return[4/3*o*(3+s-3*u),4/3*a*(3+3*s-u)]}$a.invert=function(t,e){if(!(t*t+4*e*e>Ta*Ta+La)){var n=t,r=e,i=25;do{var o,a=Oa(n),s=Oa(n/2),u=xa(n/2),l=Oa(r),c=xa(r),h=Oa(2*r),f=l*l,p=c*c,d=s*s,g=1-p*u*u,y=g?Ua(c*u)*Va(o=1/g):o=0,_=2*y*c*s-t,v=y*l-e,m=o*(p*d+y*c*u*f),x=o*(.5*a*h-2*y*l*s),b=.25*o*(h*s-y*l*p*a),M=o*(f*u+y*d*c),w=x*b-M*m;if(!w)break;var E=(v*x-_*M)/w,N=(_*b-v*m)/w;n-=E,r-=N}while((_a(E)>La||_a(N)>La)&&--i>0);return[n,r]}},Qa.invert=function(t,e){if(e*=3/8,!(t*=3/8)&&_a(e)>1)return null;var n=1+t*t+e*e,r=Va((n-Va(n*n-4*e*e))/2),i=Ba(r)/3,o=r?function(t){return wa(t+Va(t*t-1))}(_a(e/r))/3:function(t){return wa(t+Va(t*t+1))}(_a(t))/3,a=xa(i),s=Ya(o),u=s*s-a*a;return[2*Ca(t)*ma(Wa(o)*a,.25-u),2*Ca(e)*ma(s*Oa(i),.25+u)]};var Ja=Va(8),Ka=wa(1+Fa);function Za(t,e){var n=_a(e);return n<Ra?[t,wa(Pa(Ra+e/2))]:[t*xa(n)*(2*Fa-1/Oa(n)),Ca(e)*(2*Fa*(n-Ra)-wa(Pa(n/2)))]}function ts(t){var e=2*Ta/t;function n(t,n){var r=Ho(t,n);if(_a(t)>ka){var i=ma(r[1],r[0]),o=Va(r[0]*r[0]+r[1]*r[1]),a=e*Ia((i-ka)/e)+ka,s=ma(Oa(i-=a),2-xa(i));i=a+Ba(Ta/o*Oa(s))-s,r[0]=o*xa(i),r[1]=o*Oa(i)}return r}return n.invert=function(t,n){var r=Va(t*t+n*n);if(r>ka){var i=ma(n,t),o=e*Ia((i-ka)/e)+ka,a=i>o?-1:1,s=r*xa(o-i),u=1/Pa(a*Ua((s-Ta)/Va(Ta*(Ta-2*s)+r*r)));i=o+2*va((u+a*Va(u*u-3))/3),t=r*xa(i),n=r*Oa(i)}return Ho.invert(t,n)},n}function es(t,e){if(arguments.length<2&&(e=t),1===e)return $o;if(e===1/0)return ns;function n(n,r){var i=$o(n/e,r);return i[0]*=t,i}return n.invert=function(n,r){var i=$o.invert(n/t,r);return i[0]*=e,i},n}function ns(t,e){return[t*xa(e)/xa(e/=2),2*Oa(e)]}function rs(t,e,n){var r,i,o,a=100;n=void 0===n?0:+n,e=+e;do{(i=t(n))===(o=t(n+La))&&(o=i+La),n-=r=-1e-6*(i-e)/(i-o)}while(a-- >0&&_a(r)>La);return a<0?NaN:n}function is(t,e,n){return void 0===e&&(e=40),void 0===n&&(n=Aa),function(r,i,o,a){var s,u,l;o=void 0===o?0:+o,a=void 0===a?0:+a;for(var c=0;c<e;c++){var h=t(o,a),f=h[0]-r,p=h[1]-i;if(_a(f)<n&&_a(p)<n)break;var d=f*f+p*p;if(d>s)o-=u/=2,a-=l/=2;else{s=d;var g=(o>0?-1:1)*n,y=(a>0?-1:1)*n,_=t(o+g,a),v=t(o,a+y),m=(_[0]-h[0])/g,x=(_[1]-h[1])/g,b=(v[0]-h[0])/y,M=(v[1]-h[1])/y,w=M*m-x*b,E=(_a(w)<.5?.5:1)/w;if(o+=u=(p*b-f*M)*E,a+=l=(f*x-p*m)*E,_a(u)<n&&_a(l)<n)break}}return[o,a]}}function os(){var t=es(1.68,2);function e(e,n){if(e+n<-1.4){var r=(e-n+1.6)*(e+n+1.4)/8;e+=r,n-=.8*r*Oa(n+Ta/2)}var i=t(e,n),o=(1-xa(e*n))/12;return i[1]<0&&(i[0]*=1+o),i[1]>0&&(i[1]*=1+o/1.5*i[0]*i[0]),i}return e.invert=is(e),e}function as(t,e){var n,r=t*Oa(e),i=30;do{e-=n=(e+Oa(e)-r)/(1+xa(e))}while(_a(n)>La&&--i>0);return e/2}function ss(t,e,n){function r(r,i){return[t*r*xa(i=as(n,i)),e*Oa(i)]}return r.invert=function(r,i){return i=Ba(i/e),[r/(t*xa(i)),Ba((2*i+Oa(2*i))/n)]},r}Za.invert=function(t,e){if((r=_a(e))<Ka)return[t,2*va(ba(e))-ka];var n,r,i=Ra,o=25;do{var a=xa(i/2),s=Pa(i/2);i-=n=(Ja*(i-Ra)-wa(s)-r)/(Ja-a*a/(2*s))}while(_a(n)>Aa&&--o>0);return[t/(xa(i)*(Ja-1/Oa(i))),Ca(e)*i]},ns.invert=function(t,e){var n=2*Ba(e/2);return[t*xa(n/2)/xa(n),n]};var us=ss(Fa/ka,Fa,Ta);var ls=2.00276,cs=1.11072;function hs(t,e){var n=as(Ta,e);return[ls*t/(1/xa(e)+cs/xa(n)),(e+Fa*Oa(n))/ls]}function fs(t){var e=0,n=jo(t),r=n(e);return r.parallel=function(t){return arguments.length?n(e=t*ja):e*qa},r}function ps(t,e){return[t*xa(e),e]}function ds(t){if(!t)return ps;var e=1/Pa(t);function n(n,r){var i=e+t-r,o=i?n*xa(r)/i:i;return[i*Oa(o),e-i*xa(o)]}return n.invert=function(n,r){var i=Va(n*n+(r=e-r)*r),o=e+t-i;return[i/xa(o)*ma(n,r),o]},n}function gs(t){function e(e,n){var r=ka-n,i=r?e*t*Oa(r)/r:r;return[r*Oa(i)/t,ka-r*xa(i)]}return e.invert=function(e,n){var r=e*t,i=ka-n,o=Va(r*r+i*i),a=ma(r,i);return[(o?o/Oa(o):1)*a/t,ka-o]},e}hs.invert=function(t,e){var n,r,i=ls*e,o=e<0?-Ra:Ra,a=25;do{r=i-Fa*Oa(o),o-=n=(Oa(2*o)+2*o-Ta*Oa(r))/(2*xa(2*o)+2+Ta*xa(r)*Fa*xa(o))}while(_a(n)>La&&--a>0);return r=i-Fa*Oa(o),[t*(1/xa(r)+cs/xa(o))/ls,r]},ps.invert=function(t,e){return[t/xa(e),e]};var ys=ss(1,4/Ta,Ta);function _s(t,e,n,r,i,o){var a,s=xa(o);if(_a(t)>1||_a(o)>1)a=Ua(n*i+e*r*s);else{var u=Oa(t/2),l=Oa(o/2);a=2*Ba(Va(u*u+e*r*l*l))}return _a(a)>La?[a,ma(r*Oa(o),e*i-n*r*s)]:[0,0]}function vs(t,e,n){return Ua((t*t+e*e-n*n)/(2*t*e))}function ms(t){return t-2*Ta*Ma((t+Ta)/(2*Ta))}function xs(t,e,n){for(var r,i=[[t[0],t[1],Oa(t[1]),xa(t[1])],[e[0],e[1],Oa(e[1]),xa(e[1])],[n[0],n[1],Oa(n[1]),xa(n[1])]],o=i[2],a=0;a<3;++a,o=r)r=i[a],o.v=_s(r[1]-o[1],o[3],o[2],r[3],r[2],r[0]-o[0]),o.point=[0,0];var s=vs(i[0].v[0],i[2].v[0],i[1].v[0]),u=vs(i[0].v[0],i[1].v[0],i[2].v[0]),l=Ta-s;i[2].point[1]=0,i[0].point[0]=-(i[1].point[0]=i[0].v[0]/2);var c=[i[2].point[0]=i[0].point[0]+i[2].v[0]*xa(s),2*(i[0].point[1]=i[1].point[1]=i[2].v[0]*Oa(s))];return function(t,e){var n,r=Oa(e),o=xa(e),a=new Array(3);for(n=0;n<3;++n){var s=i[n];if(a[n]=_s(e-s[1],s[3],s[2],o,r,t-s[0]),!a[n][0])return s.point;a[n][1]=ms(a[n][1]-s.v[1])}var h=c.slice();for(n=0;n<3;++n){var f=2==n?0:n+1,p=vs(i[n].v[0],a[n][0],a[f][0]);a[n][1]<0&&(p=-p),n?1==n?(p=u-p,h[0]-=a[n][0]*xa(p),h[1]-=a[n][0]*Oa(p)):(p=l-p,h[0]+=a[n][0]*xa(p),h[1]+=a[n][0]*Oa(p)):(h[0]+=a[n][0]*xa(p),h[1]-=a[n][0]*Oa(p))}return h[0]/=3,h[1]/=3,h}}function bs(t){return t[0]*=ja,t[1]*=ja,t}function Ms(t,e,n){var r=Or({type:"MultiPoint",coordinates:[t,e,n]}),i=[-r[0],-r[1]],o=Fr(i),a=xs(bs(o(t)),bs(o(e)),bs(o(n)));a.invert=is(a);var s=qo(a).rotate(i),u=s.center;return delete s.rotate,s.center=function(t){return arguments.length?u(o(t)):o.invert(u())},s.clipAngle(90)}function ws(t,e){var n=Va(1-Oa(e));return[2/za*t*n,za*(1-n)]}function Es(t){var e=Pa(t);function n(t,n){return[t,(t?t/Oa(t):1)*(Oa(n)*xa(t)-e*xa(n))]}return n.invert=e?function(t,n){t&&(n*=Oa(t)/t);var r=xa(t);return[t,2*ma(Va(r*r+e*e-n*n)-r,e-n)]}:function(t,e){return[t,Ba(t?e*Pa(t)/t:e)]},n}ws.invert=function(t,e){var n=(n=e/za-1)*n;return[n>0?t*Va(Ta/n)/2:0,Ba(1-n)]};var Ns=Va(3);function Ss(t,e){return[Ns*t*(2*xa(2*e/3)-1)/za,Ns*za*Oa(e/3)]}function Is(t){var e=xa(t);function n(t,n){return[t*e,Oa(n)/e]}return n.invert=function(t,n){return[t/e,Ba(n*e)]},n}function Cs(t){var e=xa(t);function n(t,n){return[t*e,(1+e)*Pa(n/2)]}return n.invert=function(t,n){return[t/e,2*va(n/(1+e))]},n}function Os(t,e){var n=Va(8/(3*Ta));return[n*t*(1-_a(e)/Ta),n*e]}function Ps(t,e){var n=Va(4-3*Oa(_a(e)));return[2/Va(6*Ta)*t*n,Ca(e)*Va(2*Ta/3)*(2-n)]}function Ls(t,e){var n=Va(Ta*(4+Ta));return[2/n*t*(1+Va(1-4*e*e/(Ta*Ta))),4/n*e]}function As(t,e){var n=(2+ka)*Oa(e);e/=2;for(var r=0,i=1/0;r<10&&_a(i)>La;r++){var o=xa(e);e-=i=(e+Oa(e)*(o+2)-n)/(2*o*(1+o))}return[2/Va(Ta*(4+Ta))*t*(1+xa(e)),2*Va(Ta/(4+Ta))*Oa(e)]}function Ts(t,e){return[t*(1+xa(e))/Va(2+Ta),2*e/Va(2+Ta)]}function ks(t,e){for(var n=(1+ka)*Oa(e),r=0,i=1/0;r<10&&_a(i)>La;r++)e-=i=(e+Oa(e)-n)/(1+xa(e));return n=Va(2+Ta),[t*(1+xa(e))/n,2*e/n]}Ss.invert=function(t,e){var n=3*Ba(e/(Ns*za));return[za*t/(Ns*(2*xa(2*n/3)-1)),n]},Os.invert=function(t,e){var n=Va(8/(3*Ta)),r=e/n;return[t/(n*(1-_a(r)/Ta)),r]},Ps.invert=function(t,e){var n=2-_a(e)/Va(2*Ta/3);return[t*Va(6*Ta)/(2*n),Ca(e)*Ba((4-n*n)/3)]},Ls.invert=function(t,e){var n=Va(Ta*(4+Ta))/2;return[t*n/(1+Va(1-e*e*(4+Ta)/(4*Ta))),e*n/2]},As.invert=function(t,e){var n=e*Va((4+Ta)/Ta)/2,r=Ba(n),i=xa(r);return[t/(2/Va(Ta*(4+Ta))*(1+i)),Ba((r+n*(i+2))/(2+ka))]},Ts.invert=function(t,e){var n=Va(2+Ta),r=e*n/2;return[n*t/(1+xa(r)),r]},ks.invert=function(t,e){var n=1+ka,r=Va(n/2);return[2*t*r/(1+xa(e*=r)),Ba((e+Oa(e))/n)]};var Rs=3+2*Fa;function Ds(t,e){var n=Oa(t/=2),r=xa(t),i=Va(xa(e)),o=xa(e/=2),a=Oa(e)/(o+Fa*r*i),s=Va(2/(1+a*a)),u=Va((Fa*o+(r+n)*i)/(Fa*o+(r-n)*i));return[Rs*(s*(u-1/u)-2*wa(u)),Rs*(s*a*(u+1/u)-2*va(a))]}Ds.invert=function(t,e){if(!(n=Qa.invert(t/1.2,1.065*e)))return null;var n,r=n[0],i=n[1],o=20;t/=Rs,e/=Rs;do{var a=r/2,s=i/2,u=Oa(a),l=xa(a),c=Oa(s),h=xa(s),f=xa(i),p=Va(f),d=c/(h+Fa*l*p),g=d*d,y=Va(2/(1+g)),_=(Fa*h+(l+u)*p)/(Fa*h+(l-u)*p),v=Va(_),m=v-1/v,x=v+1/v,b=y*m-2*wa(v)-t,M=y*d*x-2*va(d)-e,w=c&&Da*p*u*g/c,E=(Fa*l*h+p)/(2*(h+Fa*l*p)*(h+Fa*l*p)*p),N=-.5*d*y*y*y,S=N*w,I=N*E,C=(C=2*h+Fa*p*(l-u))*C*v,O=(Fa*l*h*p+f)/C,P=-Fa*u*c/(p*C),L=m*S-2*O/v+y*(O+O/_),A=m*I-2*P/v+y*(P+P/_),T=d*x*S-2*w/(1+g)+y*x*w+y*d*(O-O/_),k=d*x*I-2*E/(1+g)+y*x*E+y*d*(P-P/_),R=A*T-k*L;if(!R)break;var D=(M*A-b*k)/R,F=(b*T-M*L)/R;r-=D,i=Ea(-ka,Na(ka,i-F))}while((_a(D)>La||_a(F)>La)&&--o>0);return _a(_a(i)-ka)<La?[0,i]:o&&[r,i]};var Fs=xa(35*ja);function zs(t,e){var n=Pa(e/2);return[t*Fs*Va(1-n*n),(1+Fs)*n]}function Gs(t,e){var n=e/2,r=xa(n);return[2*t/za*xa(e)*r*r,za*Pa(n)]}function qs(t){var e=1-t,n=i(Ta,0)[0]-i(-Ta,0)[0],r=Va(2*(i(0,ka)[1]-i(0,-ka)[1])/n);function i(n,r){var i=xa(r),o=Oa(r);return[i/(e+t*i)*n,e*r+t*o]}function o(t,e){var n=i(t,e);return[n[0]*r,n[1]/r]}function a(t){return o(0,t)[1]}return o.invert=function(n,i){var o=rs(a,i);return[n/r*(t+e/xa(o)),o]},o}function js(t){return[t[0]/2,Ba(Pa(t[1]/2*ja))*qa]}function Bs(t){return[2*t[0],2*va(Oa(t[1]*ja))*qa]}function Us(t,e){var n=2*Ta/e,r=t*t;function i(e,i){var o=Ho(e,i),a=o[0],s=o[1],u=a*a+s*s;if(u>r){var l=Va(u),c=ma(s,a),h=n*Ia(c/n),f=c-h,p=t*xa(f),d=(t*Oa(f)-f*Oa(p))/(ka-p),g=Vs(f,d),y=(Ta-t)/Ws(g,p,Ta);a=l;var _,v=50;do{a-=_=(t+Ws(g,p,a)*y-l)/(g(a)*y)}while(_a(_)>La&&--v>0);s=f*Oa(a),a<ka&&(s-=d*(a-ka));var m=Oa(h),x=xa(h);o[0]=a*x-s*m,o[1]=a*m+s*x}return o}return i.invert=function(e,i){var o=e*e+i*i;if(o>r){var a=Va(o),s=ma(i,e),u=n*Ia(s/n),l=s-u;e=a*xa(l),i=a*Oa(l);for(var c=e-ka,h=Oa(e),f=i/h,p=e<ka?1/0:0,d=10;;){var g=t*Oa(f),y=t*xa(f),_=Oa(y),v=ka-y,m=(g-f*_)/v,x=Vs(f,m);if(_a(p)<Aa||!--d)break;f-=p=(f*h-m*c-i)/(h-2*c*(v*(y+f*g*xa(y)-_)-g*(g-f*_))/(v*v))}e=(a=t+Ws(x,y,e)*(Ta-t)/Ws(x,y,Ta))*xa(s=u+f),i=a*Oa(s)}return Ho.invert(e,i)},i}function Vs(t,e){return function(n){var r=t*xa(n);return n<ka&&(r-=e),Va(1+r*r)}}function Ws(t,e,n){for(var r=(n-e)/50,i=t(e)+t(n),o=1,a=e;o<50;++o)i+=2*t(a+=r);return.5*i*r}function Ys(t,e,n,r,i,o,a,s){function u(u,l){if(!l)return[t*u/Ta,0];var c=l*l,h=t+c*(e+c*(n+c*r)),f=l*(i-1+c*(o-s+c*a)),p=(h*h+f*f)/(2*f),d=u*Ba(h/p)/Ta;return[p*Oa(d),l*(1+c*s)+p*(1-xa(d))]}return arguments.length<8&&(s=0),u.invert=function(u,l){var c,h,f=Ta*u/t,p=l,d=50;do{var g=p*p,y=t+g*(e+g*(n+g*r)),_=p*(i-1+g*(o-s+g*a)),v=y*y+_*_,m=2*_,x=v/m,b=x*x,M=Ba(y/x)/Ta,w=f*M,E=y*y,N=(2*e+g*(4*n+6*g*r))*p,S=i+g*(3*o+5*g*a),I=(2*(y*N+_*(S-1))*m-v*(2*(S-1)))/(m*m),C=xa(w),O=Oa(w),P=x*C,L=x*O,A=f/Ta*(1/Va(1-E/b))*(N*x-y*I)/b,T=L-u,k=p*(1+g*s)+x-P-l,R=I*O+P*A,D=P*M,F=1+I-(I*C-L*A),z=L*M,G=R*z-F*D;if(!G)break;f-=c=(k*R-T*F)/G,p-=h=(T*z-k*D)/G}while((_a(c)>La||_a(h)>La)&&--d>0);return[f,p]},u}zs.invert=function(t,e){var n=e/(1+Fs);return[t&&t/(Fs*Va(1-n*n)),2*va(n)]},Gs.invert=function(t,e){var n=va(e/za),r=xa(n),i=2*n;return[t*za/2/(xa(i)*r*r),i]};var Xs=Ys(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);var $s=Ys(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);var Hs=Ys(5/6*Ta,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Qs(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}Qs.invert=function(t,e){var n,r=t,i=e,o=50;do{var a=i*i;i-=n=(i*(1+a/12)-e)/(1+a/4)}while(_a(n)>La&&--o>0);o=50,t/=1-.162388*a;do{var s=(s=r*r)*s;r-=n=(r*(.87-952426e-9*s)-t)/(.87-.00476213*s)}while(_a(n)>La&&--o>0);return[r,i]};var Js=Ys(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ks(t){var e=t(ka,0)[0]-t(-ka,0)[0];function n(n,r){var i=n>0?-.5:.5,o=t(n+i*Ta,r);return o[0]-=i*e,o}return t.invert&&(n.invert=function(n,r){var i=n>0?-.5:.5,o=t.invert(n+i*e,r),a=o[0]-i*Ta;return a<-Ta?a+=2*Ta:a>Ta&&(a-=2*Ta),o[0]=a,o}),n}function Zs(t,e){var n=Ca(t),r=Ca(e),i=xa(e),o=xa(t)*i,a=Oa(t)*i,s=Oa(r*e);t=_a(ma(a,s)),e=Ba(o),_a(t-ka)>La&&(t%=ka);var u=function(t,e){if(e===ka)return[0,0];var n,r,i=Oa(e),o=i*i,a=o*o,s=1+a,u=1+3*a,l=1-a,c=Ba(1/Va(s)),h=l+o*s*c,f=(1-i)/h,p=Va(f),d=f*s,g=Va(d),y=p*l;if(0===t)return[0,-(y+o*g)];var _,v=xa(e),m=1/v,x=2*i*v,b=(-h*v-(-3*o+c*u)*x*(1-i))/(h*h),M=-m*x,w=-m*(o*s*b+f*u*x),E=-2*m*(l*(.5*b/p)-2*o*p*x),N=4*t/Ta;if(t>.222*Ta||e<Ta/4&&t>.175*Ta){if(n=(y+o*Va(d*(1+a)-y*y))/(1+a),t>Ta/4)return[n,n];var S=n,I=.5*n;n=.5*(I+S),r=50;do{var C=n*(E+M*Va(d-n*n))+w*Ba(n/g)-N;if(!C)break;C<0?I=n:S=n,n=.5*(I+S)}while(_a(S-I)>La&&--r>0)}else{n=La,r=25;do{var O=n*n,P=Va(d-O),L=E+M*P,A=n*L+w*Ba(n/g)-N;n-=_=P?A/(L+(w-M*O)/P):0}while(_a(_)>La&&--r>0)}return[n,-y-o*Va(d-n*n)]}(t>Ta/4?ka-t:t,e);return t>Ta/4&&(s=u[0],u[0]=-u[1],u[1]=-s),u[0]*=n,u[1]*=-r,u}function tu(t,e){var n,r,i,o,a;if(e<La)return[(o=Oa(t))-(n=e*(t-o*(r=xa(t)))/4)*r,r+n*o,1-e*o*o/2,t-n];if(e>=.999999)return n=(1-e)/4,r=Ya(t),o=function(t){return((t=ba(2*t))-1)/(t+1)}(t),i=1/r,[o+n*((a=r*Wa(t))-t)/(r*r),i-n*o*i*(a-t),i+n*o*i*(a+t),2*va(ba(t))-ka+n*(a-t)/r];var s=[1,0,0,0,0,0,0,0,0],u=[Va(e),0,0,0,0,0,0,0,0],l=0;for(r=Va(1-e),a=1;_a(u[l]/s[l])>La&&l<8;)n=s[l++],u[l]=(n-r)/2,s[l]=(n+r)/2,r=Va(n*r),a*=2;i=a*s[l]*t;do{i=(Ba(o=u[l]*Oa(r=i)/s[l])+i)/2}while(--l);return[Oa(i),o=xa(i),o/xa(i-r),i]}function eu(t,e){if(!e)return t;if(1===e)return wa(Pa(t/2+Ra));for(var n=1,r=Va(1-e),i=Va(e),o=0;_a(i)>La;o++){if(t%Ta){var a=va(r*Pa(t)/n);a<0&&(a+=Ta),t+=a+~~(t/Ta)*Ta}else t+=t;i=(n+r)/2,r=Va(n*r),i=((n=i)-r)/2}return t/(Sa(2,o)*n)}function nu(t,e){var n=(Fa-1)/(Fa+1),r=Va(1-n*n),i=eu(ka,r*r),o=wa(Pa(Ta/4+_a(e)/2)),a=ba(-1*o)/Va(n),s=function(t,e){var n=t*t,r=e+1,i=1-n-e*e;return[.5*((t>=0?ka:-ka)-ma(i,2*t)),-.25*wa(i*i+4*n)+.5*wa(r*r+n)]}(a*xa(-1*t),a*Oa(-1*t)),u=function(t,e,n){var r=_a(t),i=Wa(_a(e));if(r){var o=1/Oa(r),a=1/(Pa(r)*Pa(r)),s=-(a+n*(i*i*o*o)-1+n),u=(-s+Va(s*s-(n-1)*a*4))/2;return[eu(va(1/Va(u)),n)*Ca(t),eu(va(Va((u/a-1)/n)),1-n)*Ca(e)]}return[0,eu(va(i),1-n)*Ca(e)]}(s[0],s[1],r*r);return[-u[1],(e>=0?1:-1)*(.5*i-u[0])]}function ru(t){var e=Oa(t),n=xa(t),r=iu(t);function i(t,i){var o=r(t,i);t=o[0],i=o[1];var a=Oa(i),s=xa(i),u=xa(t),l=Ua(e*a+n*s*u),c=Oa(l),h=_a(c)>La?l/c:1;return[h*n*Oa(t),(_a(t)>ka?h:-h)*(e*s-n*a*u)]}return r.invert=iu(-t),i.invert=function(t,n){var i=Va(t*t+n*n),o=-Oa(i),a=xa(i),s=i*a,u=-n*o,l=i*e,c=Va(s*s+u*u-l*l),h=ma(s*l+u*c,u*l-s*c),f=(i>ka?-1:1)*ma(t*o,i*xa(h)*a+n*Oa(h)*o);return r.invert(f,h)},i}function iu(t){var e=Oa(t),n=xa(t);return function(t,r){var i=xa(r),o=xa(t)*i,a=Oa(t)*i,s=Oa(r);return[ma(a,o*n-s*e),Ba(s*n+o*e)]}}Zs.invert=function(t,e){_a(t)>1&&(t=2*Ca(t)-t),_a(e)>1&&(e=2*Ca(e)-e);var n=Ca(t),r=Ca(e),i=-n*t,o=-r*e,a=o/i<1,s=function(t,e){var n=0,r=1,i=.5,o=50;for(;;){var a=i*i,s=Va(i),u=Ba(1/Va(1+a)),l=1-a+i*(1+a)*u,c=(1-s)/l,h=Va(c),f=c*(1+a),p=h*(1-a),d=Va(f-t*t),g=e+p+i*d;if(_a(r-n)<Aa||0==--o||0===g)break;g>0?n=i:r=i,i=.5*(n+r)}if(!o)return null;var y=Ba(s),_=xa(y),v=1/_,m=2*s*_,x=(-l*_-(-3*i+u*(1+3*a))*m*(1-s))/(l*l);return[Ta/4*(t*(-2*v*(.5*x/h*(1-a)-2*i*h*m)+-v*m*d)+-v*(i*(1+a)*x+c*(1+3*a)*m)*Ba(t/Va(f))),y]}(a?o:i,a?i:o),u=s[0],l=s[1],c=xa(l);return a&&(u=-ka-u),[n*(ma(Oa(u)*c,-Oa(l))+Ta),r*Ba(xa(u)*c)]},nu.invert=function(t,e){var n=(Fa-1)/(Fa+1),r=Va(1-n*n),i=function(t,e,n){var r,i,o;return t?(r=tu(t,n),e?(o=(i=tu(e,1-n))[1]*i[1]+n*r[0]*r[0]*i[0]*i[0],[[r[0]*i[2]/o,r[1]*r[2]*i[0]*i[1]/o],[r[1]*i[1]/o,-r[0]*r[2]*i[0]*i[2]/o],[r[2]*i[1]*i[2]/o,-n*r[0]*r[1]*i[0]/o]]):[[r[0],0],[r[1],0],[r[2],0]]):[[0,(i=tu(e,1-n))[0]/i[1]],[1/i[1],0],[i[2]/i[1],0]]}(.5*eu(ka,r*r)-e,-t,r*r),o=function(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(i[0],i[1]);return[ma(o[1],o[0])/-1,2*va(ba(-.5*wa(n*o[0]*o[0]+n*o[1]*o[1])))-ka]};var ou=Ba(1-1/3)*qa,au=Is(0);function su(t){var e=ou*ja,n=ws(Ta,e)[0]-ws(-Ta,e)[0],r=au(0,e)[1],i=ws(0,e)[1],o=za-i,a=Ga/t,s=4/Ga,u=r+o*o*4/Ga;function l(l,c){var h,f=_a(c);if(f>e){var p=Na(t-1,Ea(0,Ma((l+Ta)/a)));(h=ws(l+=Ta*(t-1)/t-p*a,f))[0]=h[0]*Ga/n-Ga*(t-1)/(2*t)+p*Ga/t,h[1]=r+4*(h[1]-i)*o/Ga,c<0&&(h[1]=-h[1])}else h=au(l,c);return h[0]*=s,h[1]/=u,h}return l.invert=function(e,l){e/=s;var c=_a(l*=u);if(c>r){var h=Na(t-1,Ea(0,Ma((e+Ta)/a)));e=(e+Ta*(t-1)/t-h*a)*n/Ga;var f=ws.invert(e,.25*(c-r)*Ga/o+i);return f[0]-=Ta*(t-1)/t-h*a,l<0&&(f[1]=-f[1]),f}return au.invert(e,l)},l}function uu(t,e){return[t,1&e?89.999999:ou]}function lu(t,e){return[t,1&e?-89.999999:-ou]}function cu(t){return[.999999*t[0],t[1]]}function hu(t){var e,n=1+t,r=Ba(Oa(1/n)),i=2*Va(Ta/(e=Ta+4*r*n)),o=.5*i*(n+Va(t*(2+t))),a=t*t,s=n*n;function u(u,l){var c,h,f=1-Oa(l);if(f&&f<2){var p,d=ka-l,g=25;do{var y=Oa(d),_=xa(d),v=r+ma(y,n-_),m=1+s-2*n*_;d-=p=(d-a*r-n*y+m*v-.5*f*e)/(2*n*y*v)}while(_a(p)>Aa&&--g>0);c=i*Va(m),h=u*v/Ta}else c=i*(t+f),h=u*r/Ta;return[c*Oa(h),o-c*xa(h)]}return u.invert=function(t,u){var l=t*t+(u-=o)*u,c=(1+s-l/(i*i))/(2*n),h=Ua(c),f=Oa(h),p=r+ma(f,n-c);return[Ba(t/Va(l))*Ta/p,Ba(1-2*(h-a*r-n*f+(1+s-2*n*c)*p)/e)]},u}var fu=.7109889596207567,pu=.0528035274542;function du(t,e){return e>-fu?((t=us(t,e))[1]+=pu,t):ps(t,e)}function gu(t,e){return _a(e)>fu?((t=us(t,e))[1]-=e>0?pu:-pu,t):ps(t,e)}function yu(t,e,n,r){var i=Va(4*Ta/(2*n+(1+t-e/2)*Oa(2*n)+(t+e)/2*Oa(4*n)+e/2*Oa(6*n))),o=Va(r*Oa(n)*Va((1+t*xa(2*n)+e*xa(4*n))/(1+t+e))),a=n*u(1);function s(n){return Va(1+t*xa(2*n)+e*xa(4*n))}function u(r){var i=r*n;return(2*i+(1+t-e/2)*Oa(2*i)+(t+e)/2*Oa(4*i)+e/2*Oa(6*i))/n}function l(t){return s(t)*Oa(t)}var c=function(t,e){var r=n*rs(u,a*Oa(e)/n,e/Ta);isNaN(r)&&(r=n*Ca(e));var l=i*s(r);return[l*o*t/Ta*xa(r),l/o*Oa(r)]};return c.invert=function(t,e){var r=rs(l,e*o/i);return[t*Ta/(xa(r)*i*o*s(r)),Ba(n*u(r/n)/a)]},0===n&&(i=Va(r/Ta),(c=function(t,e){return[t*i,Oa(e)/i]}).invert=function(t,e){return[t/i,Ba(e*i)]}),c}function _u(t,e,n,r,i,o,a,s,u,l,c){if(c.nanEncountered)return NaN;var h,f,p,d,g,y,_,v,m,x;if(f=t(e+.25*(h=n-e)),p=t(n-.25*h),isNaN(f))c.nanEncountered=!0;else{if(!isNaN(p))return x=((y=(d=h*(r+4*f+i)/12)+(g=h*(i+4*p+o)/12))-a)/15,l>u?(c.maxDepthCount++,y+x):Math.abs(x)<s?y+x:(v=_u(t,e,_=e+.5*h,r,f,i,d,.5*s,u,l+1,c),isNaN(v)?(c.nanEncountered=!0,NaN):(m=_u(t,_,n,i,p,o,g,.5*s,u,l+1,c),isNaN(m)?(c.nanEncountered=!0,NaN):v+m));c.nanEncountered=!0}}function vu(t,e,n,r,i){void 0===r&&(r=1e-8),void 0===i&&(i=20);var o=t(e),a=t(.5*(e+n)),s=t(n);return _u(t,e,n,o,a,s,(o+4*a+s)*(n-e)/6,r,i,1,{maxDepthCount:0,nanEncountered:!1})}function mu(t,e,n){function r(n){return t+(1-t)*Sa(1-Sa(n,e),1/e)}function i(t){return vu(r,0,t,1e-4)}for(var o=1/i(1),a=1e3,s=(1+1e-8)*o,u=[],l=0;l<=a;l++)u.push(i(l/a)*s);function c(t){var e=0,n=a,r=500;do{u[r]>t?n=r:e=r,r=e+n>>1}while(r>e);var i=u[r+1]-u[r];return i&&(i=(t-u[r+1])/i),(r+1+i)/a}var h=2*c(1)/Ta*o/n,f=function(t,e){var n=c(_a(Oa(e))),i=r(n)*t;return n/=h,[i,e>=0?n:-n]};return f.invert=function(t,e){var n;return _a(e*=h)<1&&(n=Ca(e)*Ba(i(_a(e))*o)),[t/r(_a(e)),n]},f}function xu(t,e){return _a(t[0]-e[0])<La&&_a(t[1]-e[1])<La}function bu(t,e){for(var n,r,i,o=-1,a=t.length,s=t[0],u=[];++o<a;){r=((n=t[o])[0]-s[0])/e,i=(n[1]-s[1])/e;for(var l=0;l<e;++l)u.push([s[0]+l*r,s[1]+l*i]);s=n}return u.push(n),u}function Mu(t){var e,n,r,i,o,a,s,u=[],l=t[0].length;for(s=0;s<l;++s)n=(e=t[0][s])[0][0],r=e[0][1],i=e[1][1],o=e[2][0],a=e[2][1],u.push(bu([[n+La,r+La],[n+La,i-La],[o-La,i-La],[o-La,a+La]],30));for(s=t[1].length-1;s>=0;--s)n=(e=t[1][s])[0][0],r=e[0][1],i=e[1][1],o=e[2][0],a=e[2][1],u.push(bu([[o-La,a-La],[o-La,i+La],[n+La,i+La],[n+La,r-La]],30));return{type:"Polygon",coordinates:[Me(u)]}}function wu(t,e,n){var r,i;function o(n,r){for(var i=r<0?-1:1,o=e[+(r<0)],a=0,s=o.length-1;a<s&&n>o[a][2][0];++a);var u=t(n-o[a][1][0],r);return u[0]+=t(o[a][1][0],i*r>i*o[a][0][1]?o[a][0][1]:r)[0],u}n?o.invert=n(o):t.invert&&(o.invert=function(n,r){for(var a=i[+(r<0)],s=e[+(r<0)],u=0,l=a.length;u<l;++u){var c=a[u];if(c[0][0]<=n&&n<c[1][0]&&c[0][1]<=r&&r<c[1][1]){var h=t.invert(n-t(s[u][1][0],0)[0],r);return h[0]+=s[u][1][0],xu(o(h[0],h[1]),[n,r])?h:null}}});var a=qo(o),s=a.stream;return a.stream=function(t){var e=a.rotate(),n=s(t),i=(a.rotate([0,0]),s(t));return a.rotate(e),n.sphere=function(){fn(r,i)},n},a.lobes=function(n){return arguments.length?(r=Mu(n),e=n.map((function(t){return t.map((function(t){return[[t[0][0]*ja,t[0][1]*ja],[t[1][0]*ja,t[1][1]*ja],[t[2][0]*ja,t[2][1]*ja]]}))})),i=e.map((function(e){return e.map((function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],o=t(e[1][0],e[0][1])[1],a=t(e[1][0],e[1][1])[1];return o>a&&(n=o,o=a,a=n),[[r,o],[i,a]]}))})),a):e.map((function(t){return t.map((function(t){return[[t[0][0]*qa,t[0][1]*qa],[t[1][0]*qa,t[1][1]*qa],[t[2][0]*qa,t[2][1]*qa]]}))}))},null!=e&&a.lobes(e),a}du.invert=function(t,e){return e>-fu?us.invert(t,e-pu):ps.invert(t,e)},gu.invert=function(t,e){return _a(e)>fu?us.invert(t,e+(e>0?pu:-pu)):ps.invert(t,e)};var Eu=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var Nu=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var Su=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var Iu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];var Cu=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];var Ou=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Pu(t,e){return[3/Ga*t*Va(Ta*Ta/3-e*e),e]}function Lu(t){function e(e,n){if(_a(_a(n)-ka)<La)return[0,n<0?-2:2];var r=Oa(n),i=Sa((1+r)/(1-r),t/2),o=.5*(i+1/i)+xa(e*=t);return[2*Oa(e)/o,(i-1/i)/o]}return e.invert=function(e,n){var r=_a(n);if(_a(r-2)<La)return e?null:[0,Ca(n)*ka];if(r>2)return null;var i=(e/=2)*e,o=(n/=2)*n,a=2*n/(1+i+o);return a=Sa((1+a)/(1-a),1/t),[ma(2*e,1-i-o)/t,Ba((a-1)/(a+1))]},e}Pu.invert=function(t,e){return[Ga/3*t/Va(Ta*Ta/3-e*e),e]};var Au=Ta/Fa;function Tu(t,e){return[t*(1+Va(xa(e)))/2,e/(xa(e/2)*xa(t/6))]}function ku(t,e){var n=t*t,r=e*e;return[t*(.975534+r*(-.0143059*n-.119161+-.0547009*r)),e*(1.00384+n*(.0802894+-.02855*r+199025e-9*n)+r*(.0998909+-.0491032*r))]}function Ru(t,e){return[Oa(t)/xa(e),Pa(e)*xa(t)]}function Du(t){var e=xa(t),n=Pa(Ra+t/2);function r(r,i){var o=i-t,a=_a(o)<La?r*e:_a(a=Ra+i/2)<La||_a(_a(a)-ka)<La?0:r*o/wa(Pa(a)/n);return[a,o]}return r.invert=function(r,i){var o,a=i+t;return[_a(i)<La?r/e:_a(o=Ra+a/2)<La||_a(_a(o)-ka)<La?0:r*wa(Pa(o)/n)/i,a]},r}function Fu(t,e){return[t,1.25*wa(Pa(Ra+.4*e))]}function zu(t){var e=t.length-1;function n(n,r){for(var i,o=xa(r),a=2/(1+o*xa(n)),s=a*o*Oa(n),u=a*Oa(r),l=e,c=t[l],h=c[0],f=c[1];--l>=0;)h=(c=t[l])[0]+s*(i=h)-u*f,f=c[1]+s*f+u*i;return[h=s*(i=h)-u*f,f=s*f+u*i]}return n.invert=function(n,r){var i=20,o=n,a=r;do{for(var s,u=e,l=t[u],c=l[0],h=l[1],f=0,p=0;--u>=0;)f=c+o*(s=f)-a*p,p=h+o*p+a*s,c=(l=t[u])[0]+o*(s=c)-a*h,h=l[1]+o*h+a*s;var d,g,y=(f=c+o*(s=f)-a*p)*f+(p=h+o*p+a*s)*p;o-=d=((c=o*(s=c)-a*h-n)*f+(h=o*h+a*s-r)*p)/y,a-=g=(h*f-c*p)/y}while(_a(d)+_a(g)>1e-12&&--i>0);if(i){var _=Va(o*o+a*a),v=2*va(.5*_),m=Oa(v);return[ma(o*m,_*xa(v)),_?Ba(a*m/_):0]}},n}Tu.invert=function(t,e){var n=_a(t),r=_a(e),i=La,o=ka;r<Au?o*=r/Au:i+=6*Ua(Au/r);for(var a=0;a<25;a++){var s=Oa(o),u=Va(xa(o)),l=Oa(o/2),c=xa(o/2),h=Oa(i/6),f=xa(i/6),p=.5*i*(1+u)-n,d=o/(c*f)-r,g=u?-.25*i*s/u:0,y=.5*(1+u),_=(1+.5*o*l/c)/(c*f),v=o/c*(h/6)/(f*f),m=g*v-_*y,x=(p*v-d*y)/m,b=(d*g-p*_)/m;if(o-=x,i-=b,_a(x)<La&&_a(b)<La)break}return[t<0?-i:i,e<0?-o:o]},ku.invert=function(t,e){var n=Ca(t)*Ta,r=e/2,i=50;do{var o=n*n,a=r*r,s=n*r,u=n*(.975534+a*(-.0143059*o-.119161+-.0547009*a))-t,l=r*(1.00384+o*(.0802894+-.02855*a+199025e-9*o)+a*(.0998909+-.0491032*a))-e,c=.975534-a*(.119161+3*o*.0143059+.0547009*a),h=-s*(.238322+.2188036*a+.0286118*o),f=s*(.1605788+7961e-7*o+-.0571*a),p=1.00384+o*(.0802894+199025e-9*o)+a*(3*(.0998909-.02855*o)-.245516*a),d=h*f-p*c,g=(l*h-u*p)/d,y=(u*f-l*c)/d;n-=g,r-=y}while((_a(g)>La||_a(y)>La)&&--i>0);return i&&[n,r]},Ru.invert=function(t,e){var n=t*t,r=e*e+1,i=n+r,o=t?Da*Va((i-Va(i*i-4*n))/n):1/Va(r);return[Ba(t*o),Ca(e)*Ua(o)]},Fu.invert=function(t,e){return[t,2.5*va(ba(.8*e))-.625*Ta]};var Gu=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],qu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ju=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Bu=[[.9245,0],[0,0],[.01943,0]],Uu=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Vu(t,e){var n=qo(zu(t)).rotate(e).clipAngle(90),r=Fr(e),i=n.center;return delete n.rotate,n.center=function(t){return arguments.length?i(r(t)):r.invert(i())},n}var Wu=Va(6),Yu=Va(7);function Xu(t,e){var n=Ba(7*Oa(e)/(3*Wu));return[Wu*t*(2*xa(2*n/3)-1)/Yu,9*Oa(n/3)/Yu]}function $u(t,e){for(var n,r=(1+Da)*Oa(e),i=e,o=0;o<25&&(i-=n=(Oa(i/2)+Oa(i)-r)/(.5*xa(i/2)+xa(i)),!(_a(n)<La));o++);return[t*(1+2*xa(i)/xa(i/2))/(3*Fa),2*Va(3)*Oa(i/2)/Va(2+Fa)]}function Hu(t,e){for(var n,r=Va(6/(4+Ta)),i=(1+Ta/4)*Oa(e),o=e/2,a=0;a<25&&(o-=n=(o/2+Oa(o)-i)/(.5+xa(o)),!(_a(n)<La));a++);return[r*(.5+xa(o))*t/1.5,r*o]}function Qu(t,e){var n=e*e,r=n*n,i=n*r;return[t*(.84719-.13063*n+i*i*(.05494*n-.04515-.02326*r+.00331*i)),e*(1.01183+r*r*(.01926*n-.02625-.00396*r))]}function Ju(t,e){return[t*(1+xa(e))/2,2*(e-Pa(e/2))]}Xu.invert=function(t,e){var n=3*Ba(e*Yu/9);return[t*Yu/(Wu*(2*xa(2*n/3)-1)),Ba(3*Oa(n)*Wu/7)]},$u.invert=function(t,e){var n=e*Va(2+Fa)/(2*Va(3)),r=2*Ba(n);return[3*Fa*t/(1+2*xa(r)/xa(r/2)),Ba((n+Oa(r))/(1+Da))]},Hu.invert=function(t,e){var n=Va(6/(4+Ta)),r=e/n;return _a(_a(r)-ka)<La&&(r=r<0?-ka:ka),[1.5*t/(n*(.5+xa(r))),Ba((r/2+Oa(r))/(1+Ta/4))]},Qu.invert=function(t,e){var n,r,i,o,a=e,s=25;do{a-=n=(a*(1.01183+(i=(r=a*a)*r)*i*(.01926*r-.02625-.00396*i))-e)/(1.01183+i*i*(.21186*r-.23625+-.05148*i))}while(_a(n)>Aa&&--s>0);return[t/(.84719-.13063*(r=a*a)+(o=r*(i=r*r))*o*(.05494*r-.04515-.02326*i+.00331*o)),a]},Ju.invert=function(t,e){for(var n=e/2,r=0,i=1/0;r<10&&_a(i)>La;++r){var o=xa(e/2);e-=i=(e-Pa(e/2)-n)/(1-.5/(o*o))}return[2*t/(1+xa(e)),e]};var Ku=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Zu(t,e){var n=Oa(e),r=xa(e),i=Ca(t);if(0===t||_a(e)===ka)return[0,e];if(0===e)return[t,0];if(_a(t)===ka)return[t*r,ka*n];var o=Ta/(2*t)-2*t/Ta,a=2*e/Ta,s=(1-a*a)/(n-a),u=o*o,l=s*s,c=1+u/l,h=1+l/u,f=(o*n/s-o/2)/c,p=(l*n/u+s/2)/h,d=p*p-(l*n*n/u+s*n-1)/h;return[ka*(f+Va(f*f+r*r/c)*i),ka*(p+Va(d<0?0:d)*Ca(-e*o)*i)]}Zu.invert=function(t,e){var n=(t/=ka)*t,r=n+(e/=ka)*e,i=Ta*Ta;return[t?(r-1+Va((1-r)*(1-r)+4*n))/(2*t)*ka:0,rs((function(t){return r*(Ta*Oa(t)-2*t)*Ta+4*t*t*(e-Oa(t))+2*Ta*t-i*e}),0)]};var tl=1.0148,el=.23185,nl=-.14499,rl=.02406,il=1.790857183;function ol(t,e){var n=e*e;return[t,e*(tl+n*n*(el+n*(nl+rl*n)))]}function al(t,e){if(_a(e)<La)return[t,0];var n=Pa(e),r=t*Oa(e);return[Oa(r)/n,e+(1-xa(r))/n]}function sl(t,e){var n=ll(t[1],t[0]),r=ll(e[1],e[0]),i=function(t,e){return ma(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])}(n,r),o=cl(n)/cl(r);return ul([1,0,t[0][0],0,1,t[0][1]],ul([o,0,0,0,o,0],ul([xa(i),Oa(i),0,-Oa(i),xa(i),0],[1,0,-e[0][0],0,1,-e[0][1]])))}function ul(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]}function ll(t,e){return[t[0]-e[0],t[1]-e[1]]}function cl(t){return Va(t[0]*t[0]+t[1]*t[1])}function hl(t,e){function n(t,n){var r,i=e(t,n),o=i.project([t*qa,n*qa]);return(r=i.transform)?[r[0]*o[0]+r[1]*o[1]+r[2],-(r[3]*o[0]+r[4]*o[1]+r[5])]:(o[1]=-o[1],o)}function r(t,n){var i=t.project.invert,o=t.transform,a=n;if(o&&(o=function(t){var e=1/(t[0]*t[4]-t[1]*t[3]);return[e*t[4],-e*t[1],e*(t[1]*t[5]-t[2]*t[4]),-e*t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]}(o),a=[o[0]*a[0]+o[1]*a[1]+o[2],o[3]*a[0]+o[4]*a[1]+o[5]]),i&&t===function(t){return e(t[0]*ja,t[1]*ja)}(s=i(a)))return s;for(var s,u=t.children,l=0,c=u&&u.length;l<c;++l)if(s=r(u[l],n))return s}!function t(e,n){if(e.edges=function(t){for(var e=t.length,n=[],r=t[e-1],i=0;i<e;++i)n.push([r,r=t[i]]);return n}(e.face),n.face){var r=e.shared=function(t,e){for(var n,r,i=t.length,o=null,a=0;a<i;++a){n=t[a];for(var s=e.length;--s>=0;)if(r=e[s],n[0]===r[0]&&n[1]===r[1]){if(o)return[o,n];o=n}}}(e.face,n.face),i=sl(r.map(n.project),r.map(e.project));e.transform=n.transform?ul(n.transform,i):i;for(var o=n.edges,a=0,s=o.length;a<s;++a)pl(r[0],o[a][1])&&pl(r[1],o[a][0])&&(o[a]=e),pl(r[0],o[a][0])&&pl(r[1],o[a][1])&&(o[a]=e);for(o=e.edges,a=0,s=o.length;a<s;++a)pl(r[0],o[a][0])&&pl(r[1],o[a][1])&&(o[a]=n),pl(r[0],o[a][1])&&pl(r[1],o[a][0])&&(o[a]=n)}else e.transform=n.transform;e.children&&e.children.forEach((function(n){t(n,e)}));return e}(t,{transform:null}),dl(t)&&(n.invert=function(e,n){var i=r(t,[e,-n]);return i&&(i[0]*=ja,i[1]*=ja,i)});var i=qo(n),o=i.stream;return i.stream=function(e){var n=i.rotate(),r=o(e),a=(i.rotate([0,0]),o(e));return i.rotate(n),r.sphere=function(){a.polygonStart(),a.lineStart(),fl(a,t),a.lineEnd(),a.polygonEnd()},r},i.angle(-30)}function fl(t,e,n){var r,i,o=e.edges,a=o.length,s={type:"MultiPoint",coordinates:e.face},u=_r({type:"MultiPoint",coordinates:e.face.filter((function(t){return 90!==_a(t[1])}))}),l=!1,c=-1,h=u[1][0]-u[0][0],f=180===h||360===h?[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]:Or(s);if(n)for(;++c<a&&o[c]!==n;);++c;for(var p=0;p<a;++p)i=o[(p+c)%a],Array.isArray(i)?(l||(t.point((r=Ni(i[0],f)(La))[0],r[1]),l=!0),t.point((r=Ni(i[1],f)(La))[0],r[1])):(l=!1,i!==n&&fl(t,i,e))}function pl(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function dl(t){return t.project.invert||t.children&&t.children.some(dl)}ol.invert=function(t,e){e>il?e=il:e<-1.790857183&&(e=-1.790857183);var n,r=e;do{var i=r*r;r-=n=(r*(tl+i*i*(el+i*(nl+rl*i)))-e)/(1.0148+i*i*(1.1592500000000001+i*(.21654*i-1.01493)))}while(_a(n)>La);return[t,r]},al.invert=function(t,e){if(_a(e)<La)return[t,0];var n,r=t*t+e*e,i=.5*e,o=10;do{var a=Pa(i),s=1/xa(i),u=r-2*e*i+i*i;i-=n=(a*u+2*(i-e))/(2+u*s*s+2*(i-e)*a)}while(_a(n)>La&&--o>0);return a=Pa(i),[(_a(e)<_a(i+1/a)?Ba(t*a):Ca(e)*Ca(t)*(Ua(_a(t*a))+ka))/Oa(i),i]};var gl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],yl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(t){return t.map((function(t){return gl[t]}))}));var _l=2/Va(3);function vl(t,e){var n=ws(t,e);return[n[0]*_l,n[1]]}function ml(t,e){for(var n=0,r=t.length,i=0;n<r;++n)i+=t[n]*e[n];return i}function xl(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function bl(t){return[ma(t[1],t[0])*qa,Ba(Ea(-1,Na(1,t[2])))*qa]}function Ml(t){var e=t[0]*ja,n=t[1]*ja,r=xa(n);return[r*xa(e),r*Oa(e),Oa(n)]}vl.invert=function(t,e){return ws.invert(t/_l,e)};var wl=()=>{};function El(t,e){return{type:"FeatureCollection",features:t.features.map((function(t){return Nl(t,e)}))}}function Nl(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:Sl(t.geometry,e)}}function Sl(t,e){if(!t)return null;if("GeometryCollection"===t.type)return function(t,e){return{type:"GeometryCollection",geometries:t.geometries.map((function(t){return Sl(t,e)}))}}(t,e);var n;switch(t.type){case"Point":case"MultiPoint":n=Ol;break;case"LineString":case"MultiLineString":n=Pl;break;case"Polygon":case"MultiPolygon":case"Sphere":n=Ll;break;default:return null}return fn(t,e(n)),n.result()}var Il=[],Cl=[],Ol={point:function(t,e){Il.push([t,e])},result:function(){var t=Il.length?Il.length<2?{type:"Point",coordinates:Il[0]}:{type:"MultiPoint",coordinates:Il}:null;return Il=[],t}},Pl={lineStart:wl,point:function(t,e){Il.push([t,e])},lineEnd:function(){Il.length&&(Cl.push(Il),Il=[])},result:function(){var t=Cl.length?Cl.length<2?{type:"LineString",coordinates:Cl[0]}:{type:"MultiLineString",coordinates:Cl}:null;return Cl=[],t}},Ll={polygonStart:wl,lineStart:wl,point:function(t,e){Il.push([t,e])},lineEnd:function(){var t=Il.length;if(t){do{Il.push(Il[0].slice())}while(++t<4);Cl.push(Il),Il=[]}},polygonEnd:wl,result:function(){if(!Cl.length)return null;var t=[],e=[];return Cl.forEach((function(n){!function(t){if((e=t.length)<4)return!1;for(var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0}(n)?e.push(n):t.push([n])})),e.forEach((function(e){var n=e[0];t.some((function(t){if(function(t,e){for(var n=e[0],r=e[1],i=!1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],l=u[0],c=u[1],h=t[s],f=h[0],p=h[1];c>r^p>r&&n<(f-l)*(r-c)/(p-c)+l&&(i=!i)}return i}(t[0],n))return t.push(e),!0}))||t.push([e])})),Cl=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}};function Al(t){var e=t(ka,0)[0]-t(-ka,0)[0];function n(n,r){var i=_a(n)<ka,o=t(i?n:n>0?n-Ta:n+Ta,r),a=(o[0]-o[1])*Da,s=(o[0]+o[1])*Da;if(i)return[a,s];var u=e*Da,l=a>0^s>0?-1:1;return[l*a-Ca(s)*u,l*s-Ca(a)*u]}return t.invert&&(n.invert=function(n,r){var i=(n+r)*Da,o=(r-n)*Da,a=_a(i)<.5*e&&_a(o)<.5*e;if(!a){var s=e*Da,u=i>0^o>0?-1:1,l=-u*n+(o>0?1:-1)*s,c=-u*r+(i>0?1:-1)*s;i=(-l-c)*Da,o=(l-c)*Da}var h=t.invert(i,o);return a||(h[0]+=i>0?Ta:-Ta),h}),qo(n).rotate([-90,-90,45]).clipAngle(179.999)}function Tl(t){var e=Oa(t);function n(n,r){var i=e?Pa(n*e/2)/e:n/2;if(!r)return[2*i,-t];var o=2*va(i*Oa(r)),a=1/Pa(r);return[Oa(o)*a,r+(1-xa(o))*a-t]}return n.invert=function(n,r){if(_a(r+=t)<La)return[e?2*va(e*n/2)/e:n,0];var i,o=n*n+r*r,a=0,s=10;do{var u=Pa(a),l=1/xa(a),c=o-2*r*a+a*a;a-=i=(u*c+2*(a-r))/(2+c*l*l+2*(a-r)*u)}while(_a(i)>La&&--s>0);var h=n*(u=Pa(a)),f=Pa(_a(r)<_a(a+1/u)?.5*Ba(h):.5*Ua(h)+Ta/4)/Oa(a);return[e?2*va(e*f)/e:2*f,a]},n}var kl=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Rl(t,e){var n,r=Na(18,36*_a(e)/Ta),i=Ma(r),o=r-i,a=(n=kl[i])[0],s=n[1],u=(n=kl[++i])[0],l=n[1],c=(n=kl[Na(19,++i)])[0],h=n[1];return[t*(u+o*(c-a)/2+o*o*(c-2*u+a)/2),Ca(e)*(l+o*(h-s)/2+o*o*(h-2*l+s)/2)]}function Dl(t,e){var n=function(t){function e(e,n){var r=xa(n),i=(t-1)/(t-r*xa(e));return[i*r*Oa(e),i*Oa(n)]}return e.invert=function(e,n){var r=e*e+n*n,i=Va(r),o=(t-Va(1-r*(t+1)/(t-1)))/((t-1)/i+i/(t-1));return[ma(e*o,i*Va(1-o*o)),i?Ba(n*o/i):0]},e}(t);if(!e)return n;var r=xa(e),i=Oa(e);function o(e,o){var a=n(e,o),s=a[1],u=s*i/(t-1)+r;return[a[0]*r/u,s/u]}return o.invert=function(e,o){var a=(t-1)/(t-1-o*i);return n.invert(a*e,a*o*r)},o}kl.forEach((function(t){t[1]*=1.593415793900743})),Rl.invert=function(t,e){var n=90*e,r=Na(18,_a(n/5)),i=Ea(0,Ma(r));do{var o=kl[i][1],a=kl[i+1][1],s=kl[Na(19,i+2)][1],u=s-o,l=s-2*a+o,c=2*(_a(e)-a)/u,h=l/u,f=c*(1-h*c*(1-2*h*c));if(f>=0||1===i){n=(e>=0?5:-5)*(f+r);var p,d=50;do{f=(r=Na(18,_a(n)/5))-(i=Ma(r)),o=kl[i][1],a=kl[i+1][1],s=kl[Na(19,i+2)][1],n-=(p=Ca(e)*(a+f*(s-o)/2+f*f*(s-2*a+o)/2)-e)*qa}while(_a(p)>Aa&&--d>0);break}}while(--i>=0);var g=kl[i][0],y=kl[i+1][0],_=kl[Na(19,i+2)][0];return[t/(y+f*(_-g)/2+f*f*(_-2*y+g)/2),n*ja]};var Fl=-180,zl=-179.9999,Gl=179.9999,ql=-89.9999,jl=89.9999;function Bl(t){return t.length>0}function Ul(t){return Math.floor(1e4*t)/1e4}function Vl(t){return-90===t||90===t?[0,t]:[Fl,Ul(t)]}function Wl(t){var e=t[0],n=t[1],r=!1;return e<=zl?(e=Fl,r=!0):e>=Gl&&(e=180,r=!0),n<=ql?(n=-90,r=!0):n>=jl&&(n=90,r=!0),r?[e,n]:t}function Yl(t){return t.map(Wl)}function Xl(t,e,n){for(var r=0,i=t.length;r<i;++r){var o=t[r].slice();n.push({index:-1,polygon:e,ring:o});for(var a=0,s=o.length;a<s;++a){var u=o[a],l=u[0],c=u[1];if(l<=zl||l>=Gl||c<=ql||c>=jl){o[a]=Wl(u);for(var h=a+1;h<s;++h){var f=o[h],p=f[0],d=f[1];if(p>zl&&p<Gl&&d>ql&&d<jl)break}if(h===a+1)continue;if(a){var g={index:-1,polygon:e,ring:o.slice(0,a+1)};g.ring[g.ring.length-1]=Vl(c),n[n.length-1]=g}else n.pop();if(h>=s)break;n.push({index:-1,polygon:e,ring:o=o.slice(h-1)}),o[0]=Vl(o[0][1]),a=-1,s=o.length}}}}function $l(t){var e,n,r,i,o,a,s=t.length,u={},l={};for(e=0;e<s;++e)r=(n=t[e]).ring[0],o=n.ring[n.ring.length-1],r[0]!==o[0]||r[1]!==o[1]?(n.index=e,u[r]=l[o]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<s;++e)if(n=t[e]){if(r=n.ring[0],o=n.ring[n.ring.length-1],i=l[r],a=u[o],delete u[r],delete l[o],r[0]===o[0]&&r[1]===o[1]){n.polygon.push(n.ring);continue}i?(delete l[r],delete u[i.ring[0]],i.ring.pop(),t[i.index]=null,n={index:-1,polygon:i.polygon,ring:i.ring.concat(n.ring)},i===a?n.polygon.push(n.ring):(n.index=s++,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n))):a?(delete u[o],delete l[a.ring[a.ring.length-1]],n.ring.pop(),n={index:s++,polygon:a.polygon,ring:n.ring.concat(a.ring)},t[a.index]=null,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function Hl(t){var e={type:"Feature",geometry:Ql(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function Ql(t){if(null==t)return t;var e,n,r,i;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(Ql)};break;case"Point":e={type:"Point",coordinates:Wl(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:Yl(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(Yl)};break;case"Polygon":var o=[];Xl(t.coordinates,o,n=[]),$l(n),e={type:"Polygon",coordinates:o};break;case"MultiPolygon":n=[],r=-1,i=t.coordinates.length;for(var a=new Array(i);++r<i;)Xl(t.coordinates[r],a[r]=[],n);$l(n),e={type:"MultiPolygon",coordinates:a.filter(Bl)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function Jl(t,e){var n=Pa(e/2),r=Oa(Ra*n);return[t*(.74482-.34588*r*r),1.70711*n]}function Kl(t,e,n){var r=Ni(e,n),i=r(.5),o=Fr([-i[0],-i[1]])(e),a=r.distance/2,s=-Ba(Oa(o[1]*ja)/Oa(a)),u=[-i[0],-i[1],-(o[0]>0?Ta-s:s)*qa],l=qo(t(a)).rotate(u),c=Fr(u),h=l.center;return delete l.rotate,l.center=function(t){return arguments.length?h(c(t)):c.invert(h())},l.clipAngle(90)}function Zl(t){var e=xa(t);function n(t,n){var r=la(t,n);return r[0]*=e,r}return n.invert=function(t,n){return la.invert(t/e,n)},n}function tc(t,e){return Kl(Zl,t,e)}function ec(t){if(!(t*=2))return Ho;var e=-t/2,n=-e,r=t*t,i=Pa(n),o=.5/Oa(n);function a(i,o){var a=Ua(xa(o)*xa(i-e)),s=Ua(xa(o)*xa(i-n));return[((a*=a)-(s*=s))/(2*t),(o<0?-1:1)*Va(4*r*s-(r-a+s)*(r-a+s))/(2*t)]}return a.invert=function(t,r){var a,s,u=r*r,l=xa(Va(u+(a=t+e)*a)),c=xa(Va(u+(a=t+n)*a));return[ma(s=l-c,a=(l+c)*i),(r<0?-1:1)*Ua(Va(a*a+s*s)*o)]},a}function nc(t,e){return Kl(ec,t,e)}function rc(t,e){if(_a(e)<La)return[t,0];var n=_a(e/ka),r=Ba(n);if(_a(t)<La||_a(_a(e)-ka)<La)return[0,Ca(e)*Ta*Pa(r/2)];var i=xa(r),o=_a(Ta/t-t/Ta)/2,a=o*o,s=i/(n+i-1),u=s*(2/n-1),l=u*u,c=l+a,h=s-l,f=a+s;return[Ca(t)*Ta*(o*h+Va(a*h*h-c*(s*s-l)))/c,Ca(e)*Ta*(u*f-o*Va((a+1)*c-f*f))/c]}function ic(t,e){if(_a(e)<La)return[t,0];var n=_a(e/ka),r=Ba(n);if(_a(t)<La||_a(_a(e)-ka)<La)return[0,Ca(e)*Ta*Pa(r/2)];var i=xa(r),o=_a(Ta/t-t/Ta)/2,a=o*o,s=i*(Va(1+a)-o*i)/(1+a*n*n);return[Ca(t)*Ta*s,Ca(e)*Ta*Va(1-s*(2*o+s))]}function oc(t,e){if(_a(e)<La)return[t,0];var n=e/ka,r=Ba(n);if(_a(t)<La||_a(_a(e)-ka)<La)return[0,Ta*Pa(r/2)];var i=(Ta/t-t/Ta)/2,o=n/(1+xa(r));return[Ta*(Ca(t)*Va(i*i+1-o*o)-i),Ta*o]}function ac(t,e){if(!e)return[t,0];var n=_a(e);if(!t||n===ka)return[0,e];var r=n/ka,i=r*r,o=(8*r-i*(i+2)-5)/(2*i*(r-1)),a=o*o,s=r*o,u=i+a+2*s,l=r+3*o,c=t/ka,h=c+1/c,f=Ca(_a(t)-ka)*Va(h*h-4),p=f*f,d=(f*(u+a-1)+2*Va(u*(i+a*p-1)+(1-i)*(i*(l*l+4*a)+12*s*a+4*a*a)))/(4*u+p);return[Ca(t)*ka*d,Ca(e)*ka*Va(1+f*_a(d)-d*d)]}function sc(t,e,n,r){var i=Ta/3;t=Ea(t,La),e=Ea(e,La),t=Na(t,ka),e=Na(e,Ta-La),n=Ea(n,0),n=Na(n,99.999999);var o=(r=Ea(r,La))/100,a=Ua((n/100+1)*xa(i))/i,s=Oa(t)/Oa(a*ka),u=e/Ta,l=Va(o*Oa(t/2)/Oa(e/2));return function(t,e,n,r,i){function o(o,a){var s=n*Oa(r*a),u=Va(1-s*s),l=Va(2/(1+u*xa(o*=i)));return[t*u*l*Oa(o),e*s*l]}return o.invert=function(o,a){var s=o/t,u=a/e,l=Va(s*s+u*u),c=2*Ba(l/2);return[ma(o*Pa(c),t*l)/i,l&&Ba(a*Oa(c)/(e*n*l))/r]},o}(l/Va(u*s*a),1/(l*Va(u*s*a)),s,a,u)}function uc(){var t=65*ja,e=60*ja,n=20,r=200,i=jo(sc),o=i(t,e,n,r);return o.poleline=function(o){return arguments.length?i(t=+o*ja,e,n,r):t*qa},o.parallels=function(o){return arguments.length?i(t,e=+o*ja,n,r):e*qa},o.inflation=function(o){return arguments.length?i(t,e,n=+o,r):n},o.ratio=function(o){return arguments.length?i(t,e,n,r=+o):r},o.scale(163.775)}Jl.invert=function(t,e){var n=e/1.70711,r=Oa(Ra*n);return[t/(.74482-.34588*r*r),2*va(n)]},rc.invert=function(t,e){if(_a(e)<La)return[t,0];if(_a(t)<La)return[0,ka*Oa(2*va(e/Ta))];var n=(t/=Ta)*t,r=(e/=Ta)*e,i=n+r,o=i*i,a=-_a(e)*(1+i),s=a-2*r+n,u=-2*a+1+2*r+o,l=r/u+(2*s*s*s/(u*u*u)-9*a*s/(u*u))/27,c=(a-s*s/(3*u))/u,h=2*Va(-c/3),f=Ua(3*l/(c*h))/3;return[Ta*(i-1+Va(1+2*(n-r)+o))/(2*t),Ca(e)*Ta*(-h*xa(f+Ta/3)-s/(3*u))]},ic.invert=function(t,e){if(!t)return[0,ka*Oa(2*va(e/Ta))];var n=_a(t/Ta),r=(1-n*n-(e/=Ta)*e)/(2*n),i=Va(r*r+1);return[Ca(t)*Ta*(i-r),Ca(e)*ka*Oa(2*ma(Va((1-2*r*n)*(r+i)-n),Va(i+r+n)))]},oc.invert=function(t,e){if(!e)return[t,0];var n=e/Ta,r=(Ta*Ta*(1-n*n)-t*t)/(2*Ta*t);return[t?Ta*(Ca(t)*Va(r*r+1)-r):0,ka*Oa(2*va(n))]},ac.invert=function(t,e){var n;if(!t||!e)return[t,e];var r=Ca(e);e=_a(e)/Ta;var i=Ca(t)*t/ka,o=(i*i-1+4*e*e)/_a(i),a=o*o,s=e*(2-(e>.5?Na(e,_a(t)):0)),u=t*t+e*e,l=50;do{var c=s*s,h=(8*s-c*(c+2)-5)/(2*c*(s-1)),f=(3*s-c*s-10)/(2*c*s),p=h*h,d=s*h,g=s+h,y=g*g,_=s+3*h,v=-2*g*(4*d*p+(1-4*c+3*c*c)*(1+f)+p*(14*c-6-a+(8*c-8-2*a)*f)+d*(12*c-8+(10*c-10-a)*f)),m=Va(y*(c+p*a-1)+(1-c)*(c*(_*_+4*p)+p*(12*d+4*p)));s-=n=(o*(y+p-1)+2*m-i*(4*y+a))/(o*(2*h*f+2*g*(1+f))+v/m-8*g*(o*(-1+p+y)+2*m)*(1+f)/(a+4*y))}while(n*u*u>La&&--l>0);return[Ca(t)*(Va(o*o+4)+o)*Ta/4,r*ka*s]};var lc=4*Ta+3*Va(3),cc=2*Va(2*Ta*Va(3)/lc),hc=ss(cc*Va(3)/Ta,cc,lc/6);function fc(t,e){return[t*Va(1-3*e*e/(Ta*Ta)),e]}function pc(t,e){var n=xa(e),r=xa(t)*n,i=1-r,o=xa(t=ma(Oa(t)*n,-Oa(e))),a=Oa(t);return[a*(n=Va(1-r*r))-o*i,-o*n-a*i]}function dc(t,e){var n=$a(t,e);return[(n[0]+t/ka)/2,(n[1]+e)/2]}fc.invert=function(t,e){return[t/Va(1-3*e*e/(Ta*Ta)),e]},pc.invert=function(t,e){var n=(t*t+e*e)/-2,r=Va(-n*(2+n)),i=e*n+t*r,o=t*n-e*r,a=Va(o*o+i*i);return[ma(r*i,a*(1+n)),a?-Ba(r*o/a):0]},dc.invert=function(t,e){var n=t,r=e,i=25;do{var o,a=xa(r),s=Oa(r),u=Oa(2*r),l=s*s,c=a*a,h=Oa(n),f=xa(n/2),p=Oa(n/2),d=p*p,g=1-c*f*f,y=g?Ua(a*f)*Va(o=1/g):o=0,_=.5*(2*y*a*p+n/ka)-t,v=.5*(y*s+r)-e,m=.5*o*(c*d+y*a*f*l)+.5/ka,x=o*(h*u/4-y*s*p),b=.125*o*(u*p-y*s*c*h),M=.5*o*(l*f+y*d*a)+.5,w=x*b-M*m,E=(v*x-_*M)/w,N=(_*b-v*m)/w;n-=E,r-=N}while((_a(E)>La||_a(N)>La)&&--i>0);return[n,r]};var gc=Object.freeze({__proto__:null,geoAiry:function(){var t=ka,e=jo(Xa),n=e(t);return n.radius=function(n){return arguments.length?e(t=n*ja):t*qa},n.scale(179.976).clipAngle(147)},geoAiryRaw:Xa,geoAitoff:function(){return qo($a).scale(152.63)},geoAitoffRaw:$a,geoArmadillo:function(){var t=20*ja,e=t>=0?1:-1,n=Pa(e*t),r=jo(Ha),i=r(t),o=i.stream;return i.parallel=function(i){return arguments.length?(n=Pa((e=(t=i*ja)>=0?1:-1)*t),r(t)):t*qa},i.stream=function(r){var a=i.rotate(),s=o(r),u=(i.rotate([0,0]),o(r)),l=i.precision();return i.rotate(a),s.sphere=function(){u.polygonStart(),u.lineStart();for(var r=-180*e;e*r<180;r+=90*e)u.point(r,90*e);if(t)for(;e*(r-=3*e*l)>=-180;)u.point(r,e*-ma(xa(r*ja/2),n)*qa);u.lineEnd(),u.polygonEnd()},s},i.scale(218.695).center([0,28.0974])},geoArmadilloRaw:Ha,geoAugust:function(){return qo(Qa).scale(66.1603)},geoAugustRaw:Qa,geoBaker:function(){return qo(Za).scale(112.314)},geoBakerRaw:Za,geoBerghaus:function(){var t=5,e=jo(ts),n=e(t),r=n.stream,i=.01,o=-xa(i*ja),a=Oa(i*ja);return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var s=n.rotate(),u=r(e),l=(n.rotate([0,0]),r(e));return n.rotate(s),u.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,n=360/t,r=2*Ta/t,s=90-180/t,u=ka;e<t;++e,s-=n,u-=r)l.point(ma(a*xa(u),o)*qa,Ba(a*Oa(u))*qa),s<-90?(l.point(-90,-180-s-i),l.point(-90,-180-s+i)):(l.point(90,s+i),l.point(90,s-i));l.lineEnd(),l.polygonEnd()},u},n.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},geoBerghausRaw:ts,geoBertin1953:function(){return qo(os()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},geoBertin1953Raw:os,geoBoggs:function(){return qo(hs).scale(160.857)},geoBoggsRaw:hs,geoBonne:function(){return fs(ds).scale(123.082).center([0,26.1441]).parallel(45)},geoBonneRaw:ds,geoBottomley:function(){var t=.5,e=jo(gs),n=e(t);return n.fraction=function(n){return arguments.length?e(t=+n):t},n.scale(158.837)},geoBottomleyRaw:gs,geoBromley:function(){return qo(ys).scale(152.63)},geoBromleyRaw:ys,geoChamberlin:Ms,geoChamberlinRaw:xs,geoChamberlinAfrica:function(){return Ms([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},geoCollignon:function(){return qo(ws).scale(95.6464).center([0,30])},geoCollignonRaw:ws,geoCraig:function(){return fs(Es).scale(249.828).clipAngle(90)},geoCraigRaw:Es,geoCraster:function(){return qo(Ss).scale(156.19)},geoCrasterRaw:Ss,geoCylindricalEqualArea:function(){return fs(Is).parallel(38.58).scale(195.044)},geoCylindricalEqualAreaRaw:Is,geoCylindricalStereographic:function(){return fs(Cs).scale(124.75)},geoCylindricalStereographicRaw:Cs,geoEckert1:function(){return qo(Os).scale(165.664)},geoEckert1Raw:Os,geoEckert2:function(){return qo(Ps).scale(165.664)},geoEckert2Raw:Ps,geoEckert3:function(){return qo(Ls).scale(180.739)},geoEckert3Raw:Ls,geoEckert4:function(){return qo(As).scale(180.739)},geoEckert4Raw:As,geoEckert5:function(){return qo(Ts).scale(173.044)},geoEckert5Raw:Ts,geoEckert6:function(){return qo(ks).scale(173.044)},geoEckert6Raw:ks,geoEisenlohr:function(){return qo(Ds).scale(62.5271)},geoEisenlohrRaw:Ds,geoFahey:function(){return qo(zs).scale(137.152)},geoFaheyRaw:zs,geoFoucaut:function(){return qo(Gs).scale(135.264)},geoFoucautRaw:Gs,geoFoucautSinusoidal:function(){var t=.5,e=jo(qs),n=e(t);return n.alpha=function(n){return arguments.length?e(t=+n):t},n.scale(168.725)},geoFoucautSinusoidalRaw:qs,geoGilbert:function(t){null==t&&(t=pa);var e=t(),n=ea().scale(qa).precision(0).clipAngle(null).translate([0,0]);function r(t){return e(js(t))}function i(t){r[t]=function(){return arguments.length?(e[t].apply(e,arguments),r):e[t]()}}return e.invert&&(r.invert=function(t){return Bs(e.invert(t))}),r.stream=function(t){var r=e.stream(t),i=n.stream({point:function(t,e){r.point(t/2,Ba(Pa(-e/2*ja))*qa)},lineStart:function(){r.lineStart()},lineEnd:function(){r.lineEnd()},polygonStart:function(){r.polygonStart()},polygonEnd:function(){r.polygonEnd()}});return i.sphere=r.sphere,i},r.rotate=function(t){return arguments.length?(n.rotate(t),r):n.rotate()},r.center=function(t){return arguments.length?(e.center(js(t)),r):Bs(e.center())},i("angle"),i("clipAngle"),i("clipExtent"),i("fitExtent"),i("fitHeight"),i("fitSize"),i("fitWidth"),i("scale"),i("translate"),i("precision"),r.scale(249.5)},geoGingery:function(){var t=6,e=30*ja,n=xa(e),r=Oa(e),i=jo(Us),o=i(e,t),a=o.stream,s=-xa(.01*ja),u=Oa(.01*ja);return o.radius=function(o){return arguments.length?(n=xa(e=o*ja),r=Oa(e),i(e,t)):e*qa},o.lobes=function(n){return arguments.length?i(e,t=+n):t},o.stream=function(e){var i=o.rotate(),l=a(e),c=(o.rotate([0,0]),a(e));return o.rotate(i),l.sphere=function(){c.polygonStart(),c.lineStart();for(var e=0,i=2*Ta/t,o=0;e<t;++e,o-=i)c.point(ma(u*xa(o),s)*qa,Ba(u*Oa(o))*qa),c.point(ma(r*xa(o-i/2),n)*qa,Ba(r*Oa(o-i/2))*qa);c.lineEnd(),c.polygonEnd()},l},o.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},geoGingeryRaw:Us,geoGinzburg4:function(){return qo(Xs).scale(149.995)},geoGinzburg4Raw:Xs,geoGinzburg5:function(){return qo($s).scale(153.93)},geoGinzburg5Raw:$s,geoGinzburg6:function(){return qo(Hs).scale(130.945)},geoGinzburg6Raw:Hs,geoGinzburg8:function(){return qo(Qs).scale(131.747)},geoGinzburg8Raw:Qs,geoGinzburg9:function(){return qo(Js).scale(131.087)},geoGinzburg9Raw:Js,geoGringorten:function(){return qo(Ks(Zs)).scale(239.75)},geoGringortenRaw:Zs,geoGuyou:function(){return qo(Ks(nu)).scale(151.496)},geoGuyouRaw:nu,geoHammer:function(){var t=2,e=jo(es),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n.scale(169.529)},geoHammerRaw:es,geoHammerRetroazimuthal:function(){var t=0,e=jo(ru),n=e(t),r=n.rotate,i=n.stream,o=qr();return n.parallel=function(r){if(!arguments.length)return t*qa;var i=n.rotate();return e(t=r*ja).rotate(i)},n.rotate=function(e){return arguments.length?(r.call(n,[e[0],e[1]-t*qa]),o.center([-e[0],-e[1]]),n):((e=r.call(n))[1]+=t*qa,e)},n.stream=function(t){return(t=i(t)).sphere=function(){t.polygonStart();var e,n=o.radius(89.99)().coordinates[0],r=n.length-1,i=-1;for(t.lineStart();++i<r;)t.point((e=n[i])[0],e[1]);for(t.lineEnd(),r=(n=o.radius(90.01)().coordinates[0]).length-1,t.lineStart();--i>=0;)t.point((e=n[i])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},n.scale(79.4187).parallel(45).clipAngle(179.999)},geoHammerRetroazimuthalRaw:ru,geoHealpix:function(){var t=4,e=jo(su),n=e(t),r=n.stream;return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var i=n.rotate(),o=r(e),a=(n.rotate([0,0]),r(e));return n.rotate(i),o.sphere=function(){fn(function(t){var e=[].concat(Ne(-180,180+t/2,t).map(uu),Ne(180,-180-t/2,-t).map(lu));return{type:"Polygon",coordinates:[180===t?e.map(cu):e]}}(180/t),a)},o},n.scale(239.75)},geoHealpixRaw:su,geoHill:function(){var t=1,e=jo(hu),n=e(t);return n.ratio=function(n){return arguments.length?e(t=+n):t},n.scale(167.774).center([0,18.67])},geoHillRaw:hu,geoHomolosine:function(){return qo(gu).scale(152.63)},geoHomolosineRaw:gu,geoHufnagel:function(){var t=1,e=0,n=45*ja,r=2,i=jo(yu),o=i(t,e,n,r);return o.a=function(o){return arguments.length?i(t=+o,e,n,r):t},o.b=function(o){return arguments.length?i(t,e=+o,n,r):e},o.psiMax=function(o){return arguments.length?i(t,e,n=+o*ja,r):n*qa},o.ratio=function(o){return arguments.length?i(t,e,n,r=+o):r},o.scale(180.739)},geoHufnagelRaw:yu,geoHyperelliptical:function(){var t=0,e=2.5,n=1.183136,r=jo(mu),i=r(t,e,n);return i.alpha=function(i){return arguments.length?r(t=+i,e,n):t},i.k=function(i){return arguments.length?r(t,e=+i,n):e},i.gamma=function(i){return arguments.length?r(t,e,n=+i):n},i.scale(152.63)},geoHyperellipticalRaw:mu,geoInterrupt:wu,geoInterruptedBoggs:function(){return wu(hs,Eu).scale(160.857)},geoInterruptedHomolosine:function(){return wu(gu,Nu).scale(152.63)},geoInterruptedMollweide:function(){return wu(us,Su).scale(169.529)},geoInterruptedMollweideHemispheres:function(){return wu(us,Iu).scale(169.529).rotate([20,0])},geoInterruptedSinuMollweide:function(){return wu(du,Cu,is).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},geoInterruptedSinusoidal:function(){return wu(ps,Ou).scale(152.63).rotate([-20,0])},geoKavrayskiy7:function(){return qo(Pu).scale(158.837)},geoKavrayskiy7Raw:Pu,geoLagrange:function(){var t=.5,e=jo(Lu),n=e(t);return n.spacing=function(n){return arguments.length?e(t=+n):t},n.scale(124.75)},geoLagrangeRaw:Lu,geoLarrivee:function(){return qo(Tu).scale(97.2672)},geoLarriveeRaw:Tu,geoLaskowski:function(){return qo(ku).scale(139.98)},geoLaskowskiRaw:ku,geoLittrow:function(){return qo(Ru).scale(144.049).clipAngle(89.999)},geoLittrowRaw:Ru,geoLoximuthal:function(){return fs(Du).parallel(40).scale(158.837)},geoLoximuthalRaw:Du,geoMiller:function(){return qo(Fu).scale(108.318)},geoMillerRaw:Fu,geoModifiedStereographic:Vu,geoModifiedStereographicRaw:zu,geoModifiedStereographicAlaska:function(){return Vu(Gu,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},geoModifiedStereographicGs48:function(){return Vu(qu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},geoModifiedStereographicGs50:function(){return Vu(ju,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},geoModifiedStereographicMiller:function(){return Vu(Bu,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},geoModifiedStereographicLee:function(){return Vu(Uu,[165,10]).scale(250).clipAngle(130).center([-165,-10])},geoMollweide:function(){return qo(us).scale(169.529)},geoMollweideRaw:us,geoMtFlatPolarParabolic:function(){return qo(Xu).scale(164.859)},geoMtFlatPolarParabolicRaw:Xu,geoMtFlatPolarQuartic:function(){return qo($u).scale(188.209)},geoMtFlatPolarQuarticRaw:$u,geoMtFlatPolarSinusoidal:function(){return qo(Hu).scale(166.518)},geoMtFlatPolarSinusoidalRaw:Hu,geoNaturalEarth2:function(){return qo(Qu).scale(175.295)},geoNaturalEarth2Raw:Qu,geoNellHammer:function(){return qo(Ju).scale(152.63)},geoNellHammerRaw:Ju,geoInterruptedQuarticAuthalic:function(){return wu(es(1/0),Ku).rotate([20,0]).scale(152.63)},geoNicolosi:function(){return qo(Zu).scale(127.267)},geoNicolosiRaw:Zu,geoPatterson:function(){return qo(ol).scale(139.319)},geoPattersonRaw:ol,geoPolyconic:function(){return qo(al).scale(103.74)},geoPolyconicRaw:al,geoPolyhedral:hl,geoPolyhedralButterfly:function(t){t=t||function(t){var e=Or({type:"MultiPoint",coordinates:t});return ca().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=yl.map((function(e){return{face:e,project:t(e)}}));return[-1,0,0,1,0,1,4,5].forEach((function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])})),hl(e[0],(function(t,n){return e[t<-Ta/2?n<0?6:4:t<0?n<0?2:0:t<Ta/2?n<0?3:1:n<0?7:5]})).angle(-30).scale(101.858).center([0,45])},geoPolyhedralCollignon:function(t){t=t||function(t){var e=Or({type:"MultiPoint",coordinates:t});return qo(vl).translate([0,0]).scale(1).rotate(e[1]>0?[-e[0],0]:[180-e[0],180])};var e=yl.map((function(e){return{face:e,project:t(e)}}));return[-1,0,0,1,0,1,4,5].forEach((function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])})),hl(e[0],(function(t,n){return e[t<-Ta/2?n<0?6:4:t<0?n<0?2:0:t<Ta/2?n<0?3:1:n<0?7:5]})).angle(-30).scale(121.906).center([0,48.5904])},geoPolyhedralWaterman:function(t){t=t||function(t){var e=6===t.length?Or({type:"MultiPoint",coordinates:t}):t[0];return ca().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=yl.map((function(t){for(var e,n=t.map(Ml),r=n.length,i=n[r-1],o=[],a=0;a<r;++a)e=n[a],o.push(bl([.9486832980505138*i[0]+.31622776601683794*e[0],.9486832980505138*i[1]+.31622776601683794*e[1],.9486832980505138*i[2]+.31622776601683794*e[2]]),bl([.9486832980505138*e[0]+.31622776601683794*i[0],.9486832980505138*e[1]+.31622776601683794*i[1],.9486832980505138*e[2]+.31622776601683794*i[2]])),i=e;return o})),n=[],r=[-1,0,0,1,0,1,4,5];e.forEach((function(t,i){for(var o=yl[i],a=o.length,s=n[i]=[],u=0;u<a;++u)e.push([o[u],t[(2*u+2)%(2*a)],t[(2*u+1)%(2*a)]]),r.push(i),s.push(xl(Ml(t[(2*u+2)%(2*a)]),Ml(t[(2*u+1)%(2*a)])))}));var i=e.map((function(e){return{project:t(e),face:e}}));return r.forEach((function(t,e){var n=i[t];n&&(n.children||(n.children=[])).push(i[e])})),hl(i[0],(function(t,e){var r=xa(e),o=[r*xa(t),r*Oa(t),Oa(e)],a=t<-Ta/2?e<0?6:4:t<0?e<0?2:0:t<Ta/2?e<0?3:1:e<0?7:5,s=n[a];return i[ml(s[0],o)<0?8+3*a:ml(s[1],o)<0?8+3*a+1:ml(s[2],o)<0?8+3*a+2:a]})).angle(-30).scale(110.625).center([0,45])},geoProject:function(t,e){var n,r=e.stream;if(!r)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=Nl;break;case"FeatureCollection":n=El;break;default:n=Sl}return n(t,r)},geoGringortenQuincuncial:function(){return Al(Zs).scale(176.423)},geoPeirceQuincuncial:function(){return Al(nu).scale(111.48)},geoQuantize:function(t,e){if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");function n(t){var n=t.length,r=2,i=new Array(n);for(i[0]=+t[0].toFixed(e),i[1]=+t[1].toFixed(e);r<n;)i[r]=t[r],++r;return i}function r(t){return t.map(n)}function i(t){for(var e=n(t[0]),r=[e],i=1;i<t.length;i++){var o=n(t[i]);(o.length>2||o[0]!=e[0]||o[1]!=e[1])&&(r.push(o),e=o)}return 1===r.length&&t.length>1&&r.push(n(t[t.length-1])),r}function o(t){return t.map(i)}function a(t){if(null==t)return t;var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(a)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":e={type:t.type,coordinates:r(t.coordinates)};break;case"LineString":e={type:t.type,coordinates:i(t.coordinates)};break;case"MultiLineString":case"Polygon":e={type:t.type,coordinates:o(t.coordinates)};break;case"MultiPolygon":e={type:"MultiPolygon",coordinates:t.coordinates.map(o)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function s(t){var e={type:"Feature",properties:t.properties,geometry:a(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),e}if(null!=t)switch(t.type){case"Feature":return s(t);case"FeatureCollection":var u={type:"FeatureCollection",features:t.features.map(s)};return null!=t.bbox&&(u.bbox=t.bbox),u;default:return a(t)}return t},geoQuincuncial:Al,geoRectangularPolyconic:function(){return fs(Tl).scale(131.215)},geoRectangularPolyconicRaw:Tl,geoRobinson:function(){return qo(Rl).scale(152.63)},geoRobinsonRaw:Rl,geoSatellite:function(){var t=2,e=0,n=jo(Dl),r=n(t,e);return r.distance=function(r){return arguments.length?n(t=+r,e):t},r.tilt=function(r){return arguments.length?n(t,e=r*ja):e*qa},r.scale(432.147).clipAngle(Ua(1/t)*qa-1e-6)},geoSatelliteRaw:Dl,geoSinuMollweide:function(){return qo(du).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},geoSinuMollweideRaw:du,geoSinusoidal:function(){return qo(ps).scale(152.63)},geoSinusoidalRaw:ps,geoStitch:function(t){if(null==t)return t;switch(t.type){case"Feature":return Hl(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(Hl)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return Ql(t)}},geoTimes:function(){return qo(Jl).scale(146.153)},geoTimesRaw:Jl,geoTwoPointAzimuthal:tc,geoTwoPointAzimuthalRaw:Zl,geoTwoPointAzimuthalUsa:function(){return tc([-158,21.5],[-77,39]).clipAngle(60).scale(400)},geoTwoPointEquidistant:nc,geoTwoPointEquidistantRaw:ec,geoTwoPointEquidistantUsa:function(){return nc([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},geoVanDerGrinten:function(){return qo(rc).scale(79.4183)},geoVanDerGrintenRaw:rc,geoVanDerGrinten2:function(){return qo(ic).scale(79.4183)},geoVanDerGrinten2Raw:ic,geoVanDerGrinten3:function(){return qo(oc).scale(79.4183)},geoVanDerGrinten3Raw:oc,geoVanDerGrinten4:function(){return qo(ac).scale(127.16)},geoVanDerGrinten4Raw:ac,geoWagner:uc,geoWagner7:function(){return uc().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},geoWagnerRaw:sc,geoWagner4:function(){return qo(hc).scale(176.84)},geoWagner4Raw:hc,geoWagner6:function(){return qo(fc).scale(152.63)},geoWagner6Raw:fc,geoWiechel:function(){return qo(pc).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},geoWiechelRaw:pc,geoWinkel3:function(){return qo(dc).scale(158.837)},geoWinkel3Raw:dc}),yc=Object.prototype.hasOwnProperty;function _c(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,l=0;l<t;++l)a[l]=i;function c(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l]=o;if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o}function h(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)throw new Error("full hashmap");c=a[l=l+1&u]}return a[l]=r,s[l]=o,o}function f(r,o){for(var l=e(r)&u,c=a[l],h=0;c!=i;){if(n(c,r))return s[l];if(++h>=t)break;c=a[l=l+1&u]}return o}function p(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}return{set:c,maybeSet:h,get:f,keys:p}}function vc(t,e){return t[0]===e[0]&&t[1]===e[1]}var mc=new ArrayBuffer(16),xc=new Float64Array(mc),bc=new Uint32Array(mc);function Mc(t){xc[0]=t[0],xc[1]=t[1];var e=bc[0]^bc[1];return 2147483647&(e=e<<5^e>>7^bc[2]^bc[3])}function wc(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=function(){for(var t=_c(1.4*o.length,b,M,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)l[e]=c[e]=h[e]=-1;for(e=0,n=a.length;e<n;++e){var d=a[e],g=d[0],y=d[1];for(r=u[g],i=u[++g],++p,f[r]=1;++g<=y;)x(e,r,r=i,i=u[g]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=s.length;e<n;++e){var _=s[e],v=_[0]+1,m=_[1];for(x(e,u[m-1],r=u[v-1],i=u[v]);++v<=m;)x(e,r,r=i,i=u[v])}function x(t,e,n,r){if(l[n]!==t){l[n]=t;var i=c[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else c[n]=e,h[n]=r}}function b(t){return Mc(o[t])}function M(t,e){return vc(o[t],o[e])}l=c=h=null;var w,E=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;function u(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0}function l(r){for(var s=e(r)&a,u=o[s],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[s=s+1&a]}return!1}function c(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:u,has:l,values:c}}(1.4*p,Mc,vc);for(e=0,n=o.length;e<n;++e)f[w=u[e]]&&E.add(o[w]);return E}function Ec(t,e,n,r){Nc(t,e,n),Nc(t,e,e+r),Nc(t,e+r,n)}function Nc(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Sc(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Ic:"Feature"===n.type?Cc:Oc)(n);return r}function Ic(t){var e={type:"GeometryCollection",geometries:t.features.map(Cc)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Cc(t){var e,n=Oc(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Oc(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Oc)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Pc(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Lc(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}var Ac=Object.freeze({__proto__:null,topology:function(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&yc.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function s(t){var o=t[0],a=t[1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>i&&(i=a)}function u(t){t.forEach(s)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=Sc(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=o-r?(n-1)/(o-r):1,u=a-i?(n-1)/(a-i):1;function l(t){return[Math.round((t[0]-r)*s),Math.round((t[1]-i)*u)]}function c(t,e){for(var n,o,a,l,c,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)n=t[h],l=Math.round((n[0]-r)*s),c=Math.round((n[1]-i)*u),l===o&&c===a||(d[f++]=[o=l,a=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&yc.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var y in t)d(t[y]);return{scale:[1/s,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=a.length+s.length;for(delete t.lines,delete t.rings,r=0,i=a.length;r<i;++r)for(e=a[r];e=e.next;)++u;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++u;var l=_c(2*u*1.4,Mc,vc),c=t.arcs=[];for(r=0,i=a.length;r<i;++r){e=a[r];do{h(e)}while(e=e.next)}for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)do{h(n)}while(n=n.next);else f(n);function h(t){var e,n,r,i,a,s,u,h;if(r=l.get(e=o[t[0]]))for(u=0,h=r.length;u<h;++u)if(p(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(a=l.get(n=o[t[1]]))for(u=0,h=a.length;u<h;++u)if(d(s=a[u],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):l.set(e,[t]),a?a.push(t):l.set(n,[t]),c.push(t)}function f(t){var e,n,r,i,a;if(n=l.get(o[t[0]]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+_(t)]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),c.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!vc(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!vc(o[n],o[a]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var a=_(t),s=_(e),u=0;u<i;++u)if(!vc(o[n+(u+a)%i],o[r+(u+s)%i]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],s=i-n;if(s!==a-r)return!1;for(var u=_(t),l=s-_(e),c=0;c<s;++c)if(!vc(o[n+(c+u)%s],o[a-(c+l)%s]))return!1;return!0}function _(t){for(var e=t[0],n=t[1],r=e,i=r,a=o[r];++r<n;){var s=o[r];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(i=r,a=s)}return i-e}return t}(function(t){var e,n,r,i=wc(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Ec(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&yc.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function s(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var a={0:e-o+1,1:e};return n.push(a),a}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var a={0:e-o+1,1:e};return r.push(a),a}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,a=_c(1.4*i.arcs.length,Pc,Lc);function s(t){t&&yc.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return a.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var n=a.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)s(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,l=o[0],c=l[0],h=l[1];++a<u;)r=(l=o[a])[0],i=l[1],r===c&&i===h||(o[s++]=[r-c,i-h],c=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(i.arcs)),i}});function Tc(t){return t}function kc(t){if(null==t)return Tc;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+a;u<l;)c[u]=t[u],++u;return c}}function Rc(t){var e,n=kc(t.transform),r=1/0,i=r,o=-r,a=-r;function s(t){(t=n(t))[0]<r&&(r=t[0]),t[0]>o&&(o=t[0]),t[1]<i&&(i=t[1]),t[1]>a&&(a=t[1])}function u(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"Point":s(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(s)}}for(e in t.arcs.forEach((function(t){for(var e,s=-1,u=t.length;++s<u;)(e=n(t[s],s))[0]<r&&(r=e[0]),e[0]>o&&(o=e[0]),e[1]<i&&(i=e[1]),e[1]>a&&(a=e[1])})),t.objects)u(t.objects[e]);return[r,i,o,a]}function Dc(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,o=Fc(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function Fc(t,e){var n=kc(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function zc(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function Gc(t,e,n){var r,i,o;if(arguments.length>1)r=qc(t,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:zc(t,r)}}function qc(t,e,n){var r,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:r})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":u(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(u)}(e.arcs)}}(e),o.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}function jc(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Fc(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=zc(t,i)).length)>1)for(var o,s,u=1,l=a(i[0]);u<r;++u)(o=a(i[u]))>l&&(s=i[0],i[0]=i[u],i[u]=s,l=o);return i})).filter((function(t){return t.length>0}))}}function Bc(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function Uc(t){if(null==t)return Tc;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,l=t.length,c=new Array(l),h=Math.round((t[0]-o)/r),f=Math.round((t[1]-a)/i);for(c[0]=h-e,e=h,c[1]=f-n,n=f;u<l;)c[u]=t[u],++u;return c}}var Vc=Object.freeze({__proto__:null,bbox:Rc,feature:function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Dc(t,e)}))}:Dc(t,e)},mesh:function(t){return Fc(t,Gc.apply(this,arguments))},meshArcs:Gc,merge:function(t){return Fc(t,jc.apply(this,arguments))},mergeArcs:jc,neighbors:function(t){var e={},n=t.map((function(){return[]}));function r(t,n){t.forEach((function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]}))}function i(t,e){t.forEach((function(t){r(t,e)}))}var o={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach((function(t){i(t,e)}))}};for(var a in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in o&&o[e.type](e.arcs,n)})),e)for(var s=e[a],u=s.length,l=0;l<u;++l)for(var c=l+1;c<u;++c){var h,f=s[l],p=s[c];(h=n[f])[a=Bc(h,p)]!==p&&h.splice(a,0,p),(h=n[p])[a=Bc(h,f)]!==f&&h.splice(a,0,f)}return n},quantize:function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)s=t.bbox;else{if(!((n=Math.floor(e))>=2))throw new Error("n must be 2");var n,r=(s=t.bbox||Rc(t))[0],i=s[1],o=s[2],a=s[3];e={scale:[o-r?(o-r)/(n-1):1,a-i?(a-i)/(n-1):1],translate:[r,i]}}var s,u,l=Uc(e),c=t.objects,h={};function f(t){return l(t)}function p(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(p)};break;case"Point":e={type:"Point",coordinates:f(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(f)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(u in c)h[u]=p(c[u]);return{type:"Topology",bbox:s,transform:e,objects:h,arcs:t.arcs.map((function(t){var e,n=0,r=1,i=t.length,o=new Array(i);for(o[0]=l(t[0],0);++n<i;)((e=l(t[n],n))[0]||e[1])&&(o[r++]=e);return 1===r&&(o[r++]=[0,0]),o.length=r,o}))}},transform:kc,untransform:Uc});const Wc=Object.assign({},Ac,Vc);function Yc(t){return"Topology"==t.type?Wc.feature(t,Object.keys(t.objects)[0]):t}const Xc=Object.assign({},bt,ya,gc);function $c(t){let e=["z","l","p"],n=t.features.map((t=>t.geometry.type));n=Array.from(new Set(n));let r=(-1!==n.indexOf("Polygon")||-1!==n.indexOf("MultiPolygon")?e[0]:"")+(-1!==n.indexOf("LineString")||-1!==n.indexOf("MultiLineString")?e[1]:"")+(-1!==n.indexOf("Point")||-1!==n.indexOf("MultiPoint")?e[2]:"");return 1==r.length?r:"composite"}Object.assign({},bt,ya,gc);var Hc=6378137,Qc=.0066943799901413165,Jc=484813681109536e-20,Kc=Math.PI/2,Zc=1e-10,th=.017453292519943295,eh=57.29577951308232,nh=Math.PI/4,rh=2*Math.PI,ih=3.14159265359,oh={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},ah={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},sh=/[\s_\-\/\(\)]/g;function uh(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(sh,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(sh,"")===i)return t[n]}function lh(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*th},lat_1:function(t){i.lat1=t*th},lat_2:function(t){i.lat2=t*th},lat_ts:function(t){i.lat_ts=t*th},lon_0:function(t){i.long0=t*th},lon_1:function(t){i.long1=t*th},lon_2:function(t){i.long2=t*th},alpha:function(t){i.alpha=parseFloat(t)*th},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*th},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=uh(ah,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*th},pm:function(t){var e=uh(oh,t);i.from_greenwich=(e||parseFloat(t))*th},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)n=o[e],e in a?"function"==typeof(r=a[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}var ch=/\s/,hh=/[A-Za-z]/,fh=/[A-Za-z84_]/,ph=/[,\]]/,dh=/[\d\.E\-\+]/;function gh(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function yh(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return _h(e,t),t}),r);e&&(t[e]=i)}function _h(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void _h(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&_h(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&_h(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void yh(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return _h(t,e[n]);return yh(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}gh.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;ch.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},gh.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(ph.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},gh.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},gh.prototype.number=function(t){if(!dh.test(t)){if(ph.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},gh.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},gh.prototype.keyword=function(t){if(fh.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!ph.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},gh.prototype.neutral=function(t){if(hh.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(dh.test(t))return this.word=t,void(this.state=3);if(!ph.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},gh.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function vh(t){return.017453292519943295*t}function mh(t){var e=new gh(t).output(),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return _h(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",vh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",vh],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",vh],["lat0","latitude_of_origin",vh],["lat0","standard_parallel_1",vh],["lat1","standard_parallel_1",vh],["lat2","standard_parallel_2",vh],["azimuth","Azimuth"],["alpha","azimuth",vh],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=vh(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function xh(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?xh[t]=lh(arguments[1]):xh[t]=mh(arguments[1]):xh[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?xh.apply(e,t):xh(t)}));if("string"==typeof t){if(t in xh)return xh[t]}else"EPSG"in t?xh["EPSG:"+t.EPSG]=t:"ESRI"in t?xh["ESRI:"+t.ESRI]=t:"IAU2000"in t?xh["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(xh);var bh=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Mh=["3857","900913","3785","102113"];function wh(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in xh}(t))return xh[t];if(function(t){return bh.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=mh(t);if(function(t){var e=uh(t,"authority");if(e){var n=uh(e,"epsg");return n&&Mh.indexOf(n)>-1}}(e))return xh["EPSG:3857"];var n=function(t){var e=uh(t,"extension");if(e)return uh(e,"proj4")}(e);return n?lh(n):e}return function(t){return"+"===t[0]}(t)?lh(t):void 0}function Eh(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function Nh(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function Sh(t){return t<0?-1:1}function Ih(t){return Math.abs(t)<=ih?t:t-Sh(t)*rh}function Ch(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Kc-e))/r}function Oh(t,e){for(var n,r,i=.5*t,o=Kc-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=Kc-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999}var Ph={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Nh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*eh>90&&i*eh<-90&&r*eh>180&&r*eh<-180)return null;if(Math.abs(Math.abs(i)-Kc)<=Zc)return null;if(this.sphere)e=this.x0+this.a*this.k0*Ih(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(nh+.5*i));else{var o=Math.sin(i),a=Ch(this.e,i,o);e=this.x0+this.a*this.k0*Ih(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=Kc-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=Oh(this.e,o)))return null}return e=Ih(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function Lh(t){return t}var Ah=[Ph,{init:function(){},forward:Lh,inverse:Lh,names:["longlat","identity"]}],Th={},kh=[];function Rh(t,e){var n=kh.length;return t.names?(kh[n]=t,t.names.forEach((function(t){Th[t.toLowerCase()]=n})),this):(console.log(e),!0)}var Dh={start:function(){Ah.forEach(Rh)},add:Rh,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Th[e]&&kh[Th[e]]?kh[Th[e]]:void 0}},Fh={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},zh=Fh.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Fh.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Gh={};Gh.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Gh.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Gh.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Gh.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Gh.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Gh.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Gh.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Gh.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},Gh.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Gh.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Gh.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Gh.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Gh.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Gh.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Gh.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Gh.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Gh.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var qh={};function jh(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:qh[t]||null,isNull:!1}}function Bh(t){return t/3600*Math.PI/180}function Uh(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Vh(t){return t.map((function(t){return[Bh(t.longitudeShift),Bh(t.latitudeShift)]}))}function Wh(t,e,n){return{name:Uh(t,e+8,e+16).trim(),parent:Uh(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Yh(t,e,n,r){for(var i=e+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,r),longitudeShift:t.getFloat32(i+16*a+4,r),latitudeAccuracy:t.getFloat32(i+16*a+8,r),longitudeAccuracy:t.getFloat32(i+16*a+12,r)};o.push(s)}return o}function Xh(t,e){if(!(this instanceof Xh))return new Xh(t);e=e||function(t){if(t)throw t};var n=wh(t);if("object"==typeof n){var r=Xh.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=uh(Gh,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o=function(t,e,n,r,i){if(!t){var o=uh(Fh,r);o||(o=zh),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<Zc)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),a=function(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(.16666666666666666+a*(.04722222222222222+.022156084656084655*a)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(o.a,o.b,o.rf,n.R_A),s=function(t){return void 0===t?null:t.split(",").map(jh)}(n.nadgrids),u=n.datum||function(t,e,n,r,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=Jc,s.datum_params[4]*=Jc,s.datum_params[5]*=Jc,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=3,s.grids=a),s.a=n,s.b=r,s.es=i,s.ep2=o,s}(n.datumCode,n.datum_params,o.a,o.b,a.es,a.ep2,s);Eh(this,n),Eh(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=u,this.init(),e(null,this)}else e(t)}else e(t)}function $h(t,e,n){var r,i,o,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-Kc&&u>-1.001*Kc)u=-Kc;else if(u>Kc&&u<1.001*Kc)u=Kc;else{if(u<-Kc)return{x:-1/0,y:-1/0,z:t.z};if(u>Kc)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(r+l)*a*Math.sin(s),z:(r*(1-e)+l)*i}}function Hh(t,e,n,r){var i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m=1e-12,x=t.x,b=t.y,M=t.z?t.z:0;if(i=Math.sqrt(x*x+b*b),o=Math.sqrt(x*x+b*b+M*M),i/n<m){if(_=0,o/n<m)return Kc,v=-r,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(b,x);a=M/o,h=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*u,y=0;do{y++,l=e*(c=n/Math.sqrt(1-e*f*f))/(c+(v=i*h+M*f-c*(1-e*f*f))),g=(d=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*h-(p=s*(1-l)*u)*f,h=p,f=d}while(g*g>1e-24&&y<30);return{x:_,y:Math.atan(d/Math.abs(p)),z:v}}function Qh(t){return 1===t||2===t}function Jh(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var r=t.a,i=t.es;if(3===t.datum_type){if(0!==Kh(t,!1,n))return;r=Hc,i=Qc}var o=e.a,a=e.b,s=e.es;if(3===e.datum_type&&(o=Hc,a=6356752.314,s=Qc),i===s&&r===o&&!Qh(t.datum_type)&&!Qh(e.datum_type))return n;if((n=$h(n,i,r),Qh(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6];return{x:l*(t.x-u*t.y+s*t.z)+r,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),Qh(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=(t.x-r)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(n,e.datum_type,e.datum_params)),n=Hh(n,s,o,a),3===e.datum_type)&&0!==Kh(e,!0,n))return;return n}function Kh(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=r;break}if(null!==s.grid){var u=s.grid.subgrids[0],l=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,c=u.ll[0]-l,h=u.ll[1]-l,f=u.ll[0]+(u.lim[0]-1)*u.del[0]+l,p=u.ll[1]+(u.lim[1]-1)*u.del[1]+l;if(!(h>r.y||c>r.x||p<r.y||f<r.x||(i=Zh(r,e,u),isNaN(i.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*eh+" "+r.y*eh+" tried: '"+o+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function Zh(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Ih(i.x-Math.PI)+Math.PI;var o=tf(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,u=9;do{if(s=tf(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Ih(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function tf(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),a=r.x-1*i,s=r.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;n=o*e.lim[0]+i;var l=e.cvs[n][0],c=e.cvs[n][1];n++;var h=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],d=e.cvs[n][1];n--;var g=e.cvs[n][0],y=e.cvs[n][1],_=a*s,v=a*(1-s),m=(1-a)*(1-s),x=(1-a)*s;return u.x=m*l+v*h+x*g+_*p,u.y=m*c+v*f+x*y+_*d,u}function ef(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"n":l[i]=r;break;case"w":case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l}function nf(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function rf(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function of(t,e,n,r){var i;if(Array.isArray(n)&&(n=nf(n)),function(t){rf(t.x),rf(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=of(t,i=new Xh("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=ef(t,!1,n)),"longlat"===t.projName)n={x:n.x*th,y:n.y*th,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=Jh(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*eh,y:n.y*eh,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?ef(e,!0,n):n}Xh.projections=Dh,Xh.projections.start();var af=Xh("WGS84");function sf(t,e,n,r){var i,o,a;return Array.isArray(n)?(i=of(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(o=of(t,e,n,r),2===(a=Object.keys(n)).length||a.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]})),o)}function uf(t){return t instanceof Xh?t:t.oProj?t.oProj:Xh(t)}function lf(t,e,n){t=uf(t);var r,i=!1;return void 0===e?(e=t,t=af,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=af,i=!0),e=uf(e),n?sf(t,e,n):(r={forward:function(n,r){return sf(t,e,n,r)},inverse:function(n,r){return sf(e,t,n,r)}},i&&(r.oProj=e),r)}var cf="AJSAJS",hf="AFAFAF",ff=65,pf=73,df=79,gf=86,yf=90,_f={forward:vf,inverse:function(t){var e=Mf(Nf(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:mf};function vf(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(i=t.easting,o=t.northing,a=t.zoneNumber,s=Ef(a),u=Math.floor(i/1e5),l=Math.floor(o/1e5)%20,function(t,e,n){var r=n-1,i=cf.charCodeAt(r),o=hf.charCodeAt(r),a=i+t-1,s=o+e,u=!1;return a>yf&&(a=a-yf+ff-1,u=!0),(a===pf||i<pf&&a>pf||(a>pf||i<pf)&&u)&&a++,(a===df||i<df&&a>df||(a>df||i<df)&&u)&&++a===pf&&a++,a>yf&&(a=a-yf+ff-1),s>gf?(s=s-gf+ff-1,u=!0):u=!1,(s===pf||o<pf&&s>pf||(s>pf||o<pf)&&u)&&s++,(s===df||o<df&&s>df||(s>df||o<df)&&u)&&++s===pf&&s++,s>gf&&(s=s-gf+ff-1),String.fromCharCode(a)+String.fromCharCode(s)}(u,l,s))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,o,a,s,u,l}(function(t){var e,n,r,i,o,a,s,u,l=t.lat,c=t.lon,h=6378137,f=.00669438,p=.9996,d=xf(l),g=xf(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60);l>=56&&l<64&&c>=3&&c<12&&(u=32);l>=72&&l<84&&(c>=0&&c<9?u=31:c>=9&&c<21?u=33:c>=21&&c<33?u=35:c>=33&&c<42&&(u=37));s=xf(6*(u-1)-180+3),e=f/(1-f),n=h/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),r=Math.tan(d)*Math.tan(d),i=e*Math.cos(d)*Math.cos(d),o=Math.cos(d)*(g-s),a=h*((1-f/4-3*f*f/64-5*f*f*f/256)*d-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*d)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*d)-35*f*f*f/3072*Math.sin(6*d));var y=p*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,_=p*(a+n*Math.tan(d)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));l<0&&(_+=1e7);return{northing:Math.round(_),easting:Math.round(y),zoneNumber:u,zoneLetter:wf(l)}}({lat:t[1],lon:t[0]}),e)}function mf(t){var e=Mf(Nf(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function xf(t){return t*(Math.PI/180)}function bf(t){return t/Math.PI*180}function Mf(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p,d=.9996,g=6378137,y=.00669438,_=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,m=e;r<"N"&&(m-=1e7),h=6*(i-1)-180+3,o=.006739496752268451,p=(f=m/d/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*f)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*f)+151*_*_*_/96*Math.sin(6*f),a=g/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),u=o*Math.cos(p)*Math.cos(p),l=.99330562*g/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),c=v/(a*d);var x=p-a*Math.tan(p)/l*(c*c/2-(5+3*s+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*s+298*u+45*s*s-1.6983531815716497-3*u*u)*c*c*c*c*c*c/720);x=bf(x);var b,M=(c-(1+2*s+u)*c*c*c/6+(5-2*u+28*s-3*u*u+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(M=h+bf(M),t.accuracy){var w=Mf({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:w.lat,right:w.lon,bottom:x,left:M}}else b={lat:x,lon:M};return b}function wf(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Ef(t){var e=t%6;return 0===e&&(e=6),e}function Nf(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=Ef(a),l=function(t,e){var n=cf.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===pf&&n++,n===df&&n++,n>yf){if(i)throw"Bad character: "+t;n=ff,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=hf.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===pf&&n++,n===df&&n++,n>gf){if(i)throw"Bad character: "+t;n=ff,i=!0}r+=1e5}return r}(r.charAt(1),u);c<Sf(s);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,y=0,_=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*f,d=t.substring(o+g),_=parseFloat(d)*f),{easting:y+l,northing:_+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function Sf(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function If(t,e,n){if(!(this instanceof If))return new If(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}If.fromMGRS=function(t){return new If(mf(t))},If.prototype.toMGRS=function(t){return vf([this.x,this.y],t)};var Cf=.046875,Of=.01953125,Pf=.01068115234375;function Lf(t){var e=[];e[0]=1-t*(.25+t*(Cf+t*(Of+t*Pf))),e[1]=t*(.75-t*(Cf+t*(Of+t*Pf)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function Af(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function Tf(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(Af(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<Zc)return i}return i}var kf={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Lf(this.es),this.ml0=Af(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=Ih(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>Zc?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var y=Af(o,s,u,this.en);n=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,r=this.a*(this.k0*(y-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var _=u*Math.sin(a);if(Math.abs(Math.abs(_)-1)<Zc)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,r=u*Math.cos(a)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(r))>=1){if(_-1>Zc)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(n=Tf(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(n)<Kc){var s=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>Zc?Math.tan(n):0,c=this.ep2*Math.pow(u,2),h=Math.pow(c,2),f=Math.pow(l,2),p=Math.pow(f,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);r=n-(e*=l)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*h-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),i=Ih(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/u)}else r=Kc*Sh(a),i=0;else{var y=Math.exp(o/this.k0),_=.5*(y-1/y),v=this.lat0+a/this.k0,m=Math.cos(v);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(_,2))),r=Math.asin(e),a<0&&(r=-r),i=0===_&&0===m?0:Ih(Math.atan2(_,m)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Rf(t){var e=Math.exp(t);return e=(e-1/e)/2}function Df(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function Ff(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(Df(1,e)+1))),t<0?-e:e}function zf(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)}function Gf(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=Rf(n),u=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)r=d,i=p,f=l*(d=f)-r-c*(p=g)+t[h],g=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*g,l*g+c*f]}var qf={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(kf.init.apply(this),this.forward=kf.forward,this.inverse=kf.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=zf(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=Ih(t.x-this.long0),n=t.y;n=zf(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,Df(r,i*a)),e=Ff(Math.tan(e));var s,u,l=Gf(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=Gf(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Rf(r));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(a*l,Df(u,l*s)),e=Ih((r=Math.atan2(u,l*s))+this.long0),n=zf(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var jf={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Ih(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*th,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,qf.init.apply(this),this.forward=qf.forward,this.inverse=qf.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Bf(t,e){return Math.pow((1-t)/(1+t),e)}var Uf={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+nh)/(Math.pow(Math.tan(.5*this.lat0+nh),this.C)*Bf(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+nh),this.C)*Bf(this.e*Math.sin(n),this.ratexp))-Kc,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+nh)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*Bf(this.e*Math.sin(t.y),-.5*this.e))-Kc,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var Vf={init:function(){Uf.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=Ih(t.x-this.long0),Uf.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Uf.inverse.apply(this,[t]),t.x=Ih(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Wf={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Zc&&(this.k0=.5*(1+Sh(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Zc&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Zc&&(this.k0=.5*this.cons*Nh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ch(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Nh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Kc,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),h=Ih(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Zc&&Math.abs(u+this.lat0)<=Zc?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,l,this.e))-Kc,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=Zc?(o=Ch(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<Zc?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=Zc?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<Zc?this.lat0>0?Ih(this.long0+Math.atan2(t.x,-1*t.y)):Ih(this.long0+Math.atan2(t.x,t.y)):Ih(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=Zc){if(a<=Zc)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*Oh(this.e,r),e=this.con*Ih(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Zc?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=Ih(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*Oh(this.e,Math.tan(.5*(Kc+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(Kc+t))*Math.pow((1-e)/(1+e),.5*n)}};var Yf={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},Xf=1e-7;var $f={init:function(){var t,e,n,r,i,o,a,s,u,l,c,h,f,p=0,d=0,g=0,y=0,_=0,v=0,m=0;this.no_off=(f="object"==typeof(h=this).PROJECTION?Object.keys(h.PROJECTION)[0]:h.PROJECTION,"no_uoff"in h||"no_off"in h||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),x&&(m=this.alpha),b&&(p=this.rectified_grid_angle*th),x||b)d=this.longc;else if(g=this.long1,_=this.lat1,y=this.long2,v=this.lat2,Math.abs(_-v)<=Xf||(t=Math.abs(_))<=Xf||Math.abs(t-Kc)<=Xf||Math.abs(Math.abs(this.lat0)-Kc)<=Xf||Math.abs(Math.abs(v)-Kc)<=Xf)throw new Error;var M=1-this.es;e=Math.sqrt(M),Math.abs(this.lat0)>Zc?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/M),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ch(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),x||b?(x?(c=Math.asin(Math.sin(m)/r),b||(p=m)):(c=p,m=Math.asin(r*Math.sin(c))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(o=Math.pow(Ch(this.e,_,Math.sin(_)),this.B),a=Math.pow(Ch(this.e,v,Math.sin(v)),this.B),i=this.E/o,u=(a-o)/(a+o),l=((l=this.E*this.E)-a*o)/(l+a*o),(t=g-y)<-Math.pi?y-=rh:t>Math.pi&&(y+=rh),this.lam0=Ih(.5*(g+y)-Math.atan(l*Math.tan(.5*this.B*(g-y))/u)/this.B),c=Math.atan(2*Math.sin(this.B*Ih(g-this.lam0))/(i-1/i)),p=m=Math.asin(r*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(m))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(nh-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(nh+i))},forward:function(t){var e,n,r,i,o,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Kc)>Zc){if(e=.5*((o=this.E/Math.pow(Ch(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),n=.5*(o+a),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<Zc)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*t.x),s=Math.abs(a)<Xf?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,n,r,i,o,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),o=.5*(r+1/r),s=((a=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<Zc)u.x=0,u.y=s<0?-Kc:Kc;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=Oh(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var Hf={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Zc)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=Nh(this.e,e,n),i=Ch(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=Nh(this.e,o,a),u=Ch(this.e,this.lat2,o),l=Ch(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Zc?this.ns=Math.log(r/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Zc&&(n=Sh(n)*(Kc-2e-10));var r,i,o=Math.abs(Math.abs(n)-Kc);if(o>Zc)r=Ch(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*Ih(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=Oh(this.e,r)))return null}else i=-Kc;return o=Ih(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var Qf={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y,c=Ih(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function Jf(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function Kf(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Zf(t){return.375*t*(1+.25*t*(1+.46875*t))}function tp(t){return.05859375*t*t*(1+.75*t)}function ep(t){return t*t*t*(35/3072)}function np(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function rp(t){return Math.abs(t)<Kc?t:t-Sh(t)*Math.PI}function ip(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}var op={init:function(){this.sphere||(this.e0=Kf(this.es),this.e1=Zf(this.es),this.e2=tp(this.es),this.e3=ep(this.es),this.ml0=this.a*Jf(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=Ih(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=np(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),n=this.a*Jf(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=ip(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Kc)<=Zc)return t.x=this.long0,t.y=Kc,i<0&&(t.y*=-1),t;var s=np(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=r*this.a/s,h=c*c;e=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),n=c*(1-h*(l/3+(1+3*l)*l*h/15))/Math.cos(a)}return t.x=Ih(n+this.long0),t.y=rp(e),t},names:["Cassini","Cassini_Soldner","cass"]};function ap(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var sp=.3333333333333333,up=.17222222222222222,lp=.10257936507936508,cp=.06388888888888888,hp=.0664021164021164,fp=.016415012942191543;var pp={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Kc)<Zc?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Zc?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=ap(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*sp,e=t*t,n[0]+=e*up,n[1]=e*cp,e*=t,n[0]+=e*lp,n[1]+=e*hp,n[2]=e*fp,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ap(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h=t.x,f=t.y;if(h=Ih(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=Zc)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<Zc)return null;n=nh-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,u=0,l=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),a=ap(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*r;break;case this.EQUIT:l=1+u*r;break;case this.N_POLE:l=Kc+f,a=this.qp-a;break;case this.S_POLE:l=f-Kc,a=this.qp+a}if(Math.abs(l)<Zc)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*r):(l=Math.sqrt(2/(1+u*r)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,u,l,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,g=0;if((n=.5*(p=Math.sqrt(h*h+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=Zc?0:Math.asin(f*g/p),h*=g,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=Zc?this.lat0:Math.asin(d*this.sinph0+f*g*this.cosph0/p),h*=g*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=Kc-n;break;case this.S_POLE:n-=Kc}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(a=Math.sqrt(h*h+f*f))<Zc)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+f*i*this.cosb1/a,o=this.qp*s,f=a*this.cosb1*r-f*this.sinb1*i):(s=f*i/a,o=this.qp*s,f=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(h,f),u=Math.asin(s),l=this.apa,c=u+u,n=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=Ih(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function dp(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var gp={init:function(){Math.abs(this.lat1+this.lat2)<Zc||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Nh(this.e3,this.sin_po,this.cos_po),this.qs1=ap(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Nh(this.e3,this.sin_po,this.cos_po),this.qs2=ap(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ap(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Zc?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=ap(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*Ih(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=Ih(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=dp(.5*e);if(t<Zc)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}};var yp={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=Ih(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=Zc?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),a=dp((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=Ih(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var _p={init:function(){this.sphere||(this.k0=Nh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=Ih(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=ap(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Ih(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Kc:Kc;for(var r,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=Ih(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var vp={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=Ih(e-this.long0),i=rp(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=Ih(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=rp(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var mp={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Kf(this.es),this.e1=Zf(this.es),this.e2=tp(this.es),this.e3=ep(this.es),this.ml0=this.a*Jf(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=Ih(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=Zc?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(rp(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=Zc)e=this.a*a,n=-1*this.ml0;else{var s=np(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*Jf(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,u,l;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Zc)e=Ih(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=Zc){n=u;break}e=Ih(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=Zc)n=0,e=Ih(this.long0+r/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,u=a,o=20;o;--o)if(g=this.e*Math.sin(u),h=Math.sqrt(1-g*g)*Math.tan(u),f=this.a*Jf(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=Zc){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ih(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var xp={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/Jc*1e-5,a=i,s=1,u=0;for(e=1;e<=10;e++)s*=o,u+=this.A[e]*s;var l,c=u,h=a,f=1,p=0,d=0,g=0;for(e=1;e<=6;e++)l=p*c+f*h,f=f*c-p*h,p=l,d=d+this.B_re[e]*f-this.B_im[e]*p,g=g+this.B_im[e]*f+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,l=0,c=0,h=0;for(e=1;e<=6;e++)n=l*a+u*s,u=u*a-l*s,l=n,c=c+this.C_re[e]*u-this.C_im[e]*l,h=h+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=c,g=h,y=a,_=s;for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,y+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),_+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var v=this.B_re[1],m=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,v+=e*(this.B_re[e]*d-this.B_im[e]*g),m+=e*(this.B_im[e]*d+this.B_re[e]*g);var x=v*v+m*m;c=(y*v+_*m)/x,h=(_*v-y*m)/x}var b=c,M=h,w=1,E=0;for(e=1;e<=9;e++)w*=b,E+=this.D[e]*w;var N=this.lat0+E*Jc*1e5,S=this.long0+M;return t.x=S,t.y=N,t},names:["New_Zealand_Map_Grid","nzmg"]};var bp={init:function(){},forward:function(t){var e=t.x,n=t.y,r=Ih(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Ih(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var Mp={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Lf(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=Ih(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<Zc)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*Af(i,u,l,this.en),e=this.a*r*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=dp((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=dp(Math.sin(e)/this.n)),n=Ih(n+this.long0),e=rp(e)):(e=Tf(t.y/this.a,this.es,this.en),(r=Math.abs(e))<Kc?(r=Math.sin(e),n=Ih(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-Zc<Kc&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var wp={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=Ih(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Zc)break}i/=2,Math.PI/2-Math.abs(n)<Zc&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Ih(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var Ep={init:function(){Math.abs(this.lat1+this.lat2)<Zc||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Kf(this.es),this.e1=Zf(this.es),this.e2=tp(this.es),this.e3=ep(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Nh(this.e,this.sinphi,this.cosphi),this.ml1=Jf(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Zc?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Nh(this.e,this.sinphi,this.cosphi),this.ml2=Jf(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Jf(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Jf(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*Ih(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=Ih(this.long0+o/this.ns),r=rp(this.g-n/this.a),t.x=i,t.y=r,t):(r=ip(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=Ih(this.long0+o/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]};var Np={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=Ih(r-this.long0);Math.abs(i)<=Zc&&(e=this.x0+this.R*o,n=this.y0);var a=dp(2*Math.abs(i/Math.PI));(Math.abs(o)<=Zc||Math.abs(Math.abs(i)-Kc)<=Zc)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),h=c/(l+c-1),f=h*h,p=h*(2/l-1),d=p*p,g=Math.PI*this.R*(s*(h-d)+Math.sqrt(u*(h-d)*(h-d)-(d+u)*(f-d)))/(d+u);o<0&&(g=-g),e=this.x0+g;var y=u+h;return g=Math.PI*this.R*(p*y-s*Math.sqrt((d+u)*(u+1)-y*y))/(d+u),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(r)<Zc?this.long0:Ih(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Sp={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,x,b,M,w=t.x,E=t.y,N=Math.sin(t.y),S=Math.cos(t.y),I=Ih(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Zc?(t.x=this.x0+this.a*(Kc-E)*Math.sin(I),t.y=this.y0-this.a*(Kc-E)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=Zc?(t.x=this.x0+this.a*(Kc+E)*Math.sin(I),t.y=this.y0+this.a*(Kc+E)*Math.cos(I),t):(v=this.sin_p12*N+this.cos_p12*S*Math.cos(I),_=(y=Math.acos(v))?y/Math.sin(y):1,t.x=this.x0+this.a*_*S*Math.sin(I),t.y=this.y0+this.a*_*(this.cos_p12*N-this.sin_p12*S*Math.cos(I)),t):(e=Kf(this.es),n=Zf(this.es),r=tp(this.es),i=ep(this.es),Math.abs(this.sin_p12-1)<=Zc?(o=this.a*Jf(e,n,r,i,Kc),a=this.a*Jf(e,n,r,i,E),t.x=this.x0+(o-a)*Math.sin(I),t.y=this.y0-(o-a)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=Zc?(o=this.a*Jf(e,n,r,i,Kc),a=this.a*Jf(e,n,r,i,E),t.x=this.x0+(o+a)*Math.sin(I),t.y=this.y0+(o+a)*Math.cos(I),t):(s=N/S,u=np(this.a,this.e,this.sin_p12),l=np(this.a,this.e,N),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*S)),m=0===(h=Math.atan2(Math.sin(I),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(I)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=Zc?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(I)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),y=u*m*(1-(x=m*m)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(b=x*m)/8*(d=f*p)*(1-2*g)+(M=b*m)/120*(g*(4-7*g)-3*f*f*(1-7*g))-M*m/48*d),t.x=this.x0+y*Math.sin(h),t.y=this.y0+y*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,x,b,M,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Kc*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=Zc?a=this.lat0:(a=dp(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-Kc,o=Math.abs(s)<=Zc?this.lat0>=0?Ih(this.long0+Math.atan2(t.x,-t.y)):Ih(this.long0-Math.atan2(-t.x,t.y)):Ih(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return u=Kf(this.es),l=Zf(this.es),c=tp(this.es),h=ep(this.es),Math.abs(this.sin_p12-1)<=Zc?(a=ip(((f=this.a*Jf(u,l,c,h,Kc))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,h),o=Ih(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=Zc?(f=this.a*Jf(u,l,c,h,Kc),a=ip(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,u,l,c,h),o=Ih(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=np(this.a,this.e,this.sin_p12),y=Math.cos(g),v=-(_=this.e*this.cos_p12*y)*_/(1-this.es),m=3*this.es*(1-v)*this.sin_p12*this.cos_p12*y/(1-this.es),M=1-v*(b=(x=e/p)-v*(1+v)*Math.pow(x,3)/6-m*(1+3*v)*Math.pow(x,4)/24)*b/2-x*b*b*b/6,d=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*y),o=Ih(this.long0+Math.asin(Math.sin(g)*Math.sin(b)/Math.cos(d))),w=Math.sin(d),a=Math.atan2((w-this.es*M*this.sin_p12)*Math.tan(d),w*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var Ip={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,u=t.x,l=t.y;return r=Ih(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=Zc)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,n=dp((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=Zc?(s=this.lat0,t.x=a,t.y=s,t):(s=dp(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-Kc,Math.abs(o)<=Zc?(a=this.lat0>=0?Ih(this.long0+Math.atan2(t.x,-t.y)):Ih(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=Ih(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]},Cp=1,Op=2,Pp=3,Lp=4,Ap=5,Tp=6,kp=1,Rp=2,Dp=3,Fp=4;function zp(t,e,n,r){var i;return t<Zc?(r.value=kp,i=0):(i=Math.atan2(e,n),Math.abs(i)<=nh?r.value=kp:i>nh&&i<=Kc+nh?(r.value=Rp,i-=Kc):i>Kc+nh||i<=-(Kc+nh)?(r.value=Dp,i=i>=0?i-ih:i+ih):(r.value=Fp,i+=Kc)),i}function Gp(t,e){var n=t+e;return n<-ih?n+=rh:n>+ih&&(n-=rh),n}var qp={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Kc-nh/2?this.face=Ap:this.lat0<=-(Kc-nh/2)?this.face=Tp:Math.abs(this.long0)<=nh?this.face=Cp:Math.abs(this.long0)<=Kc+nh?this.face=this.long0>0?Op:Lp:this.face=Pp,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Ap)i=Kc-e,n>=nh&&n<=Kc+nh?(u.value=kp,r=n-Kc):n>Kc+nh||n<=-(Kc+nh)?(u.value=Rp,r=n>0?n-ih:n+ih):n>-(Kc+nh)&&n<=-nh?(u.value=Dp,r=n+Kc):(u.value=Fp,r=n);else if(this.face===Tp)i=Kc+e,n>=nh&&n<=Kc+nh?(u.value=kp,r=-n+Kc):n<nh&&n>=-nh?(u.value=Rp,r=-n):n<-nh&&n>=-(Kc+nh)?(u.value=Dp,r=-n-Kc):(u.value=Fp,r=n>0?-n+ih:-n-ih);else{var l,c,h,f,p,d;this.face===Op?n=Gp(n,+Kc):this.face===Pp?n=Gp(n,+ih):this.face===Lp&&(n=Gp(n,-Kc)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),l=p*Math.cos(n),c=p*d,h=f,this.face===Cp?r=zp(i=Math.acos(l),h,c,u):this.face===Op?r=zp(i=Math.acos(c),h,-l,u):this.face===Pp?r=zp(i=Math.acos(-l),h,-c,u):this.face===Lp?r=zp(i=Math.acos(-c),h,l,u):(i=r=0,u.value=kp)}return a=Math.atan(12/ih*(r+Math.acos(Math.sin(r)*Math.cos(nh))-Kc)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),u.value===Rp?a+=Kc:u.value===Dp?a+=ih:u.value===Fp&&(a+=1.5*ih),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=kp:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=Rp,e-=Kc):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=Dp,e=e<0?e+ih:e-ih):(d.value=Fp,e+=Kc),l=ih/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Ap)u=Math.acos(s),p.phi=Kc-u,d.value===kp?p.lam=a+Kc:d.value===Rp?p.lam=a<0?a+ih:a-ih:d.value===Dp?p.lam=a-Kc:p.lam=a;else if(this.face===Tp)u=Math.acos(s),p.phi=u-Kc,d.value===kp?p.lam=-a+Kc:d.value===Rp?p.lam=-a:d.value===Dp?p.lam=-a-Kc:p.lam=a<0?-a-ih:-a+ih;else{var g,y,_;l=(g=s)*g,y=(l+=(_=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*_)>=1?0:Math.sqrt(1-l),d.value===Rp?(l=y,y=-_,_=l):d.value===Dp?(y=-y,_=-_):d.value===Fp&&(l=y,y=_,_=-l),this.face===Op?(l=g,g=-y,y=l):this.face===Pp?(g=-g,y=-y):this.face===Lp&&(l=g,g=y,y=-l),p.phi=Math.acos(-_)-Kc,p.lam=Math.atan2(y,g),this.face===Op?p.lam=Gp(p.lam,-Kc):this.face===Pp?p.lam=Gp(p.lam,-ih):this.face===Lp&&(p.lam=Gp(p.lam,+Kc))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},jp=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Bp=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Up=.8487,Vp=1.3523,Wp=eh/5,Yp=18,Xp=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var $p={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Ih(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*Wp);r<0?r=0:r>=Yp&&(r=17);var i={x:Xp(jp[r],n=eh*(n-.08726646259971647*r))*e,y:Xp(Bp[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Up+this.x0,i.y=i.y*this.a*Vp+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Up),y:Math.abs(t.y-this.y0)/(this.a*Vp)};if(e.y>=1)e.x/=jp[18][0],e.y=t.y<0?-Kc:Kc;else{var n=Math.floor(e.y*Yp);for(n<0?n=0:n>=Yp&&(n=17);;)if(Bp[n][0]>e.y)--n;else{if(!(Bp[n+1][0]<=e.y))break;++n}var r=Bp[n],i=5*(e.y-r[0])/(Bp[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(Xp(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,Zc,100),e.x/=Xp(jp[n],i),e.y=(5*n+i)*th,t.y<0&&(e.y=-e.y)}return e.x=Ih(e.x+this.long0),e},names:["Robinson","robin"]};var Hp={init:function(){this.name="geocent"},forward:function(t){return $h(t,this.es,this.a)},inverse:function(t){return Hh(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Qp=0,Jp=1,Kp=2,Zp=3,td={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var ed={init:function(){if(Object.keys(td).forEach(function(t){if(void 0===this[t])this[t]=td[t].def;else{if(td[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);td[t].num&&(this[t]=parseFloat(this[t]))}td[t].degrees&&(this[t]=this[t]*th)}.bind(this)),Math.abs(Math.abs(this.lat0)-Kc)<Zc?this.mode=this.lat0<0?Jp:Qp:Math.abs(this.lat0)<Zc?this.mode=Kp:(this.mode=Zp,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Zp:n=this.sinph0*o+this.cosph0*a*s;break;case Kp:n=a*s;break;case Jp:n=-o;break;case Qp:n=o}switch(e=(n=this.pn1/(this.p-n))*a*Math.sin(t.x),this.mode){case Zp:n*=this.cosph0*o-this.sinph0*a*s;break;case Kp:n*=o;break;case Qp:n*=-a*s;break;case Jp:n*=a*s}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=Df(t.x,t.y);if(Math.abs(o)<Zc)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Zp:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case Kp:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case Qp:i.y=Math.asin(a),t.y=-t.y;break;case Jp:i.y=-Math.asin(a)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};var nd={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/Df(this.radius_p*Math.cos(a),Math.sin(a));if(n=s*Math.cos(o)*Math.cos(a),r=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/Df(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/Df(r,e)))}else"sphere"===this.shape&&(e=Math.cos(a),n=Math.cos(o)*e,r=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/Df(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/Df(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Df(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Df(1,a));var u=s/this.radius_p;if(e=a*a+u*u+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};lf.defaultDatum="WGS84",lf.Proj=Xh,lf.WGS84=new lf.Proj("WGS84"),lf.Point=If,lf.toPoint=nf,lf.defs=xh,lf.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Uh(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(t,e,n){for(var r=176,i=[],o=0;o<e.nSubgrids;o++){var a=Wh(t,r,n),s=Yh(t,r,a,n),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[Bh(a.lowerLongitude),Bh(a.lowerLatitude)],del:[Bh(a.longitudeInterval),Bh(a.latitudeInterval)],lim:[u,l],count:a.gridNodeCount,cvs:Vh(s)})}return i}(n,i,r),a={header:i,subgrids:o};return qh[t]=a,a},lf.transform=of,lf.mgrs=_f,lf.version="__VERSION__",function(t){t.Proj.projections.add(kf),t.Proj.projections.add(qf),t.Proj.projections.add(jf),t.Proj.projections.add(Vf),t.Proj.projections.add(Wf),t.Proj.projections.add(Yf),t.Proj.projections.add($f),t.Proj.projections.add(Hf),t.Proj.projections.add(Qf),t.Proj.projections.add(op),t.Proj.projections.add(pp),t.Proj.projections.add(gp),t.Proj.projections.add(yp),t.Proj.projections.add(_p),t.Proj.projections.add(vp),t.Proj.projections.add(mp),t.Proj.projections.add(xp),t.Proj.projections.add(bp),t.Proj.projections.add(Mp),t.Proj.projections.add(wp),t.Proj.projections.add(Ep),t.Proj.projections.add(Np),t.Proj.projections.add(Sp),t.Proj.projections.add(Ip),t.Proj.projections.add(qp),t.Proj.projections.add($p),t.Proj.projections.add(Hp),t.Proj.projections.add(ed),t.Proj.projections.add(nd)}(lf);const rd=Object.assign({},ya);lf.defs([["EPSG:2154","+title=France Lambert93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"]]),lf.defs([["EPSG:3035","+title=Europa (ETRS89/LAEA) +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"]]),lf.defs([["EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"]]),lf.defs([["EPSG:27700","+title=British National Grid -- United Kingdom +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs"]]),lf.defs([["EPSG:42304","+title=NAD83 / NRCan LCC Canada +proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs "]]);const id=Object.assign({},ya);function od(t){let e=t[0][0],n=t[0][1],r=t[1][0],i=t[1][1];const o={type:"FeatureCollection",features:[{type:"Feature",properties:{id:1},geometry:{type:"Polygon",coordinates:-90===n?[[[e,i],[r,i]]]:[[[e,n],[e,i],[r+=360*(r<e),i],[r,n],[e,n]]]}}]};return ad(id.geoEquirectangularRaw,.02)(o)}const ad=(t,e)=>{const n=Math.PI/180,r=Math.tan(n*e/2)**2,i=function(e,n,o,a,s,u,l){if(u--){var c=ud(e,o),h=t.invert(...c),f=cd(h),p=hd(f,n),d=hd(f,a);sd(f,n,a)*(1+.25*s)*(1+.25*s)/(r*s)+(p-d)/s*2*((p-d)/s)>1&p+d>r|p+d>.25&&(i(e,n,c,f,p,u,l),l.push(h),i(c,f,o,a,d,u,l))}},o=e=>{let n=[],r=e[0],o=t.invert(...r),a=cd(o);n.push(o);for(var s=1,u=e.length;s<u;s++){let o=e[s],u=t.invert(...o),l=cd(u);i(r,a,o,l,hd(a,l),16,n),n.push(u),r=o,a=l}return n};let a,s=e=>t.invert(...e),u=t=>e=>e.forEach(((n,r)=>e[r]=t(n))),l={Point:t=>t.coordinates=s(t.coordinates),MultiPoint:t=>u(s)(t.coordinates),LineString:t=>t.coordinates=o(t.coordinates),Polygon:t=>u(o)(t.coordinates),MultiLineString:t=>u(o)(t.coordinates),MultiPolygon:t=>t.coordinates.forEach(u(o)),Feature:t=>a(t.geometry),GeometryCollection:t=>t.geometries.forEach(a),FeatureCollection:t=>t.features.forEach(a)};return a=t=>(l?.[t?.type]?.(t),t),function(t){return t=JSON.parse(JSON.stringify(t)),a(t)}},sd=([t,e,n],[r,i,o],[a,s,u])=>{var l=t*((i-e)*(u-n)-(s-e)*(o-n))+e*((o-n)*(a-t)-(u-n)*(r-t))+n*((r-t)*(s-e)-(a-t)*(i-e)),c=(t+a)*(t+r)+(e+s)*(e+i)+(n+u)*(n+o);return(l*l+!(c*c))/(c*c)},ud=([t,e],[n,r])=>[.5*(t+n),.5*(e+r)],ld=Math.PI/180,cd=([t,e])=>[Math.cos(ld*e)*Math.cos(ld*t),Math.cos(ld*e)*Math.sin(ld*t),Math.sin(ld*e)],hd=([t,e,n],[r,i,o])=>{var a=t*(i-e)-(r-t)*e,s=e*(o-n)-(i-e)*n,u=n*(r-t)-(o-n)*t,l=t*(r+t)+e*(i+e)+n*(o+n);return(a*a+s*s+u*u+!(l*l))/(l*l)},fd=Object.assign({},bt,ya,gc);function pd(t,e,n={},r){let i=n.stroke?n.stroke:"white",o=n.strokeWidth?n.strokeWidth:.8,a=n.strokeOpacity?n.strokeOpacity:.5,s=n.strokeDasharray?n.strokeDasharray:2,u=n.strokeLinecap??"round",l=n.strokeLinejoin??"round",c=n.step?n.step:[10,10];c=Array.isArray(c)?c:[c,c],t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).append("path").datum(fd.geoGraticule().step(c)).attr("d",fd.geoPath(e)).style("fill","none").style("stroke",i).style("stroke-width",o).style("stroke-opacity",a).style("stroke-linecap",u).style("stroke-linejoin",l).style("stroke-dasharray",s)}const dd=Object.assign({},bt,ya,gc);function gd(t,e,n={}){let r=n.fill?n.fill:"#add8f7",i=n.fillOpacity?n.fillOpacity:1,o=n.stroke?n.stroke:"none",a=n.strokeWidth?n.strokeWidth:1;t.append("g").append("path").attr("d",dd.geoPath(e)({type:"Sphere"})).attr("fill",r).attr("fill-opacity",i).attr("stroke",o).attr("stroke-width",a)}Object.assign({},bt),Object.assign({},bt);const yd=Math.PI,_d=2*yd,vd=1e-6,md=_d-vd;function xd(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function bd(){return new xd}function Md(t){return function(){return t}}xd.prototype=bd.prototype={constructor:xd,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>vd)if(Math.abs(c*s-u*l)>vd&&i){var f=n-o,p=r-a,d=s*s+u*u,g=f*f+p*p,y=Math.sqrt(d),_=Math.sqrt(h),v=i*Math.tan((yd-Math.acos((d+h-g)/(2*y*_)))/2),m=v/_,x=v/y;Math.abs(m-1)>vd&&(this._+="L"+(t+m*l)+","+(e+m*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*p)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>vd||Math.abs(this._y1-l)>vd)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%_d+_d),h>md?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>vd&&(this._+="A"+n+","+n+",0,"+ +(h>=yd)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const wd=Math.abs,Ed=Math.atan2,Nd=Math.cos,Sd=Math.max,Id=Math.min,Cd=Math.sin,Od=Math.sqrt,Pd=1e-12,Ld=Math.PI,Ad=Ld/2,Td=2*Ld;function kd(t){return t>1?0:t<-1?Ld:Math.acos(t)}function Rd(t){return t>=1?Ad:t<=-1?-Ad:Math.asin(t)}function Dd(t){return t.innerRadius}function Fd(t){return t.outerRadius}function zd(t){return t.startAngle}function Gd(t){return t.endAngle}function qd(t){return t&&t.padAngle}function jd(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,h=s-o,f=h*u-c*l;if(!(f*f<Pd))return[t+(f=(c*(e-o)-h*(t-i))/f)*u,e+f*l]}function Bd(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/Od(s*s+u*u),c=l*u,h=-l*s,f=t+c,p=e+h,d=n+c,g=r+h,y=(f+d)/2,_=(p+g)/2,v=d-f,m=g-p,x=v*v+m*m,b=i-o,M=f*g-d*p,w=(m<0?-1:1)*Od(Sd(0,b*b*x-M*M)),E=(M*m-v*w)/x,N=(-M*v-m*w)/x,S=(M*m+v*w)/x,I=(-M*v+m*w)/x,C=E-y,O=N-_,P=S-y,L=I-_;return C*C+O*O>P*P+L*L&&(E=S,N=I),{cx:E,cy:N,x01:-c,y01:-h,x11:E*(i/b-1),y11:N*(i/b-1)}}var Ud=Array.prototype.slice;function Vd(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Wd(t){this._context=t}function Yd(t){return new Wd(t)}function Xd(t){return t[0]}function $d(t){return t[1]}function Hd(t,e){var n=Md(!0),r=null,i=Yd,o=null;function a(a){var s,u,l,c=(a=Vd(a)).length,h=!1;for(null==r&&(o=i(l=bd())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?Xd:Md(t),e="function"==typeof e?e:void 0===e?$d:Md(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:Md(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Md(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Md(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function Qd(t,e,n){var r=null,i=Md(!0),o=null,a=Yd,s=null;function u(u){var l,c,h,f,p,d=(u=Vd(u)).length,g=!1,y=new Array(d),_=new Array(d);for(null==o&&(s=a(p=bd())),l=0;l<=d;++l){if(!(l<d&&i(f=u[l],l,u))===g)if(g=!g)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;h>=c;--h)s.point(y[h],_[h]);s.lineEnd(),s.areaEnd()}g&&(y[l]=+t(f,l,u),_[l]=+e(f,l,u),s.point(r?+r(f,l,u):y[l],n?+n(f,l,u):_[l]))}if(p)return s=null,p+""||null}function l(){return Hd().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?Xd:Md(+t),e="function"==typeof e?e:Md(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?$d:Md(+n),u.x=function(e){return arguments.length?(t="function"==typeof e?e:Md(+e),r=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:Md(+e),u):t},u.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Md(+t),u):r},u.y=function(t){return arguments.length?(e="function"==typeof t?t:Md(+t),n=null,u):e},u.y0=function(t){return arguments.length?(e="function"==typeof t?t:Md(+t),u):e},u.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Md(+t),u):n},u.lineX0=u.lineY0=function(){return l().x(t).y(e)},u.lineY1=function(){return l().x(t).y(n)},u.lineX1=function(){return l().x(r).y(e)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:Md(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u}function Jd(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Kd(t){return t}Wd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Zd=eg(Yd);function tg(t){this._curve=t}function eg(t){function e(e){return new tg(t(e))}return e._curve=t,e}function ng(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(eg(t)):e()._curve},t}function rg(){return ng(Hd().curve(Zd))}function ig(){var t=Qd().curve(Zd),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ng(n())},delete t.lineX0,t.lineEndAngle=function(){return ng(r())},delete t.lineX1,t.lineInnerRadius=function(){return ng(i())},delete t.lineY0,t.lineOuterRadius=function(){return ng(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(eg(t)):e()._curve},t}function og(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}tg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class ag{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class sg{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0==this._point++)this._x0=t,this._y0=e;else{const n=og(this._x0,this._y0),r=og(this._x0,this._y0=(this._y0+e)/2),i=og(t,this._y0),o=og(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...o)}}}function ug(t){return new ag(t,!0)}function lg(t){return new ag(t,!1)}function cg(t){return new sg(t)}function hg(t){return t.source}function fg(t){return t.target}function pg(t){let e=hg,n=fg,r=Xd,i=$d,o=null,a=null;function s(){let s;const u=Ud.call(arguments),l=e.apply(this,u),c=n.apply(this,u);if(null==o&&(a=t(s=bd())),a.lineStart(),u[0]=l,a.point(+r.apply(this,u),+i.apply(this,u)),u[0]=c,a.point(+r.apply(this,u),+i.apply(this,u)),a.lineEnd(),s)return a=null,s+""||null}return s.source=function(t){return arguments.length?(e=t,s):e},s.target=function(t){return arguments.length?(n=t,s):n},s.x=function(t){return arguments.length?(r="function"==typeof t?t:Md(+t),s):r},s.y=function(t){return arguments.length?(i="function"==typeof t?t:Md(+t),s):i},s.context=function(e){return arguments.length?(null==e?o=a=null:a=t(o=e),s):o},s}const dg=Od(3);var gg={draw(t,e){const n=.59436*Od(e+Id(e/28,.75)),r=n/2,i=r*dg;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},yg={draw(t,e){const n=Od(e/Ld);t.moveTo(n,0),t.arc(0,0,n,0,Td)}},_g={draw(t,e){const n=Od(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const vg=Od(1/3),mg=2*vg;var xg={draw(t,e){const n=Od(e/mg),r=n*vg;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},bg={draw(t,e){const n=.62625*Od(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},Mg={draw(t,e){const n=.87559*Od(e-Id(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},wg={draw(t,e){const n=Od(e),r=-n/2;t.rect(r,r,n,n)}},Eg={draw(t,e){const n=.4431*Od(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const Ng=Cd(Ld/10)/Cd(7*Ld/10),Sg=Cd(Td/10)*Ng,Ig=-Nd(Td/10)*Ng;var Cg={draw(t,e){const n=Od(.8908130915292852*e),r=Sg*n,i=Ig*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=Td*e/5,a=Nd(o),s=Cd(o);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}};const Og=Od(3);var Pg={draw(t,e){const n=-Od(e/(3*Og));t.moveTo(0,2*n),t.lineTo(-Og*n,-n),t.lineTo(Og*n,-n),t.closePath()}};const Lg=Od(3);var Ag={draw(t,e){const n=.6824*Od(e),r=n/2,i=n*Lg/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const Tg=-.5,kg=Od(3)/2,Rg=1/Od(12),Dg=3*(Rg/2+1);var Fg={draw(t,e){const n=Od(e/Dg),r=n/2,i=n*Rg,o=r,a=n*Rg+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(Tg*r-kg*i,kg*r+Tg*i),t.lineTo(Tg*o-kg*a,kg*o+Tg*a),t.lineTo(Tg*s-kg*u,kg*s+Tg*u),t.lineTo(Tg*r+kg*i,Tg*i-kg*r),t.lineTo(Tg*o+kg*a,Tg*a-kg*o),t.lineTo(Tg*s+kg*u,Tg*u-kg*s),t.closePath()}},zg={draw(t,e){const n=.6189*Od(e-Id(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const Gg=[yg,_g,xg,wg,Cg,Pg,Fg],qg=[yg,Mg,zg,Ag,gg,Eg,bg];function jg(){}function Bg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ug(t){this._context=t}function Vg(t){this._context=t}function Wg(t){this._context=t}function Yg(t,e){this._basis=new Ug(t),this._beta=e}Ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bg(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Vg.prototype={areaStart:jg,areaEnd:jg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Bg(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Wg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Bg(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Yg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Xg=function t(e){function n(t){return 1===e?new Ug(t):new Yg(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function $g(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Hg(t,e){this._context=t,this._k=(1-e)/6}Hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$g(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:$g(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Qg=function t(e){function n(t){return new Hg(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Jg(t,e){this._context=t,this._k=(1-e)/6}Jg.prototype={areaStart:jg,areaEnd:jg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:$g(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Kg=function t(e){function n(t){return new Jg(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Zg(t,e){this._context=t,this._k=(1-e)/6}Zg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$g(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ty=function t(e){function n(t){return new Zg(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ey(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Pd){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Pd){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function ny(t,e){this._context=t,this._alpha=e}ny.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ey(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ry=function t(e){function n(t){return e?new ny(t,e):new Hg(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function iy(t,e){this._context=t,this._alpha=e}iy.prototype={areaStart:jg,areaEnd:jg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ey(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var oy=function t(e){function n(t){return e?new iy(t,e):new Jg(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ay(t,e){this._context=t,this._alpha=e}ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ey(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var sy=function t(e){function n(t){return e?new ay(t,e):new Zg(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function uy(t){this._context=t}function ly(t){return t<0?-1:1}function cy(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(ly(o)+ly(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function hy(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fy(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function py(t){this._context=t}function dy(t){this._context=new gy(t)}function gy(t){this._context=t}function yy(t){this._context=t}function _y(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function vy(t,e){this._context=t,this._t=e}function my(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function xy(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function by(t,e){return t[e]}function My(t){const e=[];return e.key=t,e}function wy(t){var e=t.map(Ey);return xy(t).sort((function(t,n){return e[t]-e[n]}))}function Ey(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function Ny(t){var e=t.map(Sy);return xy(t).sort((function(t,n){return e[t]-e[n]}))}function Sy(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}uy.prototype={areaStart:jg,areaEnd:jg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},py.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fy(this,this._t0,hy(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fy(this,hy(this,n=cy(this,t,e)),n);break;default:fy(this,this._t0,n=cy(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(dy.prototype=Object.create(py.prototype)).point=function(t,e){py.prototype.point.call(this,e,t)},gy.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=_y(t),i=_y(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Iy=Object.freeze({__proto__:null,arc:function(){var t=Dd,e=Fd,n=Md(0),r=null,i=zd,o=Gd,a=qd,s=null;function u(){var u,l,c=+t.apply(this,arguments),h=+e.apply(this,arguments),f=i.apply(this,arguments)-Ad,p=o.apply(this,arguments)-Ad,d=wd(p-f),g=p>f;if(s||(s=u=bd()),h<c&&(l=h,h=c,c=l),h>Pd)if(d>Td-Pd)s.moveTo(h*Nd(f),h*Cd(f)),s.arc(0,0,h,f,p,!g),c>Pd&&(s.moveTo(c*Nd(p),c*Cd(p)),s.arc(0,0,c,p,f,g));else{var y,_,v=f,m=p,x=f,b=p,M=d,w=d,E=a.apply(this,arguments)/2,N=E>Pd&&(r?+r.apply(this,arguments):Od(c*c+h*h)),S=Id(wd(h-c)/2,+n.apply(this,arguments)),I=S,C=S;if(N>Pd){var O=Rd(N/c*Cd(E)),P=Rd(N/h*Cd(E));(M-=2*O)>Pd?(x+=O*=g?1:-1,b-=O):(M=0,x=b=(f+p)/2),(w-=2*P)>Pd?(v+=P*=g?1:-1,m-=P):(w=0,v=m=(f+p)/2)}var L=h*Nd(v),A=h*Cd(v),T=c*Nd(b),k=c*Cd(b);if(S>Pd){var R,D=h*Nd(m),F=h*Cd(m),z=c*Nd(x),G=c*Cd(x);if(d<Ld&&(R=jd(L,A,z,G,D,F,T,k))){var q=L-R[0],j=A-R[1],B=D-R[0],U=F-R[1],V=1/Cd(kd((q*B+j*U)/(Od(q*q+j*j)*Od(B*B+U*U)))/2),W=Od(R[0]*R[0]+R[1]*R[1]);I=Id(S,(c-W)/(V-1)),C=Id(S,(h-W)/(V+1))}}w>Pd?C>Pd?(y=Bd(z,G,L,A,h,C,g),_=Bd(D,F,T,k,h,C,g),s.moveTo(y.cx+y.x01,y.cy+y.y01),C<S?s.arc(y.cx,y.cy,C,Ed(y.y01,y.x01),Ed(_.y01,_.x01),!g):(s.arc(y.cx,y.cy,C,Ed(y.y01,y.x01),Ed(y.y11,y.x11),!g),s.arc(0,0,h,Ed(y.cy+y.y11,y.cx+y.x11),Ed(_.cy+_.y11,_.cx+_.x11),!g),s.arc(_.cx,_.cy,C,Ed(_.y11,_.x11),Ed(_.y01,_.x01),!g))):(s.moveTo(L,A),s.arc(0,0,h,v,m,!g)):s.moveTo(L,A),c>Pd&&M>Pd?I>Pd?(y=Bd(T,k,D,F,c,-I,g),_=Bd(L,A,z,G,c,-I,g),s.lineTo(y.cx+y.x01,y.cy+y.y01),I<S?s.arc(y.cx,y.cy,I,Ed(y.y01,y.x01),Ed(_.y01,_.x01),!g):(s.arc(y.cx,y.cy,I,Ed(y.y01,y.x01),Ed(y.y11,y.x11),!g),s.arc(0,0,c,Ed(y.cy+y.y11,y.cx+y.x11),Ed(_.cy+_.y11,_.cx+_.x11),g),s.arc(_.cx,_.cy,I,Ed(_.y11,_.x11),Ed(_.y01,_.x01),!g))):s.arc(0,0,c,b,x,g):s.lineTo(T,k)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Ld/2;return[Nd(r)*n,Cd(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Md(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Md(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Md(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Md(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Md(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Md(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Md(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u},area:Qd,line:Hd,pie:function(){var t=Kd,e=Jd,n=null,r=Md(0),i=Md(Td),o=Md(0);function a(a){var s,u,l,c,h,f=(a=Vd(a)).length,p=0,d=new Array(f),g=new Array(f),y=+r.apply(this,arguments),_=Math.min(Td,Math.max(-Td,i.apply(this,arguments)-y)),v=Math.min(Math.abs(_)/f,o.apply(this,arguments)),m=v*(_<0?-1:1);for(s=0;s<f;++s)(h=g[d[s]=s]=+t(a[s],s,a))>0&&(p+=h);for(null!=e?d.sort((function(t,n){return e(g[t],g[n])})):null!=n&&d.sort((function(t,e){return n(a[t],a[e])})),s=0,l=p?(_-f*m)/p:0;s<f;++s,y=c)u=d[s],c=y+((h=g[u])>0?h*l:0)+m,g[u]={data:a[u],index:s,value:h,startAngle:y,endAngle:c,padAngle:v};return g}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:Md(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Md(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Md(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Md(+t),a):o},a},areaRadial:ig,radialArea:ig,lineRadial:rg,radialLine:rg,pointRadial:og,link:pg,linkHorizontal:function(){return pg(ug)},linkVertical:function(){return pg(lg)},linkRadial:function(){const t=pg(cg);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},symbol:function(t,e){let n=null;function r(){let r;if(n||(n=r=bd()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return t="function"==typeof t?t:Md(t||yg),e="function"==typeof e?e:Md(void 0===e?64:+e),r.type=function(e){return arguments.length?(t="function"==typeof e?e:Md(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:Md(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},symbolsStroke:qg,symbolsFill:Gg,symbols:Gg,symbolAsterisk:gg,symbolCircle:yg,symbolCross:_g,symbolDiamond:xg,symbolDiamond2:bg,symbolPlus:Mg,symbolSquare:wg,symbolSquare2:Eg,symbolStar:Cg,symbolTriangle:Pg,symbolTriangle2:Ag,symbolWye:Fg,symbolX:zg,curveBasisClosed:function(t){return new Vg(t)},curveBasisOpen:function(t){return new Wg(t)},curveBasis:function(t){return new Ug(t)},curveBumpX:ug,curveBumpY:lg,curveBundle:Xg,curveCardinalClosed:Kg,curveCardinalOpen:ty,curveCardinal:Qg,curveCatmullRomClosed:oy,curveCatmullRomOpen:sy,curveCatmullRom:ry,curveLinearClosed:function(t){return new uy(t)},curveLinear:Yd,curveMonotoneX:function(t){return new py(t)},curveMonotoneY:function(t){return new dy(t)},curveNatural:function(t){return new yy(t)},curveStep:function(t){return new vy(t,.5)},curveStepAfter:function(t){return new vy(t,1)},curveStepBefore:function(t){return new vy(t,0)},stack:function(){var t=Md([]),e=xy,n=my,r=by;function i(i){var o,a,s=Array.from(t.apply(this,arguments),My),u=s.length,l=-1;for(const t of i)for(o=0,++l;o<u;++o)(s[o][l]=[0,+r(t,s[o].key,l,i)]).data=t;for(o=0,a=Vd(e(s));o<u;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:Md(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Md(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?xy:"function"==typeof t?t:Md(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?my:t,i):n},i},stackOffsetExpand:function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}my(t,e)}},stackOffsetDiverging:function(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,l=t[e[0]].length;u<l;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)},stackOffsetNone:my,stackOffsetSilhouette:function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}my(t,e)}},stackOffsetWiggle:function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],h=c[a][1]||0,f=(h-(c[a-1][1]||0))/2,p=0;p<s;++p){var d=t[e[p]];f+=(d[a][1]||0)-(d[a-1][1]||0)}u+=h,l+=f*h}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,my(t,e)}},stackOrderAppearance:wy,stackOrderAscending:Ny,stackOrderDescending:function(t){return Ny(t).reverse()},stackOrderInsideOut:function(t){var e,n,r=t.length,i=t.map(Sy),o=wy(t),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},stackOrderNone:xy,stackOrderReverse:function(t){return xy(t).reverse()}});function Cy(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var Oy=Cy("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Py=Cy("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ly=Cy("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ay=Cy("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ty=Cy("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ky=Cy("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Ry=Cy("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Dy=Cy("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Fy=Cy("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),zy=Cy("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Gy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function qy(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function jy(){}var By=.7,Uy=1/By,Vy="\\s*([+-]?\\d+)\\s*",Wy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xy=/^#([0-9a-f]{3,8})$/,$y=new RegExp(`^rgb\\(${Vy},${Vy},${Vy}\\)$`),Hy=new RegExp(`^rgb\\(${Yy},${Yy},${Yy}\\)$`),Qy=new RegExp(`^rgba\\(${Vy},${Vy},${Vy},${Wy}\\)$`),Jy=new RegExp(`^rgba\\(${Yy},${Yy},${Yy},${Wy}\\)$`),Ky=new RegExp(`^hsl\\(${Wy},${Yy},${Yy}\\)$`),Zy=new RegExp(`^hsla\\(${Wy},${Yy},${Yy},${Wy}\\)$`),t_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function e_(){return this.rgb().formatHex()}function n_(){return this.rgb().formatRgb()}function r_(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?i_(e):3===n?new u_(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?o_(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?o_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=$y.exec(t))?new u_(e[1],e[2],e[3],1):(e=Hy.exec(t))?new u_(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Qy.exec(t))?o_(e[1],e[2],e[3],e[4]):(e=Jy.exec(t))?o_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ky.exec(t))?d_(e[1],e[2]/100,e[3]/100,1):(e=Zy.exec(t))?d_(e[1],e[2]/100,e[3]/100,e[4]):t_.hasOwnProperty(t)?i_(t_[t]):"transparent"===t?new u_(NaN,NaN,NaN,0):null}function i_(t){return new u_(t>>16&255,t>>8&255,255&t,1)}function o_(t,e,n,r){return r<=0&&(t=e=n=NaN),new u_(t,e,n,r)}function a_(t){return t instanceof jy||(t=r_(t)),t?new u_((t=t.rgb()).r,t.g,t.b,t.opacity):new u_}function s_(t,e,n,r){return 1===arguments.length?a_(t):new u_(t,e,n,null==r?1:r)}function u_(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function l_(){return`#${p_(this.r)}${p_(this.g)}${p_(this.b)}`}function c_(){const t=h_(this.opacity);return`${1===t?"rgb(":"rgba("}${f_(this.r)}, ${f_(this.g)}, ${f_(this.b)}${1===t?")":`, ${t})`}`}function h_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function f_(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function p_(t){return((t=f_(t))<16?"0":"")+t.toString(16)}function d_(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new __(t,e,n,r)}function g_(t){if(t instanceof __)return new __(t.h,t.s,t.l,t.opacity);if(t instanceof jy||(t=r_(t)),!t)return new __;if(t instanceof __)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new __(a,s,u,t.opacity)}function y_(t,e,n,r){return 1===arguments.length?g_(t):new __(t,e,n,null==r?1:r)}function __(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function v_(t){return(t=(t||0)%360)<0?t+360:t}function m_(t){return Math.max(0,Math.min(1,t||0))}function x_(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Gy(jy,r_,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:e_,formatHex:e_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return g_(this).formatHsl()},formatRgb:n_,toString:n_}),Gy(u_,s_,qy(jy,{brighter(t){return t=null==t?Uy:Math.pow(Uy,t),new u_(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?By:Math.pow(By,t),new u_(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new u_(f_(this.r),f_(this.g),f_(this.b),h_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:l_,formatHex:l_,formatHex8:function(){return`#${p_(this.r)}${p_(this.g)}${p_(this.b)}${p_(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:c_,toString:c_})),Gy(__,y_,qy(jy,{brighter(t){return t=null==t?Uy:Math.pow(Uy,t),new __(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?By:Math.pow(By,t),new __(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new u_(x_(t>=240?t-240:t+120,i,r),x_(t,i,r),x_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new __(v_(this.h),m_(this.s),m_(this.l),h_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=h_(this.opacity);return`${1===t?"hsl(":"hsla("}${v_(this.h)}, ${100*m_(this.s)}%, ${100*m_(this.l)}%${1===t?")":`, ${t})`}`}}));const b_=Math.PI/180,M_=180/Math.PI,w_=.96422,E_=.82521,N_=4/29,S_=6/29,I_=3*S_*S_;function C_(t){if(t instanceof P_)return new P_(t.l,t.a,t.b,t.opacity);if(t instanceof F_)return z_(t);t instanceof u_||(t=a_(t));var e,n,r=k_(t.r),i=k_(t.g),o=k_(t.b),a=L_((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=L_((.4360747*r+.3850649*i+.1430804*o)/w_),n=L_((.0139322*r+.0971045*i+.7141733*o)/E_)),new P_(116*a-16,500*(e-a),200*(a-n),t.opacity)}function O_(t,e,n,r){return 1===arguments.length?C_(t):new P_(t,e,n,null==r?1:r)}function P_(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function L_(t){return t>.008856451679035631?Math.pow(t,1/3):t/I_+N_}function A_(t){return t>S_?t*t*t:I_*(t-N_)}function T_(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function k_(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function R_(t){if(t instanceof F_)return new F_(t.h,t.c,t.l,t.opacity);if(t instanceof P_||(t=C_(t)),0===t.a&&0===t.b)return new F_(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*M_;return new F_(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function D_(t,e,n,r){return 1===arguments.length?R_(t):new F_(t,e,n,null==r?1:r)}function F_(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function z_(t){if(isNaN(t.h))return new P_(t.l,0,0,t.opacity);var e=t.h*b_;return new P_(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Gy(P_,O_,qy(jy,{brighter(t){return new P_(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new P_(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new u_(T_(3.1338561*(e=w_*A_(e))-1.6168667*(t=1*A_(t))-.4906146*(n=E_*A_(n))),T_(-.9787684*e+1.9161415*t+.033454*n),T_(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Gy(F_,D_,qy(jy,{brighter(t){return new F_(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new F_(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return z_(this).rgb()}}));var G_=-.14861,q_=1.78277,j_=-.29227,B_=-.90649,U_=1.97294,V_=U_*B_,W_=U_*q_,Y_=q_*j_-B_*G_;function X_(t){if(t instanceof H_)return new H_(t.h,t.s,t.l,t.opacity);t instanceof u_||(t=a_(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Y_*r+V_*e-W_*n)/(Y_+V_-W_),o=r-i,a=(U_*(n-i)-j_*o)/B_,s=Math.sqrt(a*a+o*o)/(U_*i*(1-i)),u=s?Math.atan2(a,o)*M_-120:NaN;return new H_(u<0?u+360:u,s,i,t.opacity)}function $_(t,e,n,r){return 1===arguments.length?X_(t):new H_(t,e,n,null==r?1:r)}function H_(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Q_(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function J_(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Q_((n-r/e)*e,a,i,o,s)}}function K_(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Q_((n-r/e)*e,i,o,a,s)}}Gy(H_,$_,qy(jy,{brighter(t){return t=null==t?Uy:Math.pow(Uy,t),new H_(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?By:Math.pow(By,t),new H_(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*b_,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new u_(255*(e+n*(G_*r+q_*i)),255*(e+n*(j_*r+B_*i)),255*(e+n*(U_*r)),this.opacity)}}));var Z_=t=>()=>t;function tv(t,e){return function(n){return t+n*e}}function ev(t,e){var n=e-t;return n?tv(t,n>180||n<-180?n-360*Math.round(n/360):n):Z_(isNaN(t)?e:t)}function nv(t){return 1==(t=+t)?rv:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Z_(isNaN(e)?n:e)}}function rv(t,e){var n=e-t;return n?tv(t,n):Z_(isNaN(t)?e:t)}var iv=function t(e){var n=nv(e);function r(t,e){var r=n((t=s_(t)).r,(e=s_(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=rv(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ov(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=s_(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var av=ov(J_),sv=ov(K_);function uv(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function lv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cv(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=_v(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function hv(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function fv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pv(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=_v(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var dv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gv=new RegExp(dv.source,"g");function yv(t,e){var n,r,i,o=dv.lastIndex=gv.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=dv.exec(t))&&(r=gv.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:fv(n,r)})),o=gv.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function _v(t,e){var n,r=typeof e;return null==e||"boolean"===r?Z_(e):("number"===r?fv:"string"===r?(n=r_(e))?(e=n,iv):yv:e instanceof r_?iv:e instanceof Date?hv:lv(e)?uv:Array.isArray(e)?cv:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?pv:fv)(t,e)}function vv(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var mv,xv=180/Math.PI,bv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mv(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*xv,skewX:Math.atan(u)*xv,scaleX:a,scaleY:s}}function wv(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:fv(t,i)},{i:u-2,x:fv(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:fv(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:fv(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:fv(t,n)},{i:s-2,x:fv(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Ev=wv((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?bv:Mv(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Nv=wv((function(t){return null==t?bv:(mv||(mv=document.createElementNS("http://www.w3.org/2000/svg","g")),mv.setAttribute("transform",t),(t=mv.transform.baseVal.consolidate())?Mv((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):bv)}),", ",")",")");function Sv(t){return((t=Math.exp(t))+1/t)/2}var Iv=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],l=t[2],c=i[0],h=i[1],f=i[2],p=c-s,d=h-u,g=p*p+d*d;if(g<1e-12)a=Math.log(f/l)/e,o=function(t){return[s+t*p,u+t*d,l*Math.exp(e*t*a)]};else{var y=Math.sqrt(g),_=(f*f-l*l+r*g)/(2*l*n*y),v=(f*f-l*l-r*g)/(2*f*n*y),m=Math.log(Math.sqrt(_*_+1)-_),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-m)/e,o=function(t){var r=t*a,i=Sv(m),o=l/(n*y)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[s+o*p,u+o*d,l*i/Sv(e*r+m)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function Cv(t){return function(e,n){var r=t((e=y_(e)).h,(n=y_(n)).h),i=rv(e.s,n.s),o=rv(e.l,n.l),a=rv(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Ov=Cv(ev),Pv=Cv(rv);function Lv(t){return function(e,n){var r=t((e=D_(e)).h,(n=D_(n)).h),i=rv(e.c,n.c),o=rv(e.l,n.l),a=rv(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Av=Lv(ev),Tv=Lv(rv);function kv(t){return function e(n){function r(e,r){var i=t((e=$_(e)).h,(r=$_(r)).h),o=rv(e.s,r.s),a=rv(e.l,r.l),s=rv(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var Rv=kv(ev),Dv=kv(rv);function Fv(t,e){void 0===e&&(e=t,t=_v);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var zv=Object.freeze({__proto__:null,interpolate:_v,interpolateArray:function(t,e){return(lv(e)?uv:cv)(t,e)},interpolateBasis:J_,interpolateBasisClosed:K_,interpolateDate:hv,interpolateDiscrete:function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},interpolateHue:function(t,e){var n=ev(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},interpolateNumber:fv,interpolateNumberArray:uv,interpolateObject:pv,interpolateRound:vv,interpolateString:yv,interpolateTransformCss:Ev,interpolateTransformSvg:Nv,interpolateZoom:Iv,interpolateRgb:iv,interpolateRgbBasis:av,interpolateRgbBasisClosed:sv,interpolateHsl:Ov,interpolateHslLong:Pv,interpolateLab:function(t,e){var n=rv((t=O_(t)).l,(e=O_(e)).l),r=rv(t.a,e.a),i=rv(t.b,e.b),o=rv(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}},interpolateHcl:Av,interpolateHclLong:Tv,interpolateCubehelix:Rv,interpolateCubehelixLong:Dv,piecewise:Fv,quantize:function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}}),Gv=t=>av(t[t.length-1]),qv=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Cy),jv=Gv(qv),Bv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Cy),Uv=Gv(Bv),Vv=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Cy),Wv=Gv(Vv),Yv=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Cy),Xv=Gv(Yv),$v=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Cy),Hv=Gv($v),Qv=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Cy),Jv=Gv(Qv),Kv=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Cy),Zv=Gv(Kv),tm=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Cy),em=Gv(tm),nm=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Cy),rm=Gv(nm),im=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Cy),om=Gv(im),am=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Cy),sm=Gv(am),um=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Cy),lm=Gv(um),cm=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Cy),hm=Gv(cm),fm=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Cy),pm=Gv(fm),dm=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Cy),gm=Gv(dm),ym=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Cy),_m=Gv(ym),vm=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Cy),mm=Gv(vm),xm=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Cy),bm=Gv(xm),Mm=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Cy),wm=Gv(Mm),Em=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Cy),Nm=Gv(Em),Sm=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Cy),Im=Gv(Sm),Cm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Cy),Om=Gv(Cm),Pm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Cy),Lm=Gv(Pm),Am=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Cy),Tm=Gv(Am),km=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Cy),Rm=Gv(km),Dm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Cy),Fm=Gv(Dm),zm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Cy),Gm=Gv(zm);var qm=Dv($_(300,.5,0),$_(-240,.5,1)),jm=Dv($_(-100,.75,.35),$_(80,1.5,.8)),Bm=Dv($_(260,.75,.35),$_(80,1.5,.8)),Um=$_();var Vm=s_(),Wm=Math.PI/3,Ym=2*Math.PI/3;function Xm(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var $m=Xm(Cy("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Hm=Xm(Cy("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Qm=Xm(Cy("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Jm=Xm(Cy("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Km=Object.freeze({__proto__:null,schemeCategory10:Oy,schemeAccent:Py,schemeDark2:Ly,schemePaired:Ay,schemePastel1:Ty,schemePastel2:ky,schemeSet1:Ry,schemeSet2:Dy,schemeSet3:Fy,schemeTableau10:zy,interpolateBrBG:jv,schemeBrBG:qv,interpolatePRGn:Uv,schemePRGn:Bv,interpolatePiYG:Wv,schemePiYG:Vv,interpolatePuOr:Xv,schemePuOr:Yv,interpolateRdBu:Hv,schemeRdBu:$v,interpolateRdGy:Jv,schemeRdGy:Qv,interpolateRdYlBu:Zv,schemeRdYlBu:Kv,interpolateRdYlGn:em,schemeRdYlGn:tm,interpolateSpectral:rm,schemeSpectral:nm,interpolateBuGn:om,schemeBuGn:im,interpolateBuPu:sm,schemeBuPu:am,interpolateGnBu:lm,schemeGnBu:um,interpolateOrRd:hm,schemeOrRd:cm,interpolatePuBuGn:pm,schemePuBuGn:fm,interpolatePuBu:gm,schemePuBu:dm,interpolatePuRd:_m,schemePuRd:ym,interpolateRdPu:mm,schemeRdPu:vm,interpolateYlGnBu:bm,schemeYlGnBu:xm,interpolateYlGn:wm,schemeYlGn:Mm,interpolateYlOrBr:Nm,schemeYlOrBr:Em,interpolateYlOrRd:Im,schemeYlOrRd:Sm,interpolateBlues:Om,schemeBlues:Cm,interpolateGreens:Lm,schemeGreens:Pm,interpolateGreys:Tm,schemeGreys:Am,interpolatePurples:Rm,schemePurples:km,interpolateReds:Fm,schemeReds:Dm,interpolateOranges:Gm,schemeOranges:zm,interpolateCividis:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCubehelixDefault:qm,interpolateRainbow:function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Um.h=360*t-100,Um.s=1.5-1.5*e,Um.l=.8-.9*e,Um+""},interpolateWarm:jm,interpolateCool:Bm,interpolateSinebow:function(t){var e;return t=(.5-t)*Math.PI,Vm.r=255*(e=Math.sin(t))*e,Vm.g=255*(e=Math.sin(t+Wm))*e,Vm.b=255*(e=Math.sin(t+Ym))*e,Vm+""},interpolateTurbo:function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:$m,interpolateMagma:Hm,interpolateInferno:Qm,interpolatePlasma:Jm});function Zm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function tx(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const ex=Symbol("implicit");function nx(){var t=new qt,e=[],n=[],r=ex;function i(i){let o=t.get(i);if(void 0===o){if(r!==ex)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new qt;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return nx(e,n).unknown(r)},Zm.apply(i,arguments),i}function rx(){var t,e,n=nx().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,l=0,c=.5;function h(){var n=r().length,h=a<o,f=h?a:o,p=h?o:a;t=(p-f)/Math.max(1,n-u+2*l),s&&(t=Math.floor(t)),f+=(p-f-t*(n-u))*c,e=t*(1-u),s&&(f=Math.round(f),e=Math.round(e));var d=Ne(n).map((function(e){return f+t*e}));return i(h?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,h()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),h()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},n.copy=function(){return rx(r(),[o,a]).round(s).paddingInner(u).paddingOuter(l).align(c)},Zm.apply(h(),arguments)}function ix(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ix(e())},t}function ox(t){return+t}var ax=[0,1];function sx(t){return t}function ux(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function lx(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=ux(i,r),o=n(a,o)):(r=ux(r,i),o=n(o,a)),function(t){return o(r(t))}}function cx(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=ux(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Lt(t,e,1,r)-1;return o[n](i[n](e))}}function hx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fx(){var t,e,n,r,i,o,a=ax,s=ax,u=_v,l=sx;function c(){var t=Math.min(a.length,s.length);return l!==sx&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?cx:lx,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return h.invert=function(n){return l(e((o||(o=r(s,a.map(t),fv)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,ox),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=vv,c()},h.clamp=function(t){return arguments.length?(l=!!t||sx,c()):l!==sx},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}function px(){return fx()(sx,sx)}function dx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function gx(t){return(t=dx(Math.abs(t)))?t[1]:NaN}var yx,_x=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vx(t){if(!(e=_x.exec(t)))throw new Error("invalid format: "+t);var e;return new mx({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function mx(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function xx(t,e){var n=dx(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}vx.prototype=mx.prototype,mx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var bx={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>xx(100*t,e),r:xx,s:function(t,e){var n=dx(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(yx=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+dx(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Mx(t){return t}var wx,Ex,Nx,Sx=Array.prototype.map,Ix=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Cx(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Mx:(e=Sx.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Mx:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Sx.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=vx(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,g=t.comma,y=t.precision,_=t.trim,v=t.type;"n"===v?(g=!0,v="g"):bx[v]||(void 0===y&&(y=12),_=!0,v="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var m="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===f?o:/[%p]/.test(v)?u:"",b=bx[v],M=/[defgprs%]/.test(v);function w(t){var i,o,u,f=m,w=x;if("c"===v)w=b(t)+w,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),y),_&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),E&&0==+t&&"+"!==h&&(E=!1),f=(E?"("===h?h:l:"-"===h||"("===h?"":h)+f,w=("s"===v?Ix[8+yx/3]:"")+w+(E&&"("===h?")":""),M)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){w=(46===u?a+t.slice(i+1):t.slice(i))+w,t=t.slice(0,i);break}}g&&!p&&(t=r(t,1/0));var N=f.length+t.length+w.length,S=N<d?new Array(d-N+1).join(e):"";switch(g&&p&&(t=r(S+t,S.length?d-w.length:1/0),S=""),n){case"<":t=f+t+w+S;break;case"=":t=f+S+t+w;break;case"^":t=S.slice(0,N=S.length>>1)+f+t+w+S.slice(N);break;default:t=S+f+t+w}return s(t)}return y=void 0===y?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),w.toString=function(){return t+""},w}return{format:h,formatPrefix:function(t,e){var n=h(((t=vx(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(gx(e)/3))),i=Math.pow(10,-r),o=Ix[8+r/3];return function(t){return n(i*t)+o}}}}function Ox(t,e,n,r){var i,o=he(t,e,n);switch((r=vx(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gx(e)/3)))-gx(Math.abs(t)))}(o,a))||(r.precision=i),Nx(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,gx(e)-gx(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-gx(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Ex(r)}function Px(t){var e=t.domain;return t.ticks=function(t){var n=e();return le(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Ox(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=ce(u,l,n))===r)return o[a]=u,o[s]=l,e(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function Lx(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Ax(t){return Math.log(t)}function Tx(t){return Math.exp(t)}function kx(t){return-Math.log(-t)}function Rx(t){return-Math.exp(-t)}function Dx(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Fx(t){return(e,n)=>-t(-e,n)}function zx(t){const e=t(Ax,Tx),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?Dx:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=Fx(r),i=Fx(i),t(kx,Rx)):t(Ax,Tx),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const u=s<a;u&&([a,s]=[s,a]);let l,c,h=r(a),f=r(s);const p=null==t?10:+t;let d=[];if(!(o%1)&&f-h<p){if(h=Math.floor(h),f=Math.ceil(f),a>0){for(;h<=f;++h)for(l=1;l<o;++l)if(c=h<0?l/i(-h):l*i(h),!(c<a)){if(c>s)break;d.push(c)}}else for(;h<=f;++h)for(l=o-1;l>=1;--l)if(c=h>0?l/i(-h):l*i(h),!(c<a)){if(c>s)break;d.push(c)}2*d.length<p&&(d=le(a,s,p))}else d=le(h,f,Math.min(f-h,p)).map(i);return u?d.reverse():d},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=vx(n)).precision||(n.trim=!0),n=Ex(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n(Lx(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function Gx(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function qx(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function jx(t){var e=1,n=t(Gx(e),qx(e));return n.constant=function(n){return arguments.length?t(Gx(e=+n),qx(e)):e},Px(n)}function Bx(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ux(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Vx(t){return t<0?-t*t:t*t}function Wx(t){var e=t(sx,sx),n=1;function r(){return 1===n?t(sx,sx):.5===n?t(Ux,Vx):t(Bx(n),Bx(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Px(e)}function Yx(){var t=Wx(fx());return t.copy=function(){return hx(t,Yx()).exponent(t.exponent())},Zm.apply(t,arguments),t}function Xx(t){return Math.sign(t)*t*t}function $x(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}wx=Cx({thousands:",",grouping:[3],currency:["$",""]}),Ex=wx.format,Nx=wx.formatPrefix;var Hx=new Date,Qx=new Date;function Jx(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Jx((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Hx.setTime(+e),Qx.setTime(+r),t(Hx),t(Qx),Math.floor(n(Hx,Qx))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Kx=Jx((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Kx.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Jx((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Kx:null};var Zx=Kx;Kx.range;const tb=1e3,eb=6e4,nb=36e5,rb=864e5,ib=6048e5,ob=2592e6,ab=31536e6;var sb=Jx((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*tb)}),(function(t,e){return(e-t)/tb}),(function(t){return t.getUTCSeconds()})),ub=sb;sb.range;var lb=Jx((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*tb)}),(function(t,e){t.setTime(+t+e*eb)}),(function(t,e){return(e-t)/eb}),(function(t){return t.getMinutes()})),cb=lb;lb.range;var hb=Jx((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*tb-t.getMinutes()*eb)}),(function(t,e){t.setTime(+t+e*nb)}),(function(t,e){return(e-t)/nb}),(function(t){return t.getHours()})),fb=hb;hb.range;var pb=Jx((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*eb)/rb),(t=>t.getDate()-1)),db=pb;function gb(t){return Jx((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*eb)/ib}))}pb.range;var yb=gb(0),_b=gb(1),vb=gb(2),mb=gb(3),xb=gb(4),bb=gb(5),Mb=gb(6);yb.range,_b.range,vb.range,mb.range,xb.range,bb.range,Mb.range;var wb=Jx((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Eb=wb;wb.range;var Nb=Jx((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Nb.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jx((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Sb=Nb;Nb.range;var Ib=Jx((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*eb)}),(function(t,e){return(e-t)/eb}),(function(t){return t.getUTCMinutes()})),Cb=Ib;Ib.range;var Ob=Jx((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*nb)}),(function(t,e){return(e-t)/nb}),(function(t){return t.getUTCHours()})),Pb=Ob;Ob.range;var Lb=Jx((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/rb}),(function(t){return t.getUTCDate()-1})),Ab=Lb;function Tb(t){return Jx((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/ib}))}Lb.range;var kb=Tb(0),Rb=Tb(1),Db=Tb(2),Fb=Tb(3),zb=Tb(4),Gb=Tb(5),qb=Tb(6);kb.range,Rb.range,Db.range,Fb.range,zb.range,Gb.range,qb.range;var jb=Jx((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Bb=jb;jb.range;var Ub=Jx((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Ub.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jx((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Vb=Ub;function Wb(t,e,n,r,i,o){const a=[[ub,1,tb],[ub,5,5e3],[ub,15,15e3],[ub,30,3e4],[o,1,eb],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,nb],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,rb],[r,2,1728e5],[n,1,ib],[e,1,ob],[e,3,7776e6],[t,1,ab]];function s(e,n,r){const i=Math.abs(n-e)/r,o=Et((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(he(e/ab,n/ab,r));if(0===o)return Zx.every(Math.max(he(e,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}Ub.range;const[Yb,Xb]=Wb(Vb,Bb,kb,Ab,Pb,Cb),[$b,Hb]=Wb(Sb,Eb,yb,db,fb,cb);function Qb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Jb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Kb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Zb,tM,eM,nM={"-":"",_:" ",0:"0"},rM=/^\s*\d+/,iM=/^%/,oM=/[\\^$*+?|[\]().{}]/g;function aM(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function sM(t){return t.replace(oM,"\\$&")}function uM(t){return new RegExp("^(?:"+t.map(sM).join("|")+")","i")}function lM(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function cM(t,e,n){var r=rM.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function hM(t,e,n){var r=rM.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function fM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function pM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function dM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gM(t,e,n){var r=rM.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function yM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _M(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vM(t,e,n){var r=rM.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function mM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function xM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function bM(t,e,n){var r=rM.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function MM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function wM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function EM(t,e,n){var r=rM.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function NM(t,e,n){var r=rM.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function SM(t,e,n){var r=rM.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function IM(t,e,n){var r=iM.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function CM(t,e,n){var r=rM.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function OM(t,e,n){var r=rM.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function PM(t,e){return aM(t.getDate(),e,2)}function LM(t,e){return aM(t.getHours(),e,2)}function AM(t,e){return aM(t.getHours()%12||12,e,2)}function TM(t,e){return aM(1+db.count(Sb(t),t),e,3)}function kM(t,e){return aM(t.getMilliseconds(),e,3)}function RM(t,e){return kM(t,e)+"000"}function DM(t,e){return aM(t.getMonth()+1,e,2)}function FM(t,e){return aM(t.getMinutes(),e,2)}function zM(t,e){return aM(t.getSeconds(),e,2)}function GM(t){var e=t.getDay();return 0===e?7:e}function qM(t,e){return aM(yb.count(Sb(t)-1,t),e,2)}function jM(t){var e=t.getDay();return e>=4||0===e?xb(t):xb.ceil(t)}function BM(t,e){return t=jM(t),aM(xb.count(Sb(t),t)+(4===Sb(t).getDay()),e,2)}function UM(t){return t.getDay()}function VM(t,e){return aM(_b.count(Sb(t)-1,t),e,2)}function WM(t,e){return aM(t.getFullYear()%100,e,2)}function YM(t,e){return aM((t=jM(t)).getFullYear()%100,e,2)}function XM(t,e){return aM(t.getFullYear()%1e4,e,4)}function $M(t,e){var n=t.getDay();return aM((t=n>=4||0===n?xb(t):xb.ceil(t)).getFullYear()%1e4,e,4)}function HM(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+aM(e/60|0,"0",2)+aM(e%60,"0",2)}function QM(t,e){return aM(t.getUTCDate(),e,2)}function JM(t,e){return aM(t.getUTCHours(),e,2)}function KM(t,e){return aM(t.getUTCHours()%12||12,e,2)}function ZM(t,e){return aM(1+Ab.count(Vb(t),t),e,3)}function tw(t,e){return aM(t.getUTCMilliseconds(),e,3)}function ew(t,e){return tw(t,e)+"000"}function nw(t,e){return aM(t.getUTCMonth()+1,e,2)}function rw(t,e){return aM(t.getUTCMinutes(),e,2)}function iw(t,e){return aM(t.getUTCSeconds(),e,2)}function ow(t){var e=t.getUTCDay();return 0===e?7:e}function aw(t,e){return aM(kb.count(Vb(t)-1,t),e,2)}function sw(t){var e=t.getUTCDay();return e>=4||0===e?zb(t):zb.ceil(t)}function uw(t,e){return t=sw(t),aM(zb.count(Vb(t),t)+(4===Vb(t).getUTCDay()),e,2)}function lw(t){return t.getUTCDay()}function cw(t,e){return aM(Rb.count(Vb(t)-1,t),e,2)}function hw(t,e){return aM(t.getUTCFullYear()%100,e,2)}function fw(t,e){return aM((t=sw(t)).getUTCFullYear()%100,e,2)}function pw(t,e){return aM(t.getUTCFullYear()%1e4,e,4)}function dw(t,e){var n=t.getUTCDay();return aM((t=n>=4||0===n?zb(t):zb.ceil(t)).getUTCFullYear()%1e4,e,4)}function gw(){return"+0000"}function yw(){return"%"}function _w(t){return+t}function vw(t){return Math.floor(+t/1e3)}function mw(t){return new Date(t)}function xw(t){return t instanceof Date?+t:+new Date(+t)}function bw(t,e,n,r,i,o,a,s,u,l){var c=px(),h=c.invert,f=c.domain,p=l(".%L"),d=l(":%S"),g=l("%I:%M"),y=l("%I %p"),_=l("%a %d"),v=l("%b %d"),m=l("%B"),x=l("%Y");function b(t){return(u(t)<t?p:s(t)<t?d:a(t)<t?g:o(t)<t?y:r(t)<t?i(t)<t?_:v:n(t)<t?m:x)(t)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?f(Array.from(t,xw)):f().map(mw)},c.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?b:l(e)},c.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(Lx(n,t)):c},c.copy=function(){return hx(c,bw(t,e,n,r,i,o,a,s,u,l))},c}function Mw(){var t,e,n,r,i,o=0,a=1,s=sx,u=!1;function l(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),l):[o,a]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(s=t,l):s},l.range=c(_v),l.rangeRound=c(vv),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),l}}function ww(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ew(){var t=Wx(Mw());return t.copy=function(){return ww(t,Ew()).exponent(t.exponent())},tx.apply(t,arguments)}function Nw(){var t,e,n,r,i,o,a,s=0,u=.5,l=1,c=1,h=sx,f=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(c*t<c*e?r:i),h(f?Math.max(0,Math.min(1,t)):t))}function d(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,h=Fv(t,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,u,l]=a,t=o(s=+s),e=o(u=+u),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,p):[s,u,l]},p.clamp=function(t){return arguments.length?(f=!!t,p):f},p.interpolator=function(t){return arguments.length?(h=t,p):h},p.range=d(_v),p.rangeRound=d(vv),p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return o=a,t=a(s),e=a(u),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,p}}function Sw(){var t=Wx(Nw());return t.copy=function(){return ww(t,Sw()).exponent(t.exponent())},tx.apply(t,arguments)}!function(t){Zb=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=uM(i),c=lM(i),h=uM(o),f=lM(o),p=uM(a),d=lM(a),g=uM(s),y=lM(s),_=uM(u),v=lM(u),m={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:PM,e:PM,f:RM,g:YM,G:$M,H:LM,I:AM,j:TM,L:kM,m:DM,M:FM,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:_w,s:vw,S:zM,u:GM,U:qM,V:BM,w:UM,W:VM,x:null,X:null,y:WM,Y:XM,Z:HM,"%":yw},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:QM,e:QM,f:ew,g:fw,G:dw,H:JM,I:KM,j:ZM,L:tw,m:nw,M:rw,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:_w,s:vw,S:iw,u:ow,U:aw,V:uw,w:lw,W:cw,x:null,X:null,y:hw,Y:pw,Z:gw,"%":yw},b={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:xM,e:xM,f:SM,g:yM,G:gM,H:MM,I:MM,j:bM,L:NM,m:mM,M:wM,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:vM,Q:CM,s:OM,S:EM,u:hM,U:fM,V:pM,w:cM,W:dM,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:yM,Y:gM,Z:_M,"%":IM};function M(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=nM[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function w(t,e){return function(n){var r,i,o=Kb(1900,void 0,1);if(E(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Jb(Kb(o.y,0,1))).getUTCDay(),r=i>4||0===i?Rb.ceil(r):Rb(r),r=Ab.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Qb(Kb(o.y,0,1))).getDay(),r=i>4||0===i?_b.ceil(r):_b(r),r=db.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Jb(Kb(o.y,0,1)).getUTCDay():Qb(Kb(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Jb(o)):Qb(o)}}function E(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in nM?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return m.x=M(n,m),m.X=M(r,m),m.c=M(e,m),x.x=M(n,x),x.X=M(r,x),x.c=M(e,x),{format:function(t){var e=M(t+="",m);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=M(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t+="",!0);return e.toString=function(){return t},e}}}(t),tM=Zb.format,eM=Zb.utcFormat}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Iw=Object.freeze({__proto__:null,scaleBand:rx,scalePoint:function(){return ix(rx.apply(null,arguments).paddingInner(1))},scaleIdentity:function t(e){var n;function r(t){return null==t||isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,ox),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,ox):[0,1],Px(r)},scaleLinear:function t(){var e=px();return e.copy=function(){return hx(e,t())},Zm.apply(e,arguments),Px(e)},scaleLog:function t(){const e=zx(fx()).domain([1,10]);return e.copy=()=>hx(e,t()).base(e.base()),Zm.apply(e,arguments),e},scaleSymlog:function t(){var e=jx(fx());return e.copy=function(){return hx(e,t()).constant(e.constant())},Zm.apply(e,arguments)},scaleOrdinal:nx,scaleImplicit:ex,scalePow:Yx,scaleSqrt:function(){return Yx.apply(null,arguments).exponent(.5)},scaleRadial:function t(){var e,n=px(),r=[0,1],i=!1;function o(t){var r=$x(n(t));return isNaN(r)?e:i?Math.round(r):r}return o.invert=function(t){return n.invert(Xx(t))},o.domain=function(t){return arguments.length?(n.domain(t),o):n.domain()},o.range=function(t){return arguments.length?(n.range((r=Array.from(t,ox)).map(Xx)),o):r.slice()},o.rangeRound=function(t){return o.range(t).round(!0)},o.round=function(t){return arguments.length?(i=!!t,o):i},o.clamp=function(t){return arguments.length?(n.clamp(t),o):n.clamp()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t(n.domain(),r).round(i).clamp(n.clamp()).unknown(e)},Zm.apply(o,arguments),Px(o)},scaleQuantile:function t(){var e,n=[],r=[],i=[];function o(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=xe(n,t/e);return a}function a(t){return null==t||isNaN(t=+t)?e:r[Lt(i,t)]}return a.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},a.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(Mt),o()},a.range=function(t){return arguments.length?(r=Array.from(t),o()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return i.slice()},a.copy=function(){return t().domain(n).range(r).unknown(e)},Zm.apply(a,arguments)},scaleQuantize:function t(){var e,n=0,r=1,i=1,o=[.5],a=[0,1];function s(t){return null!=t&&t<=t?a[Lt(o,t,0,i)]:e}function u(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*n)/(i+1);return s}return s.domain=function(t){return arguments.length?([n,r]=t,n=+n,r=+r,u()):[n,r]},s.range=function(t){return arguments.length?(i=(a=Array.from(t)).length-1,u()):a.slice()},s.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return t().domain([n,r]).range(a).unknown(e)},Zm.apply(Px(s),arguments)},scaleThreshold:function t(){var e,n=[.5],r=[0,1],i=1;function o(t){return null!=t&&t<=t?r[Lt(n,t,0,i)]:e}return o.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t().domain(n).range(r).unknown(e)},Zm.apply(o,arguments)},scaleTime:function(){return Zm.apply(bw($b,Hb,Sb,Eb,yb,db,fb,cb,ub,tM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return Zm.apply(bw(Yb,Xb,Vb,Bb,kb,Ab,Pb,Cb,ub,eM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},scaleSequential:function t(){var e=Px(Mw()(sx));return e.copy=function(){return ww(e,t())},tx.apply(e,arguments)},scaleSequentialLog:function t(){var e=zx(Mw()).domain([1,10]);return e.copy=function(){return ww(e,t()).base(e.base())},tx.apply(e,arguments)},scaleSequentialPow:Ew,scaleSequentialSqrt:function(){return Ew.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function t(){var e=jx(Mw());return e.copy=function(){return ww(e,t()).constant(e.constant())},tx.apply(e,arguments)},scaleSequentialQuantile:function t(){var e=[],n=sx;function r(t){if(null!=t&&!isNaN(t=+t))return n((Lt(e,t,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Mt),r},r.interpolator=function(t){return arguments.length?(n=t,r):n},r.range=function(){return e.map(((t,r)=>n(r/(e.length-1))))},r.quantiles=function(t){return Array.from({length:t+1},((n,r)=>me(e,r/t)))},r.copy=function(){return t(n).domain(e)},tx.apply(r,arguments)},scaleDiverging:function t(){var e=Px(Nw()(sx));return e.copy=function(){return ww(e,t())},tx.apply(e,arguments)},scaleDivergingLog:function t(){var e=zx(Nw()).domain([.1,1,10]);return e.copy=function(){return ww(e,t()).base(e.base())},tx.apply(e,arguments)},scaleDivergingPow:Sw,scaleDivergingSqrt:function(){return Sw.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function t(){var e=jx(Nw());return e.copy=function(){return ww(e,t()).constant(e.constant())},tx.apply(e,arguments)},tickFormat:Ox});function Cw(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,l,c,h,f,p=t._root,d={data:r},g=t._x0,y=t._y0,_=t._x1,v=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((l=e>=(o=(g+_)/2))?g=o:_=o,(c=n>=(a=(y+v)/2))?y=a:v=a,i=p,!(p=p[h=c<<1|l]))return i[h]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,i?i[h]=d:t._root=d,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=e>=(o=(g+_)/2))?g=o:_=o,(c=n>=(a=(y+v)/2))?y=a:v=a}while((h=c<<1|l)==(f=(u>=a)<<1|s>=o));return i[f]=p,i[h]=d,t}function Ow(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Pw(t){return t[0]}function Lw(t){return t[1]}function Aw(t,e,n){var r=new Tw(null==e?Pw:e,null==n?Lw:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Tw(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function kw(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Rw=Aw.prototype=Tw.prototype;function Dw(t){return function(){return t}}function Fw(t){return 1e-6*(t()-.5)}function zw(t){return t.x+t.vx}function Gw(t){return t.y+t.vy}function qw(t){return t.index}function jw(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}Rw.copy=function(){var t,e,n=new Tw(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=kw(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=kw(e));return n},Rw.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Cw(this.cover(e,n),e,n,t)},Rw.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>h&&(h=i));if(u>c||l>h)return this;for(this.cover(u,l).cover(c,h),n=0;n<o;++n)Cw(this,a[n],s[n],t[n]);return this},Rw.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,l=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Rw.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Rw.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Rw.find=function(t,e,n){var r,i,o,a,s,u,l,c=this._x0,h=this._y0,f=this._x1,p=this._y1,d=[],g=this._root;for(g&&d.push(new Ow(g,c,h,f,p)),null==n?n=1/0:(c=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(g=u.node)||(i=u.x0)>f||(o=u.y0)>p||(a=u.x1)<c||(s=u.y1)<h))if(g.length){var y=(i+a)/2,_=(o+s)/2;d.push(new Ow(g[3],y,_,a,s),new Ow(g[2],i,_,y,s),new Ow(g[1],y,o,a,_),new Ow(g[0],i,o,y,_)),(l=(e>=_)<<1|t>=y)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-l],d[d.length-1-l]=u)}else{var v=t-+this._x.call(null,g.data),m=e-+this._y.call(null,g.data),x=v*v+m*m;if(x<n){var b=Math.sqrt(n=x);c=t-b,h=e-b,f=t+b,p=e+b,r=g.data}}return r},Rw.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,l,c,h,f,p=this._root,d=this._x0,g=this._y0,y=this._x1,_=this._y1;if(!p)return this;if(p.length)for(;;){if((l=o>=(s=(d+y)/2))?d=s:y=s,(c=a>=(u=(g+_)/2))?g=u:_=u,e=p,!(p=p[h=c<<1|l]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=i,this)},Rw.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Rw.root=function(){return this._root},Rw.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Rw.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Ow(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new Ow(n,l,c,o,a)),(n=u[2])&&s.push(new Ow(n,r,c,l,a)),(n=u[1])&&s.push(new Ow(n,l,i,o,c)),(n=u[0])&&s.push(new Ow(n,r,i,l,c))}return this},Rw.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Ow(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(a+u)/2,h=(s+l)/2;(o=i[0])&&n.push(new Ow(o,a,s,c,h)),(o=i[1])&&n.push(new Ow(o,c,s,u,h)),(o=i[2])&&n.push(new Ow(o,a,h,c,l)),(o=i[3])&&n.push(new Ow(o,c,h,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Rw.x=function(t){return arguments.length?(this._x=t,this):this._x},Rw.y=function(t){return arguments.length?(this._y=t,this):this._y};var Bw={value:()=>{}};function Uw(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Vw(r)}function Vw(t){this._=t}function Ww(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Yw(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Xw(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bw,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Vw.prototype=Uw.prototype={constructor:Vw,on:function(t,e){var n,r=this._,i=Ww(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Xw(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Xw(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Yw(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Vw(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var $w,Hw,Qw=0,Jw=0,Kw=0,Zw=0,tE=0,eE=0,nE="object"==typeof performance&&performance.now?performance:Date,rE="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function iE(){return tE||(rE(oE),tE=nE.now()+eE)}function oE(){tE=0}function aE(){this._call=this._time=this._next=null}function sE(t,e,n){var r=new aE;return r.restart(t,e,n),r}function uE(){tE=(Zw=nE.now())+eE,Qw=Jw=0;try{!function(){iE(),++Qw;for(var t,e=$w;e;)(t=tE-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qw}()}finally{Qw=0,function(){var t,e,n=$w,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:$w=e);Hw=t,cE(r)}(),tE=0}}function lE(){var t=nE.now(),e=t-Zw;e>1e3&&(eE-=e,Zw=t)}function cE(t){Qw||(Jw&&(Jw=clearTimeout(Jw)),t-tE>24?(t<1/0&&(Jw=setTimeout(uE,t-nE.now()-eE)),Kw&&(Kw=clearInterval(Kw))):(Kw||(Zw=nE.now(),Kw=setInterval(lE,1e3)),Qw=1,rE(uE)))}aE.prototype=sE.prototype={constructor:aE,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?iE():+n)+(null==e?0:+e),this._next||Hw===this||(Hw?Hw._next=this:$w=this,Hw=this),this._call=t,this._time=n,cE()},stop:function(){this._call&&(this._call=null,this._time=1/0,cE())}};const hE=4294967296;function fE(t){return t.x}function pE(t){return t.y}var dE=Math.PI*(3-Math.sqrt(5));var gE=Object.freeze({__proto__:null,forceCenter:function(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i},forceCollide:function(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,l,c,h,f,p=e.length,d=0;d<o;++d)for(a=Aw(e,zw,Gw).visitAfter(s),t=0;t<p;++t)u=e[t],h=n[u.index],f=h*h,l=u.x+u.vx,c=u.y+u.vy,a.visit(g);function g(t,e,n,o,a){var s=t.data,p=t.r,d=h+p;if(!s)return e>l+d||o<l-d||n>c+d||a<c-d;if(s.index>u.index){var g=l-s.x-s.vx,y=c-s.y-s.vy,_=g*g+y*y;_<d*d&&(0===g&&(_+=(g=Fw(r))*g),0===y&&(_+=(y=Fw(r))*y),_=(d-(_=Math.sqrt(_)))/_*i,u.vx+=(g*=_)*(d=(p*=p)/(f+p)),u.vy+=(y*=_)*d,s.vx-=g*(d=1-d),s.vy-=y*d)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Dw(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Dw(+e),u(),a):t},a},forceLink:function(t){var e,n,r,i,o,a,s=qw,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=Dw(30),c=1;function h(r){for(var i=0,s=t.length;i<c;++i)for(var u,l,h,f,p,d,g,y=0;y<s;++y)l=(u=t[y]).source,f=(h=u.target).x+h.vx-l.x-l.vx||Fw(a),p=h.y+h.vy-l.y-l.vy||Fw(a),f*=d=((d=Math.sqrt(f*f+p*p))-n[y])/d*r*e[y],p*=d,h.vx-=f*(g=o[y]),h.vy-=p*g,l.vx+=f*(g=1-g),l.vy+=p*g}function f(){if(r){var a,u,l=r.length,c=t.length,h=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(a=0,i=new Array(l);a<c;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=jw(h,u.source)),"object"!=typeof u.target&&(u.target=jw(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),p(),n=new Array(c),d()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,a=e,f()},h.links=function(e){return arguments.length?(t=e,f(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(u="function"==typeof t?t:Dw(+t),p(),h):u},h.distance=function(t){return arguments.length?(l="function"==typeof t?t:Dw(+t),d(),h):l},h},forceManyBody:function(){var t,e,n,r,i,o=Dw(-30),a=1,s=1/0,u=.81;function l(n){var i,o=t.length,a=Aw(t,fE,pE).visitAfter(h);for(r=n,i=0;i<o;++i)e=t[i],a.visit(f)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function h(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function f(t,o,l,c){if(!t.value)return!0;var h=t.x-e.x,f=t.y-e.y,p=c-o,d=h*h+f*f;if(p*p/u<d)return d<s&&(0===h&&(d+=(h=Fw(n))*h),0===f&&(d+=(f=Fw(n))*f),d<a&&(d=Math.sqrt(a*d)),e.vx+=h*t.value*r/d,e.vy+=f*t.value*r/d),!0;if(!(t.length||d>=s)){(t.data!==e||t.next)&&(0===h&&(d+=(h=Fw(n))*h),0===f&&(d+=(f=Fw(n))*f),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(p=i[t.data.index]*r/d,e.vx+=h*p,e.vy+=f*p)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,c()},l.strength=function(t){return arguments.length?(o="function"==typeof t?t:Dw(+t),c(),l):o},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.theta=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l},forceRadial:function(t,e,n){var r,i,o,a=Dw(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],l=u.x-e||1e-6,c=u.y-n||1e-6,h=Math.sqrt(l*l+c*c),f=(o[a]-h)*i[a]*t/h;u.vx+=l*f,u.vy+=c*f}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=Dw(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Dw(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Dw(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},forceSimulation:function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=sE(h),l=Uw("tick","end"),c=function(){let t=1;return()=>(t=(1664525*t+1013904223)%hE)/hE}();function h(){f(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function f(r){var u,l,c=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*dE;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),p(),e={tick:f,restart:function(){return u.restart(h),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(d),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=e-(s=t[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},forceX:function(t){var e,n,r,i=Dw(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Dw(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Dw(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Dw(+e),a(),o):t},o},forceY:function(t){var e,n,r,i=Dw(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Dw(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Dw(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Dw(+e),a(),o):t},o}});const yE=Object.assign({},Iw,bt,Iy);function _E(t,e){let n=e.type??"box",r=e.x?e.x:null,i=e.y?e.y:null,o=e.w??30,a=e.h??20,s=e.title?e.title:null,u=e.text?e.text:"leg_text",l=e.fontSize?e.fontSize:14,c=e.fontSize2?e.fontSize2:10,h=e.stroke?e.stroke:"black",f=e.fill?e.fill:"#CCCCCC",p=e.fillOpacity?e.fillOpacity:1,d=e.strokeWidth?e.strokeWidth:.5,g=e.txtcol?e.txtcol:"#363636";if(null!=r&&null!=i){let y=t.append("g").attr("class","bertinlegend"),_=0;null!=s&&(_=(s.split("\n").length+1)*l,y.append("g").selectAll("text").data(s.split("\n")).join("text").attr("x",r).attr("y",i).attr("font-size",`${l}px`).attr("dy",((t,e)=>e*l)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",g).text((t=>t))),"box"==n&&(y.append("rect").attr("x",r).attr("y",i+_).attr("height",a).attr("width",o).attr("fill",f).attr("stroke",h).attr("stroke-width",d).attr("fill-opacity",p),y.append("g").selectAll("text").data(u.split("\n")).join("text").attr("x",r+o+c/2).attr("y",i+a/2-c*u.split("\n").length/2+_).attr("font-size",`${c}px`).attr("dy",((t,e)=>e*c)).attr("fill",g).attr("text-anchor","start").attr("dominant-baseline","hanging").text((t=>t)));const v=["circle","cross","diamond","square","star","triangle","wye"];if(v.includes(n)){const t=e.symbol_size;y.append("path").attr("x",r).attr("y",i+_).attr("d",yE.symbol().size(t).type(yE.symbols[v.indexOf(n)])).attr("transform",`translate(${r+Math.sqrt(t)},${i+_})`).attr("fill",f).attr("stroke",h).attr("stroke-width",d).attr("fill-opacity",p),y.append("g").selectAll("text").data(u.split("\n")).join("text").attr("x",r+2*Math.sqrt(t)+c/2).attr("y",i+_).attr("font-size",`${c}px`).attr("dy",((t,e)=>e*c)).attr("fill",g).attr("text-anchor","start").attr("dominant-baseline","middle").text((t=>t))}}}const vE=Object.assign({},ke,Iw,bt);function mE(t,e){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.h?e.h:20,a=e.title?e.title:null,s=e.fontSize?e.fontSize:14,u=e.fontSize2?e.fontSize2:10,l=e.stroke?e.stroke:"black",c=e.fillOpacity?e.fillOpacity:1,h=e.strokeWidth?e.strokeWidth:.5,f=e.txtcol?e.txtcol:"#363636",p=e.breaks,d=e.colors,g=e.missing;const y=null!=g?d.length:-1,_=null==g?vE.reverse(p):[vE.reverse(p),g[0]].flat(),v=null==g?vE.reverse(d):[vE.reverse(d),g[1]].flat();if(null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),p=0;null!=a&&(p=(a.split("\n").length+1)*s,e.append("g").selectAll("text").data(a.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${s}px`).attr("dy",((t,e)=>e*s)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",f).text((t=>t))),e.selectAll("rect").data(v).join("rect").attr("x",n).attr("y",((t,e)=>r+p+(o+0)*e+(e===y?o/2:0))).attr("height",o).attr("width",i).attr("fill",(t=>t)).attr("stroke",l).attr("stroke-width",h).attr("fill-opacity",c),e.append("g").selectAll("text").data(_).join("text").attr("x",n+i+u/2).attr("y",r+p).attr("font-size",`${u}px`).attr("fill",f).attr("dy",((t,e)=>(o+0)*e)).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}const xE=Object.assign({},ke,Iw,bt);function bE(t,e){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.h?e.h:20,a=e.title?e.title:null,s=e.fontSize?e.fontSize:14,u=e.fontSize2?e.fontSize2:10,l=e.stroke?e.stroke:"black",c=e.fillOpacity?e.fillOpacity:1,h=e.strokeWidth?e.strokeWidth:.5,f=e.txtcol?e.txtcol:"#363636",p=e.types,d=e.colors,g=xE.scaleOrdinal().domain(p).range(d);if(null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),d=0;null!=a&&(d=(a.split("\n").length+1)*s,e.append("g").selectAll("text").data(a.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${s}px`).attr("dy",((t,e)=>e*s)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",f).text((t=>t))),e.selectAll("rect").data(p).join("rect").attr("x",n).attr("y",((t,e)=>r+d+(o+3)*e)).attr("height",o).attr("width",i).attr("fill",(t=>g(t))).attr("stroke",l).attr("stroke-width",h).attr("fill-opacity",c),e.append("g").selectAll("text").data(p).join("text").attr("x",n+i+u/2).attr("y",r+d+o/2).attr("font-size",`${u}px`).attr("fill",f).attr("dy",((t,e)=>(o+3)*e)).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}function ME(t,e){let n;return e>=0&&(n=+t.toFixed(e)),e<0&&(n=Math.round(t/+(1+"0".repeat(Math.abs(e))))*+(1+"0".repeat(Math.abs(e)))),null==e&&(n=t),n}Object.assign({},ke,Iw,bt);const wE=Object.assign({},ke,Iw,bt);const EE=Object.assign({},ke,Iw,bt);const NE=Object.assign({},ke);const SE=Object.assign({},ke);const IE=Object.assign({},ke);const CE=Object.assign({},ke);function OE({values:t,method:e,nb:n,precision:r,k:i,middle:o}){let a;switch(e){case"q6":s=(s=t).filter((t=>""!=t)).map((t=>+t)),a=6>s.length?null:[NE.quantile(s,0),NE.quantile(s,.05),NE.quantile(s,.25),NE.quantile(s,.5),NE.quantile(s,.75),NE.quantile(s,.95),NE.quantile(s,1)];break;case"quantile":a=function(t,e){if(t=t.filter((t=>""!=t)).map((t=>+t)),e>t.length)return null;const n=[],r=1/e;for(let i=0;i<=e;i++)n.push(SE.quantile(t,r*i));return n}(t,n);break;case"equal":a=function(t,e){if(t=t.filter((t=>""!=t)).map((t=>+t)),e>t.length)return null;const n=[IE.min(t),IE.max(t)],r=(n[1]-n[0])/e;let i=n[0];for(let t=0;t<e-1;t++)n.push(i+r),i+=r;return n.sort(IE.ascending)}(t,n);break;case"jenks":a=function(t,e){if(t=t.filter((t=>""!=t)).map((t=>+t)).sort((function(t,e){return t-e})),e>t.length)return null;let n=function(t,e){let n,r,i=[],o=[],a=0;for(n=0;n<t.length+1;n++){let t=[],n=[];for(r=0;r<e+1;r++)t.push(0),n.push(0);i.push(t),o.push(n)}for(n=1;n<e+1;n++)for(i[1][n]=1,o[1][n]=0,r=2;r<t.length+1;r++)o[r][n]=1/0;for(let n=2;n<t.length+1;n++){let s=0,u=0,l=0,c=0;for(let h=1;h<n+1;h++){let f=n-h+1,p=t[f-1];if(l++,s+=p,u+=p*p,a=u-s*s/l,c=f-1,0!==c)for(r=2;r<e+1;r++)o[n][r]>=a+o[c][r-1]&&(i[n][r]=f,o[n][r]=a+o[c][r-1])}i[n][1]=1,o[n][1]=a}return{lower_class_limits:i,variance_combinations:o}}(t,e);return function(t,e,n){let r=t.length-1,i=[],o=n;for(i[n]=t[t.length-1],i[0]=t[0];o>1;)i[o-1]=t[e[r][o]-2],r=e[r][o]-1,o--;return i}(t,n.lower_class_limits,e)}(t,n);break;case"msd":a=function(t,e=1,n=!1){t=t.filter((t=>""!=t)).map((t=>+t));const r=CE.min(t),i=CE.max(t),o=CE.mean(t),a=CE.deviation(t),s=[r,i];if(1==n){let t=o+e/2*a;for(;t<i;)s.push(t),t+=a*e;for(t=o-e/2*a;t>r;)s.push(t),t-=a*e}else{s.push(o);let t=o+a*e;for(;t<i;)s.push(t),t+=a*e;for(t=o-a*e;t>r;)s.push(t),t-=a*e}return s.sort(CE.ascending)}(t,i,o)}var s;return Number.isInteger(+r)?a.map((t=>function(t,e){let n;return e>=0&&(n=+t.toFixed(e)),e<0&&(n=Math.round(t/+(1+"0".repeat(Math.abs(e))))*+(1+"0".repeat(Math.abs(e)))),n}(t,r))):a}Object.assign({},ke,bt,Iw,Iy),Object.assign({},ke,bt,Iw,Iy);const PE=Object.assign({},Km,Iw,ke);function LE(t,e){if("string"==typeof e)return{getcol:t=>e};if("object"==typeof e&&"choro"==e.type){let n=e.values,r=e.colors??"Blues",i=e.nbreaks?e.nbreaks:5,o=e.breaks?e.breaks:null,a=e.k?e.k:1,s=!!e.middle&&e.middle,u=e.method?e.method:"quantile",l=e.col_missing?e.col_missing:"#f5f5f5",c=e.txt_missing?e.txt_missing:"No data",h=void 0!==e.leg_round?e.leg_round:void 0;"q6"==u&&(i=6);const f=t.map((t=>+t.properties[n])),p=f.filter((t=>null!=t&null!=t&&""!=t)),d=f.length==p.length?null:[c,l];o=null==o?OE({values:p,method:u,nb:i,k:a,middle:s,precision:h}):PE.sort(o),Array.isArray(r)||(r=PE[`scheme${r}`][o.length-1]);let g=[...o];return g.pop(),g.shift(),{getcol:PE.scaleThreshold(g,r).unknown(l),breaks:o,colors:r,missing:d}}if("object"==typeof e&&"typo"==e.type){let n=e.values,r=e.colors??"Tableau10",i=e.col_missing?e.col_missing:"#f5f5f5",o=e.txt_missing?e.txt_missing:"No data";const a=e.order??Array.from(new Set(t.map((t=>t.properties[n]))));let s=e.types??a.filter((t=>""!=t&&null!=t&&null!=t));return Array.isArray(r)?r.slice(0,s.length):r=PE[`scheme${r}`].slice(0,s.length),{getcol:PE.scaleOrdinal().domain(s).range(r).unknown(i),types:s.length==a.length?s:[s,o].flat(),colors:s.length==a.length?r:[r,i].flat()}}if("object"==typeof e&&"split"==e.type){let n=e.values,r=e.split??0,i=e.colors?e.colors:["#F25842","#4a7cd9"],o=e.col_missing?e.col_missing:"#f5f5f5",a=e.txt_missing?e.txt_missing:"No data";const s=t.map((t=>t.properties[n])),u=s.filter((t=>""!=t&&null!=t&&null!=t));return{getcol:t=>t>=r?i[0]:t<r?i[1]:null==t||""==t?o:void 0,types:s.length==u.length?[`>= ${r}`,`< ${r}`]:[[`>= ${r}`,`< ${r}`],a].flat(),colors:s.length==u.length?i:[i,o].flat()}}}const AE=Object.assign({},zv,Iw,ke);function TE(t,e){const n=e.type??"linear";if("number"==typeof e||"string"==typeof e)return{getthickness:()=>+e};if(0==t.length)return{getthickness:()=>0,valmax:0,sizemax:0};if("number"!=typeof e&&"string"!=typeof e&&"linear"==n){let r=e.k??10,i=e.values,o=e.fixmax??void 0,a=e.fixmin??0;if("geometry"in t[0]&&"properties"in t[0]&&(t=t.map((t=>t.properties))),"string"==typeof e||"number"==typeof e)return{getcol:t=>e};1==a&&(a=AE.min(t.map((t=>Math.abs(+t[i])))));const s=null==o?AE.max(t.map((t=>Math.abs(+t[i])))):o,u=AE.max(t.map((t=>Math.abs(+t[i]))));return{type:n,getthickness:AE.scaleLinear().domain([a,s]).range([0,r]),valmax:u,valmin:a,sizemax:AE.scaleLinear().domain([a,s]).range([0,r])(u)}}if("number"!=typeof e&&"string"!=typeof e&&"quali"==n){const t=e.categories,r=e.k??10,i=e.sizes??AE.quantize(AE.interpolate(1,r),t.length);return{type:n,categories:t,sizes:i,getthickness:AE.scaleOrdinal().domain(t).range(i).unknown(0)}}if("number"!=typeof e&&"string"!=typeof e&&"discr"==n){const r=e.values;let i=e.sizes,o=e.nbreaks??5,a=e.breaks??null,s=e.k??10,u=e.nbsd??1,l=e.middle??!1,c=e.method??"quantile";"q6"==c&&(o=6);const h=t.map((t=>+t.properties[r])).filter((t=>null!=t&&null!=t&&""!=t));a=null==a?OE({values:h,method:c,nb:o,k:u,middle:l}):AE.sort(a),null==i&&(i=AE.quantize(AE.interpolate(1,s),a.length-1));let f=[...a];return f.pop(),f.shift(),{type:n,breaks:a,sizes:i,getthickness:AE.scaleThreshold(f,i).unknown(0)}}}function kE(t,e,n,r,i){"object"==typeof n&&"choro"==n.type&&mE(e,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title?n.leg_title:n.values,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,breaks:LE(t.features,n).breaks,colors:LE(t.features,n).colors,missing:LE(t.features,n).missing}),"object"==typeof r&&"choro"==r.type&&mE(e,{x:r.leg_x,y:r.leg_y,w:r.leg_w,h:r.leg_h,stroke:r.leg_stroke,fillOpacity:r.leg_fillOpacity,strokeWidth:r.leg_strokeWidth,txtcol:r.leg_txtcol,title:r.leg_title?r.leg_title:r.values,fontSize:r.leg_fontSize,fontSize2:r.leg_fontSize2,breaks:LE(t.features,r).breaks,colors:LE(t.features,r).colors,missing:LE(t.features,r).missing}),"object"!=typeof n||"typo"!=n.type&&"split"!=n.type||bE(e,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title?n.leg_title:n.values,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,types:LE(t.features,n).types,colors:LE(t.features,n).colors}),"object"!=typeof r||"typo"!=r.type&&"split"!=r.type||bE(e,{x:r.leg_x,y:r.leg_y,w:r.leg_w,h:r.leg_h,stroke:r.leg_stroke,fillOpacity:r.leg_fillOpacity,strokeWidth:r.leg_strokeWidth,txtcol:r.leg_txtcol,title:r.leg_title?r.leg_title:r.values,fontSize:r.leg_fontSize,fontSize2:r.leg_fontSize2,types:LE(t.features,r).types,colors:LE(t.features,r).colors}),"object"!=typeof i||null==i.values||"linear"!=i.type&&null!=i.type||function(t,e){let n=e.x??null,r=e.y??null,i=e.valmax,o=e.valmin,a=e.sizemax,s=e.title??null,u=e.fontSize??14,l=e.fontSize2??10,c=e.fill??"none",h=e.stroke??"black",f=e.strokeWidth??.4,p=e.fillOpacity??1,d=e.txtcol??"#363636",g=e.w??75,y=e.round??void 0;if(null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),_=0;null!=s&&(_=(s.split("\n").length+1)*u,e.append("g").selectAll("text").data(s.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${u}px`).attr("dy",((t,e)=>e*u)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",d).text((t=>t))),e.append("path").attr("d",`M ${n},${r+_+a/2} ${n+g},${r+_} ${n+g},${r+_+a} Z `).attr("stroke",h).attr("fill",c).attr("stroke-width",f).attr("fill-opacity",p),e.append("text").attr("font-size",`${l}px`).attr("fill",d).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("x",n).attr("y",r+_+a/2+l/2).text(ME(o,y)),e.append("text").attr("font-size",`${l}px`).attr("fill",d).attr("text-anchor","end").attr("dominant-baseline","hanging").attr("x",n+g).attr("y",r+_+a+l/2).text(ME(i,y))}}(e,{x:i.leg_x,y:i.leg_y,valmax:TE(t.features,i).valmax,valmin:TE(t.features,i).valmin,sizemax:TE(t.features,i).sizemax,title:i.leg_title??i.values,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,fill:i.stroke,fillOpacity:i.fillOpacity,txtcol:i.leg_txtcol,w:i.leg_w,round:i.leg_round}),"object"==typeof i&&null!=i.values&&"discr"==i.type&&function(t,e){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.title??null,a=e.fontSize?e.fontSize:14,s=e.fontSize2?e.fontSize2:10,u=e.stroke?e.stroke:"black",l=e.strokeOpacity?e.strokeOpacity:1,c=e.txtcol?e.txtcol:"#363636",h=e.breaks,f=e.sizes,p=void 0!==e.round?e.round:void 0;if(f=wE.reverse(f),h=wE.reverse(h),null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),d=0;null!=o&&(d=(o.split("\n").length+1)*a,e.append("g").selectAll("text").data(o.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${a}px`).attr("dy",((t,e)=>e*a)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",c).text((t=>t)));const g=10;let y=[],_=0;for(let t=0;t<f.length;t++)y.push(r+d+_+f[t]/2+t*g),_+=f[t];let v=[];_=0;for(let t=0;t<h.length;t++)v.push(r+d+_-g/2),_+=f[t]+g;e.selectAll("line").data(f).join("line").attr("x1",n).attr("y1",((t,e)=>y[e])).attr("x2",n+i).attr("y2",((t,e)=>y[e])).attr("stroke",u).attr("stroke-opacity",l).attr("stroke-width",(t=>t)),e.append("g").selectAll("text").data(h).join("text").attr("x",n+i+s/2).attr("y",((t,e)=>v[e])).attr("font-size",`${s}px`).attr("fill",c).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>ME(t,p)))}}(e,{x:i.leg_x,y:i.leg_y,breaks:TE(t.features,i).breaks,sizes:TE(t.features,i).sizes,w:i.leg_w,title:i.leg_title??i.values,fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,stroke:i.stroke,strokeOpacity:i.strokeOpacity,txtcol:i.leg_txtcol,round:i.leg_round}),"object"==typeof i&&null!=i.values&&"quali"==i.type&&function(t,e){let n=e.x?e.x:null,r=e.y?e.y:null,i=e.w?e.w:30,o=e.title?e.title:null,a=e.fontSize?e.fontSize:14,s=e.fontSize2?e.fontSize2:10,u=e.stroke?e.stroke:"black",l=e.strokeOpacity?e.strokeOpacity:1,c=e.txtcol?e.txtcol:"#363636",h=e.categories,f=e.sizes;if(f=EE.reverse(f),h=EE.reverse(h),null!=n&&null!=r){let e=t.append("g").attr("class","bertinlegend"),p=0;null!=o&&(p=(o.split("\n").length+1)*a,e.append("g").selectAll("text").data(o.split("\n")).join("text").attr("x",n).attr("y",r).attr("font-size",`${a}px`).attr("dy",((t,e)=>e*a)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",c).text((t=>t)));const d=10;let g=[],y=0;for(let t=0;t<f.length;t++)g.push(r+p+y+f[t]/2+t*d),y+=f[t];e.selectAll("line").data(f).join("line").attr("x1",n).attr("y1",((t,e)=>g[e])).attr("x2",n+i).attr("y2",((t,e)=>g[e])).attr("stroke",u).attr("stroke-opacity",l).attr("stroke-width",(t=>t)),e.append("g").selectAll("text").data(h).join("text").attr("x",n+i+s/2).attr("y",((t,e)=>g[e])).attr("font-size",`${s}px`).attr("fill",c).attr("text-anchor","start").attr("dominant-baseline","central").text((t=>t))}}(e,{x:i.leg_x,y:i.leg_y,categories:TE(t.features,i).categories,sizes:TE(t.features,i).sizes,w:i.leg_w,title:i.leg_title??"Catgories",fontSize:i.leg_fontSize,fontSize2:i.leg_fontSize2,stroke:i.stroke,strokeOpacity:i.strokeOpacity,txtcol:i.leg_txtcol})}function RE(t,e,n){const r=.33*e,i=.25*n;return t[0]<r&&t[1]<i?"bottomright":t[0]>e-r&&t[1]<i?"bottomleft":t[0]<r&&t[1]>n-i?"topright":t[0]>e-r&&t[1]>n-i?"topleft":t[1]>n-i?"top":t[0]<r?"right":t[0]>e-r?"left":"bottom"}function DE(t,e){if(!e)return t.style("display","none");const n=1==Array.isArray(e.fields)?e.fields:[e.fields],r=e.fill??"#fcf7e6",i=e.strokeWidth??1,o=e.fillOpacity??1,a=e.strokeOpacity??1,s=e.stroke??"#4a4d4b",u=e.type??"bottom",l=n.length;let c=e.col??"#4d4545";Array.isArray(c)||(c=Array(l).fill(c));let h=e.fontWeight;null==h&&1==l&&(h=["bold"]),null==h&&l>1&&(h=["bold"].concat(Array(l-1).fill("normal"))),"string"==typeof h&&(h=Array(l).fill(h));let f=e.fontSize;null==f&&1==l&&(f=[18]),null==f&&l>1&&(f=[18].concat(Array(l-1).fill(12))),"number"==typeof f&&(f=Array(l).fill(f));let p=e.fontStyle;null==p&&(p=Array(l).fill("normal")),"string"==typeof p&&(p=Array(l).fill(p)),t.style("display",null).style("pointer-events","none").style("font","8px sans-serif");const d=t.selectAll("path").data([null]).join("path").attr("fill",r).attr("stroke",s).attr("stroke-width",i).attr("fill-opacity",o).attr("stroke-opacity",a),g=t.selectAll("text").data([null]).join("text").call((t=>t.selectAll("tspan").data(n).join("tspan").attr("x",0).attr("y",((t,e)=>`${f.slice(0,e+1).reduce(((t,e)=>t+e),0)+3*e}px`)).style("font-weight",((t,e)=>h[e])).style("font-size",((t,e)=>`${f[e]}px`)).style("font-style",((t,e)=>p[e])).style("fill",((t,e)=>c[e])).text((t=>t)))),{x:y,y:_,width:v,height:m}=g.node().getBBox();switch(u){case"bottom":g.attr("transform",`translate(${-v/2},${15-_})`),d.attr("d",`M${-v/2-10},5H-5l5,-5l5,5H${v/2+10}v${m+20}h-${v+20}z`);break;case"top":g.attr("transform",`translate(${-v/2},${-15-_-m})`),d.attr("d",`M${-v/2-10},-5H-5l5,5l5,-5H${v/2+10}v${-m-20}h-${v+20}z`);break;case"left":g.attr("transform",`translate(${-v-15},${-_-m/2})`),d.attr("d",`M0,0l-5,5v${m/2+5}h${-v-20}v${-m-20}h${v+20}v${m/2+5}z`);break;case"right":g.attr("transform",`translate(15,${-_-m/2})`),d.attr("d",`M0,0l5,5v${m/2+5}h${v+20}v${-m-20}h${-v-20}v${m/2+5}z`);break;case"topleft":g.attr("transform",`translate(${-v-10},${-15-_-m})`),d.attr("d",`M0,0v${-m-5-20}h${-v-20}v${m+20}h${v+15}z`);break;case"topright":g.attr("transform",`translate(10,${-15-_-m})`),d.attr("d",`M0,0v${-m-5-20}h${v+20}v${m+20}h${-v-15}z`);break;case"bottomleft":g.attr("transform",`translate(${-v-10},${15-_})`),d.attr("d",`M0,0v${+m+5+20}h${-v-20}v${-m-20}h${+v+15}z`);break;case"bottomright":g.attr("transform",`translate(10,${15-_})`),d.attr("d",`M0,0v${+m+5+20}h${v+20}v${-m-20}h${-v-15}z`)}}Object.assign({},bt);const FE=Object.assign({},ya);function zE(t,e=!0){t=JSON.parse(JSON.stringify(Yc(t)));let n=t.features.map((t=>(t.geometry.coordinates=FE.geoCentroid(1==e?"Polygon"==t.geometry.type?t:function(t){var e={},n=0;return t.geometry.coordinates.forEach((function(t){var r={type:"Polygon",coordinates:t},i=FE.geoArea(r);i>n&&(n=i,e=r)})),e}(t):t),t.geometry.type="Point",t)));return n}const GE=Object.assign({},bt,ya,Iy,Iw,Km,gE);function qE(t,e,n={},r,i,o){let a=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],s=Yc(n.geojson),u=n.fill??a[Math.floor(Math.random()*a.length)],l=n.strokeLinecap??"round",c=n.strokeLinejoin??"round",h=n.strokeDasharray??"none",f=n.stroke??"white",p=n.strokeWidth??.5,d=n.fillOpacity??1,g=n.strokeOpacity??1,y=!!n.tooltip&&n.tooltip;Array.isArray(y)&&(y={fields:y}),"string"==typeof y&&(y={fields:[y]});let _=n.symbol??"circle",v=n.symbol_size??40,m=n.symbol_iteration??200,x=n.symbol_shift??0;if("l"==$c(s)&&(f=n.stroke?n.stroke:a[Math.floor(Math.random()*a.length)],u=n.fill?n.fill:"none",p=n.strokeWidth?n.strokeWidth:1),"l"!=$c(s)&&"z"!=$c(s)||t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).selectAll("path").data(s.features).join("path").attr("d",GE.geoPath(e)).attr("fill",(t=>LE(s.features,u).getcol(t.properties[u.values]||void 0))).attr("stroke",(t=>LE(s.features,f).getcol(t.properties[f.values]||void 0))).attr("stroke-width",(t=>TE(s.features,p).getthickness(t.properties[p.values]||void 0))).attr("fill-opacity",d).attr("stroke-opacity",g).attr("stroke-linecap",l).attr("stroke-linejoin",c).attr("stroke-dasharray",h).on("touchmove mousemove",(function(e,n){y&&t.select("#info").call(DE,{fields:function(){const t=Array.isArray(y.fields)?y.fields:[y.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:y.fontWeight,fontSize:y.fontSize,fontStyle:y.fontStyle,fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,col:y.col,type:RE(GE.pointer(e,this),i,o)}),y&&(t.select("#info").attr("transform",`translate(${GE.pointer(e,this)})`),GE.select(this).attr("stroke-opacity",g-.3).attr("fill-opacity",d-.3).raise())})).on("touchend mouseleave",(function(){t.select("#info").call(DE,null),GE.select(this).attr("stroke-opacity",g).attr("fill-opacity",d).lower()})),"p"==$c(s)){n.leg_type=n.symbol?n.symbol:"circle";const r=GE.forceSimulation(s.features).force("x",GE.forceX((t=>e(t.geometry.coordinates)[0]))).force("y",GE.forceY((t=>e(t.geometry.coordinates)[1]))).force("collide",GE.forceCollide(Math.sqrt(v)/2+x/2));for(let t=0;t<m;t++)r.tick();const a=["circle","cross","diamond","square","star","triangle","wye"];t.append("g").selectAll("path").data(s.features).join("path").attr("d",GE.symbol().size(v).type(GE.symbols[a.indexOf(_)])).attr("transform",(t=>`translate(\n       ${x?t.x:e(t.geometry.coordinates)[0]},\n       ${x?t.y:e(t.geometry.coordinates)[1]})`)).attr("fill",(t=>LE(s.features,u).getcol(t.properties[u.values]||void 0))).attr("stroke",(t=>LE(s.features,f).getcol(t.properties[f.values]||void 0))).attr("stroke-width",(t=>TE(s.features,p).getthickness(t.properties[p.values]||void 0))).attr("fill-opacity",d).attr("stroke-opacity",g).attr("stroke-linecap",l).attr("stroke-linejoin",c).attr("stroke-dasharray",h).on("touchmove mousemove",(function(n,r){y&&t.select("#info").call(DE,{fields:function(){const t=Array.isArray(y.fields)?y.fields:[y.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${r.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:y.fontWeight,fontSize:y.fontSize,fontStyle:y.fontStyle,fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,col:y.col,type:RE(x?[r.x,r.y]:e(r.geometry.coordinates),i,o)}),y&&(t.select("#info").attr("transform",`translate(\n         ${x?r.x:e(r.geometry.coordinates)[0]},\n         ${x?r.y:e(r.geometry.coordinates)[1]})`),GE.select(this).attr("stroke-opacity",g-.3).attr("fill-opacity",d-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(DE,null),GE.select(this).attr("stroke-opacity",g).attr("fill-opacity",d)}))}kE(s,t,u,f,p),_E(t,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,symbol_size:v,type:n.leg_type,title:n.leg_title,text:n.leg_text,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity?n.leg_fillOpacity:d,fill:n.leg_fill?n.leg_fill:u,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol})}const jE=Object.assign({},ke,Iw,bt);const BE=Object.assign({},bt,Km,ke,ya,Iw,gE);function UE(t,e,n={},r,i,o){let a,s=["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],u=n.planar??!1,l=Yc(n.geojson),c=n.values,h=n.fixmax??void 0,f=n.k?n.k:50,p=n.fill?n.fill:s[Math.floor(Math.random()*s.length)],d=n.stroke?n.stroke:"white",g=n.strokeWidth?n.strokeWidth:.5,y=n.strokeDasharray??"none",_=n.strokeOpacity??1,v=n.fillOpacity?n.fillOpacity:1,m=!!n.dorling&&n.dorling,x=n.iteration?n.iteration:200,b=!!n.tooltip&&n.tooltip;Array.isArray(b)&&(b={fields:b}),"string"==typeof b&&(b={fields:[b]}),a="p"==$c(l)?l.features:zE(l);const M=null!=h?h:BE.max(a,(t=>Math.abs(+t.properties[c])));let w=BE.scaleSqrt([0,M],[0,f]);if(1==m){const t=BE.forceSimulation(a).force("x",BE.forceX((t=>u?t.geometry.coordinates[0]:e(t.geometry.coordinates)[0]))).force("y",BE.forceY((t=>u?t.geometry.coordinates[1]:e(t.geometry.coordinates)[1]))).force("collide",BE.forceCollide((t=>w(Math.abs(t.properties[c]))+TE(a,g).getthickness(t.properties[g.values]||0)/2)));for(let e=0;e<x;e++)t.tick()}t.append("g").selectAll("circle").data(a.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[c])).sort(((t,e)=>BE.descending(Math.abs(+t.properties[c]),Math.abs(+e.properties[c]))))).join("circle").attr("fill",(t=>LE(a,p).getcol(t.properties[p.values]||void 0))).attr("stroke",(t=>LE(a,d).getcol(t.properties[d.values]||void 0))).attr("stroke-width",(t=>TE(a,g).getthickness(t.properties[g.values]||void 0))).attr("fill-opacity",v).attr("stroke-dasharray",y).attr("stroke-opacity",_).attr("cx",(t=>m?t.x:u?t.geometry.coordinates[0]:e(t.geometry.coordinates)[0])).attr("cy",(t=>m?t.y:u?t.geometry.coordinates[1]:e(t.geometry.coordinates)[1])).attr("r",(t=>w(Math.abs(t.properties[c])))).on("touchmove mousemove",(function(e,n){b&&t.select("#info").call(DE,{fields:function(){const t=Array.isArray(b.fields)?b.fields:[b.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:b.fontWeight,fontSize:b.fontSize,fontStyle:b.fontStyle,fill:b.fill,stroke:b.stroke,strokeWidth:b.strokeWidth,fillOpacity:b.fillOpacity,strokeOpacity:b.strokeOpacity,col:b.col,type:RE(BE.pointer(e,this),i,o)}),b&&(t.select("#info").attr("transform",`translate(${BE.pointer(e,this)})`),BE.select(this).attr("stroke-opacity",_-.3).attr("fill-opacity",v-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(DE,null),BE.select(this).attr("stroke-opacity",_).attr("fill-opacity",v)})),kE(l,t,p,d,g);let E=a.map((t=>Math.abs(+t.properties[c]))),N=[BE.min(E),w.invert(w(BE.max(E))/3),w.invert(w(BE.max(E))/1.5),BE.max(E)];!function(t,e){let n=e.values,r=e.k?e.k:50,i=e.stroke?e.stroke:"black",o=e.fill?e.fill:"none",a=e.strokeWidth?e.strokeWidth:.8,s=e.txtcol?e.txtcol:"#363636",u=e.x?e.x:null,l=e.y?e.y:null,c=e.title?e.title:"Title, year\n(units)",h=e.fontSize?e.fontSize:14,f=e.fontSize2?e.fontSize2:10,p=e.round??void 0,d=e.fixmax;const g=null!=d?d:jE.max(n);let y=jE.scaleSqrt([0,g],[0,r]),_=y(jE.max(n));if(null!=u&&null!=l){let e=t.append("g").attr("class","bertinlegend");e.selectAll("circle").data(n.sort(jE.descending)).join("circle").attr("r",(t=>y(t))).attr("fill",o).attr("stroke",i).attr("stroke-width",a).attr("transform",(t=>`translate(${u+_},${l-y(t)+2*_+(c.split("\n").length+1)*h})`)),e.selectAll("line").data(n).join("line").attr("x1",u+_).attr("y1",(t=>l+2*_-2*y(t)+(c.split("\n").length+1)*h)).attr("x2",u+2*_+h).attr("y2",(t=>l+2*_-2*y(t)+(c.split("\n").length+1)*h)).attr("stroke",i).attr("stroke-width",a).attr("stroke-dasharray",2),e.append("g").selectAll("text").data(c.split("\n")).join("text").attr("x",u).attr("y",l).attr("font-size",`${h}px`).attr("dy",((t,e)=>e*h)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",s).text((t=>t)),e.append("g").selectAll("text").data(n).join("text").attr("x",u+2*_+h+f/2).attr("y",(t=>l+2*_-2*y(t)+(c.split("\n").length+1)*h)).attr("font-size",f).attr("dominant-baseline","central").attr("fill",s).text((t=>ME(t,p)))}}(t,{x:n.leg_x,y:n.leg_y,round:void 0!==n.leg_round?n.leg_round:void 0,k:f,fixmax:h,stroke:n.leg_stroke,fill:n.leg_fill,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol,title:n.leg_title,fontSize:n.leg_fontSize,fontSize2:n.leg_fontSize2,title:n.leg_title?n.leg_title:c,values:N})}var VE=6371008.8,WE={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*VE,kilometers:6371.0088,kilometres:6371.0088,meters:VE,metres:VE,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:VE/1852,radians:1,yards:6967335.223679999};function YE(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function XE(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function $E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function HE(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r,i=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o="Feature"===(r=e).type?r.geometry:r,a=o.type,s=e.bbox,u=o.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(u=[u]);for(var l=!1,c=0;c<u.length&&!l;c++)if(QE(i,u[c][0],n.ignoreBoundary)){for(var h=!1,f=1;f<u[c].length&&!h;)QE(i,u[c][f],!n.ignoreBoundary)&&(h=!0),f++;h||(l=!0)}return l}function QE(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!n;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(r=!r)}return r}const JE=Object.assign({},ke,ya,gc),KE=Object.assign({},Ac,Vc);function ZE(t,e,n={},r,i,o){n.geojson=function(t,e,n,r,i,o){let a=JE.range(0+i/2,r,i).reverse(),s=JE.range(0+i/2,n,i).map(((t,e)=>a.map((e=>[t,e])))).flat();const u=JE.geoProject(t,e),l=KE.topology({foo:u}),c=KE.merge(l,l.objects.foo.geometries);let h=[];s.forEach(((t,e)=>{HE(t,c)&&h.push(t)}));let f=[];u.features.forEach(((t,e)=>{h.forEach(((n,r)=>{HE(n,t)&&f.push([e,t.properties[o],n])}))}));const p=JE.rollup(f,(t=>t.length),(t=>t[0])),d=new Map(t.features.map(((t,e)=>[e,t.properties])));let g=[];return f.forEach((t=>{g.push({type:"Feature",properties:Object.assign(d.get(t[0]),{___value:+t[1]/p.get(t[0]),___count:p.get(t[0])}),geometry:{type:"Point",coordinates:t[2]}})})),{type:"FeatureCollection",features:g.sort(((t,e)=>JE.ascending(t.properties.dot_value,e.properties.dot_value)))}}(n.geojson,e,i,o,n.step??20,n.values),n.values="___value",n.planar=!0,UE(t,e,n,0,i,o)}const tN=Object.assign({},bt,ke,Iw,ya,gc);function eN(t,e,n={},r,i,o){let a=Yc(n.geojson),s=n.top_values,u=n.bottom_values,l=n.top_fill?n.top_fill:"#d64f4f",c=n.bottom_fill?n.bottom_fill:"#4fabd6",h=n.k?n.k:50,f=n.stroke?n.stroke:"white",p=n.strokeWidth?n.strokeWidth:.5,d=n.fillOpacity?n.fillOpacity:1,g=!!n.top_tooltip&&n.top_tooltip;Array.isArray(g)&&(g={fields:g}),"string"==typeof g&&(g={fields:[g]});let y=!!n.bottom_tooltip&&n.bottom_tooltip;Array.isArray(y)&&(y={fields:y}),"string"==typeof y&&(y={fields:[y]});let _=n.leg_x?n.leg_x:null,v=n.leg_y?n.leg_y:null,m=n.leg_fontSize?n.leg_fontSize:14,x=n.leg_fontSize2?n.leg_fontSize2:10,b=n.leg_round?n.leg_round:void 0,M=n.leg_txtcol?n.leg_txtcol:"#363636",w=n.leg_title?n.leg_title:"Title, year",E=n.leg_top_txt?n.leg_top_txt:s,N=n.leg_bottom_txt?n.leg_bottom_txt:u,S=n.leg_top_fill?n.leg_top_fill:l,I=n.leg_bottom_fill?n.leg_bottom_fill:c,C=n.leg_stroke?n.leg_stroke:M,O=n.leg_strokeWidth?n.leg_strokeWidth:.8;const P=zE(a).sort(((t,e)=>tN.descending(+t.properties[s],+e.properties[s]))).filter((t=>null!=t.geometry.coordinates)),L=tN.max(P,(t=>+t.properties[s])),A=tN.max(P,(t=>+t.properties[u]));let T=tN.scaleSqrt([0,Math.max(L,A)],[0,h]);for(let n=0;n<P.length;n++){const a=e(P[n].geometry.coordinates)[0],h=e(P[n].geometry.coordinates)[1],_=T(P[n].properties[s]),v=T(P[n].properties[u]),m=Math.max(_,v);t.append("circle").attr("cx",a).attr("cy",h).attr("r",_).style("fill",l).attr("stroke",f).attr("stroke-width",p).attr("clip-path","url(#top-clip_"+r+n+")").on("touchmove mousemove",(function(e,r){g&&t.select("#info").call(DE,{fields:function(){const t=Array.isArray(g.fields)?g.fields:[g.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${P[n].properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:g.fontWeight,fontSize:g.fontSize,fontStyle:g.fontStyle,fill:g.fill,stroke:g.stroke,strokeWidth:g.strokeWidth,fillOpacity:g.fillOpacity,strokeOpacity:g.strokeOpacity,col:g.col,type:RE(tN.pointer(e,this),i,o)}),g&&(t.select("#info").attr("transform",`translate(${tN.pointer(e,this)})`),tN.select(this).attr("stroke-opacity",strokeOpacity-.3).attr("fill-opacity",d-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(DE,null),tN.select(this).attr("stroke-opacity",strokeOpacity).attr("fill-opacity",d)})),t.append("clipPath").attr("id","top-clip_"+r+n).append("rect").attr("x",a-_-p).attr("y",h+-_-p).attr("height",_+p).attr("width",2*_+2*p),t.append("circle").attr("cx",a).attr("cy",h).attr("r",v).style("fill",c).attr("stroke",f).attr("stroke-width",p).attr("clip-path","url(#bottom-clip_"+r+n+")").on("touchmove mousemove",(function(e,r){y&&t.select("#info").call(DE,{fields:function(){const t=Array.isArray(y.fields)?y.fields:[y.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${P[n].properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:y.fontWeight,fontSize:y.fontSize,fontStyle:y.fontStyle,fill:y.fill,stroke:y.stroke,strokeWidth:y.strokeWidth,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,col:y.col,type:RE(tN.pointer(e,this),i,o)}),y&&(t.select("#info").attr("transform",`translate(${tN.pointer(e,this)})`),tN.select(this).attr("stroke-opacity",strokeOpacity-.3).attr("fill-opacity",d-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(DE,null),tN.select(this).attr("stroke-opacity",strokeOpacity).attr("fill-opacity",d)})),t.append("clipPath").attr("id","bottom-clip_"+r+n).append("rect").attr("x",a-v-p).attr("y",h).attr("height",v+p).attr("width",2*v+2*p).attr("fill","none").attr("stroke","red"),t.append("line").attr("x1",a-m).attr("x2",a+m).attr("y1",h).attr("y2",h).attr("stroke",f).attr("stroke-width",p)}if(null!=_&&null!=v){const e=30,n=3,i=T(Math.max(+L,+A));let o=t.append("g");const l=T(tN.max(P,(t=>+t.properties[s])));let c=P.map((t=>+t.properties[s])),h=[T.invert(l/3),T.invert(l/1.5),tN.max(c)];o.selectAll("circle").data(h.sort(tN.descending)).join("circle").attr("cx",_+i).attr("cy",v+l+(w.split("\n").length+1)*m).attr("r",(t=>T(t))).attr("fill",S).attr("stroke",C).attr("stroke-width",O).attr("clip-path","url(#legtop-clip_"+r+")"),o.append("clipPath").attr("id","legtop-clip_"+r).append("rect").attr("x",_-O+i-l).attr("y",v+(w.split("\n").length+1)*m-O).attr("height",l+O).attr("width",2*l+2*O),o.selectAll("line").data(h).join("line").attr("x1",_+i).attr("y1",(t=>v+(w.split("\n").length+1)*m+l-T(t))).attr("x2",_+2*i+m).attr("y2",(t=>v+(w.split("\n").length+1)*m+l-T(t))).attr("stroke",C).attr("stroke-width",O).attr("stroke-dasharray",2),o.selectAll("text").data(h).join("text").attr("x",_+2*i+m+x/2).attr("y",(t=>v+(w.split("\n").length+1)*m+l-T(t))).attr("font-size",x).attr("dominant-baseline","central").attr("fill",M).text((t=>void 0!==b||0!==b?t.toFixed(b):t));let f=t.append("g");const p=T(tN.max(P,(t=>+t.properties[u])));let d=a.features.map((t=>+t.properties[u])),g=[T.invert(p/3),T.invert(p/1.5),tN.max(d)];f.selectAll("circle").data(g.sort(tN.descending)).join("circle").attr("cx",_+i).attr("cy",v+l+(w.split("\n").length+1)*m+e).attr("r",(t=>T(t))).attr("fill",I).attr("stroke",C).attr("stroke-width",O).attr("clip-path","url(#legbottom-clip_"+r+")"),f.append("clipPath").attr("id","legbottom-clip_"+r).append("rect").attr("x",_-O+i-p).attr("y",v+(w.split("\n").length+1)*m+e+l).attr("height",p+O).attr("width",2*p+2*O),f.selectAll("line").data(g).join("line").attr("x1",_+i).attr("y1",(t=>v+(w.split("\n").length+1)*m+l+e+T(t))).attr("x2",_+2*i+m).attr("y2",(t=>v+(w.split("\n").length+1)*m+l+e+T(t))).attr("stroke",C).attr("stroke-width",O).attr("stroke-dasharray",2),f.selectAll("text").data(g).join("text").attr("x",_+2*i+m+x/2).attr("y",(t=>v+(w.split("\n").length+1)*m+l+e+T(t))).attr("font-size",x).attr("dominant-baseline","central").attr("fill",M).text((t=>void 0!==b||0!==b?t.toFixed(b):t));let y=t.append("g").attr("class","bertinlegend");y.append("line").attr("x1",_+i-l).attr("x2",_+i+l).attr("y1",v+(w.split("\n").length+1)*m+l).attr("y2",v+(w.split("\n").length+1)*m+l).attr("stroke",M).attr("stroke-width",O),y.append("line").attr("x1",_+i-p).attr("x2",_+i+p).attr("y1",v+(w.split("\n").length+1)*m+l+e).attr("y2",v+(w.split("\n").length+1)*m+l+e).attr("stroke",M).attr("stroke-width",O),y.append("g").selectAll("text").data(w.split("\n")).join("text").attr("x",_).attr("y",v).attr("font-size",`${m}px`).attr("dy",((t,e)=>e*m)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",M).text((t=>t)),y.append("text").attr("x",_+i).attr("y",v+(w.split("\n").length+1)*m+l+n).text(E).attr("fill",M).attr("font-size",`${x}px`).attr("text-anchor","middle").attr("dominant-baseline","hanging"),y.append("text").attr("x",_+i).attr("y",v+(w.split("\n").length+1)*m+l+e-n).text(N).attr("fill",M).attr("font-size",`${x}px`).attr("text-anchor","middle").attr("dominant-baseline","baseline")}}const nN=Object.assign({},bt,ya,gc);function rN(t,e,n={},r){let i=Yc(n.geojson),o=n.values,a=n.fill?n.fill:"white",s=n.stroke?n.stroke:"white",u=n.strokeWidth?n.strokeWidth:.5,l=n.fillOpacity?n.fillOpacity:1,c=i.features.filter((t=>null==t.properties[o]));"l"==$c(i)&&(s=n.stroke?n.stroke:"white",a=n.fill?n.fill:"none",u=n.strokeWidth?n.strokeWidth:1),t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).selectAll("path").data(c).join("path").attr("d",nN.geoPath(e)).attr("fill",a).attr("stroke",s).attr("stroke-width",u).attr("fill-opacity",l),_E(t,{x:n.leg_x,y:n.leg_y,w:n.leg_w,h:n.leg_h,text:n.leg_text?n.leg_text:"Missing data",fontSize:n.leg_fontSize2,stroke:n.leg_stroke,fillOpacity:n.leg_fillOpacity?n.leg_fillOpacity:l,fill:a,strokeWidth:n.leg_strokeWidth,txtcol:n.leg_txtcol})}const iN=Object.assign({},bt,ya,gc),oN=Object.assign({},Ac,Vc);function aN(t,e,n){if(null!==t)for(var r,i,o,a,s,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,_=0;_<y;_++){s=(c=!!(l=d?t.features[_].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var m=0,x=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var b=a.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,_,m,x))return!1;f++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,_,m,x))return!1;f++,"MultiPoint"===b&&m++}"LineString"===b&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,_,m,x))return!1;f++}"MultiLineString"===b&&m++,"Polygon"===b&&x++}"Polygon"===b&&m++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,_,m,x))return!1;f++}x++}m++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===aN(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function sN(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function uN(t,e){var n,r,i,o,a,s,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function lN(t){var e=[1/0,1/0,-1/0,-1/0];return aN(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function cN(t,e){void 0===e&&(e={});var n=lN(t);return function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!$E(t[0])||!$E(t[1]))throw new Error("coordinates must contain numbers");return YE({type:"Point",coordinates:t},e,n)}([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}lN.default=lN,"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var hN=function(){};hN.prototype.interfaces_=function(){return[]},hN.prototype.getClass=function(){return hN},hN.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var fN=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),pN=function(){},dN={MAX_VALUE:{configurable:!0}};pN.isNaN=function(t){return Number.isNaN(t)},pN.doubleToLongBits=function(t){return t},pN.longBitsToDouble=function(t){return t},pN.isInfinite=function(t){return!Number.isFinite(t)},dN.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(pN,dN);var gN=function(){},yN=function(){},_N=function(){};function vN(){}var mN=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},xN={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};mN.prototype.setOrdinate=function(t,e){switch(t){case mN.X:this.x=e;break;case mN.Y:this.y=e;break;case mN.Z:this.z=e;break;default:throw new fN("Invalid ordinate index: "+t)}},mN.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!hN.equalsWithTolerance(this.x,e.x,n)&&!!hN.equalsWithTolerance(this.y,e.y,n)}},mN.prototype.getOrdinate=function(t){switch(t){case mN.X:return this.x;case mN.Y:return this.y;case mN.Z:return this.z}throw new fN("Invalid ordinate index: "+t)},mN.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||pN.isNaN(this.z))&&pN.isNaN(t.z)},mN.prototype.equals=function(t){return t instanceof mN&&this.equals2D(t)},mN.prototype.equalInZ=function(t,e){return hN.equalsWithTolerance(this.z,t.z,e)},mN.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},mN.prototype.clone=function(){},mN.prototype.copy=function(){return new mN(this)},mN.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},mN.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},mN.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},mN.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+mN.hashCode(this.x))+mN.hashCode(this.y)},mN.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},mN.prototype.interfaces_=function(){return[gN,yN,vN]},mN.prototype.getClass=function(){return mN},mN.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=pN.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},xN.DimensionalComparator.get=function(){return bN},xN.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},xN.NULL_ORDINATE.get=function(){return pN.NaN},xN.X.get=function(){return 0},xN.Y.get=function(){return 1},xN.Z.get=function(){return 2},Object.defineProperties(mN,xN);var bN=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new fN("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};bN.prototype.compare=function(t,e){var n=t,r=e,i=bN.compare(n.x,r.x);if(0!==i)return i;var o=bN.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:bN.compare(n.z,r.z)},bN.prototype.interfaces_=function(){return[_N]},bN.prototype.getClass=function(){return bN},bN.compare=function(t,e){return t<e?-1:t>e?1:pN.isNaN(t)?pN.isNaN(e)?0:-1:pN.isNaN(e)?1:0};var MN=function(){};MN.prototype.create=function(){},MN.prototype.interfaces_=function(){return[]},MN.prototype.getClass=function(){return MN};var wN=function(){},EN={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};wN.prototype.interfaces_=function(){return[]},wN.prototype.getClass=function(){return wN},wN.toLocationSymbol=function(t){switch(t){case wN.EXTERIOR:return"e";case wN.BOUNDARY:return"b";case wN.INTERIOR:return"i";case wN.NONE:return"-"}throw new fN("Unknown location value: "+t)},EN.INTERIOR.get=function(){return 0},EN.BOUNDARY.get=function(){return 1},EN.EXTERIOR.get=function(){return 2},EN.NONE.get=function(){return-1},Object.defineProperties(wN,EN);var NN=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},SN=function(){},IN={LOG_10:{configurable:!0}};SN.prototype.interfaces_=function(){return[]},SN.prototype.getClass=function(){return SN},SN.log10=function(t){var e=Math.log(t);return pN.isInfinite(e)||pN.isNaN(e)?e:e/SN.LOG_10},SN.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},SN.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},SN.wrap=function(t,e){return t<0?e- -t%e:t%e},SN.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},SN.average=function(t,e){return(t+e)/2},IN.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(SN,IN);var CN=function(t){this.str=t};CN.prototype.append=function(t){this.str+=t},CN.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},CN.prototype.toString=function(t){return this.str};var ON=function(t){this.value=t};ON.prototype.intValue=function(){return this.value},ON.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ON.isNaN=function(t){return Number.isNaN(t)};var PN=function(){};PN.isWhitespace=function(t){return t<=32&&t>=0||127===t},PN.toUpperCase=function(t){return t.toUpperCase()};var LN=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},AN={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};LN.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},LN.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=LN.magnitude(n._hi),i=LN.TEN.pow(r);(n=n.divide(i)).gt(LN.TEN)?(n=n.divide(LN.TEN),r+=1):n.lt(LN.ONE)&&(n=n.multiply(LN.TEN),r-=1);for(var o=r+1,a=new CN,s=LN.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,a.append(h),n=n.subtract(LN.valueOf(l)).multiply(LN.TEN),c&&n.selfAdd(LN.TEN);var f=!0,p=LN.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return e[0]=r,a.toString()},LN.prototype.sqr=function(){return this.multiply(this)},LN.prototype.doubleValue=function(){return this._hi+this._lo},LN.prototype.subtract=function(){if(arguments[0]instanceof LN){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},LN.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},LN.prototype.isZero=function(){return 0===this._hi&&0===this._lo},LN.prototype.selfSubtract=function(){if(arguments[0]instanceof LN){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},LN.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},LN.prototype.min=function(t){return this.le(t)?this:t},LN.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof LN){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,h=null;return u=this._hi/n,h=(i=(l=LN.SPLIT*u)-(i=l-u))*(a=(h=LN.SPLIT*n)-(a=h-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,h=u+(l=(this._hi-c-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+l,this}},LN.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},LN.prototype.divide=function(){if(arguments[0]instanceof LN){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;n=(o=this._hi/t._hi)-(e=(a=LN.SPLIT*o)-(e=a-o)),u=e*(r=(u=LN.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var l=u=o+(a=(this._hi-s-u+this._lo-o*t._lo)/t._hi),c=o-u+a;return new LN(l,c)}if("number"==typeof arguments[0]){var h=arguments[0];return pN.isNaN(h)?LN.createNaN():LN.copy(this).selfDivide(h,0)}},LN.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},LN.prototype.pow=function(t){if(0===t)return LN.valueOf(1);var e=new LN(this),n=LN.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},LN.prototype.ceil=function(){if(this.isNaN())return LN.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new LN(t,e)},LN.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},LN.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},LN.prototype.setValue=function(){if(arguments[0]instanceof LN){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},LN.prototype.max=function(t){return this.ge(t)?this:t},LN.prototype.sqrt=function(){if(this.isZero())return LN.valueOf(0);if(this.isNegative())return LN.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=LN.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},LN.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof LN){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,g=null,y=null;p=this._hi+u,h=this._lo+l,d=p-(g=p-this._hi),f=h-(y=h-this._lo);var _=(c=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=l-y+(this._lo-f))+(g+(p-c))),v=g+(c-_);return this._hi=_,this._lo=v,this}},LN.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof LN){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=LN.SPLIT*this._hi)-this._hi,l=LN.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},LN.prototype.selfSqr=function(){return this.selfMultiply(this)},LN.prototype.floor=function(){if(this.isNaN())return LN.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new LN(t,e)},LN.prototype.negate=function(){return this.isNaN()?this:new LN(-this._hi,-this._lo)},LN.prototype.clone=function(){},LN.prototype.multiply=function(){if(arguments[0]instanceof LN){var t=arguments[0];return t.isNaN()?LN.createNaN():LN.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return pN.isNaN(e)?LN.createNaN():LN.copy(this).selfMultiply(e,0)}},LN.prototype.isNaN=function(){return pN.isNaN(this._hi)},LN.prototype.intValue=function(){return Math.trunc(this._hi)},LN.prototype.toString=function(){var t=LN.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},LN.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+LN.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+LN.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},LN.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=LN.SPLIT*n)-(i=a-n)),o=(s=LN.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new LN(u,n-u+a)},LN.prototype.toSciNotation=function(){if(this.isZero())return LN.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=LN.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},LN.prototype.abs=function(){return this.isNaN()?LN.NaN:this.isNegative()?this.negate():new LN(this)},LN.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},LN.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},LN.prototype.add=function(){if(arguments[0]instanceof LN){var t=arguments[0];return LN.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return LN.copy(this).selfAdd(e)}},LN.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof LN){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},LN.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},LN.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},LN.prototype.trunc=function(){return this.isNaN()?LN.NaN:this.isPositive()?this.floor():this.ceil()},LN.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},LN.prototype.interfaces_=function(){return[vN,gN,yN]},LN.prototype.getClass=function(){return LN},LN.sqr=function(t){return LN.valueOf(t).selfMultiply(t)},LN.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return LN.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new LN(e)}},LN.sqrt=function(t){return LN.valueOf(t).sqrt()},LN.parse=function(t){for(var e=0,n=t.length;PN.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new LN,a=0,s=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,PN.isDigit(l)){var c=l-"0";o.selfMultiply(LN.TEN),o.selfAdd(c),a++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=ON.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=LN.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=LN.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},LN.createNaN=function(){return new LN(pN.NaN,pN.NaN)},LN.copy=function(t){return new LN(t)},LN.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},LN.stringOfChar=function(t,e){for(var n=new CN,r=0;r<e;r++)n.append(t);return n.toString()},AN.PI.get=function(){return new LN(3.141592653589793,12246467991473532e-32)},AN.TWO_PI.get=function(){return new LN(6.283185307179586,24492935982947064e-32)},AN.PI_2.get=function(){return new LN(1.5707963267948966,6123233995736766e-32)},AN.E.get=function(){return new LN(2.718281828459045,14456468917292502e-32)},AN.NaN.get=function(){return new LN(pN.NaN,pN.NaN)},AN.EPS.get=function(){return 123259516440783e-46},AN.SPLIT.get=function(){return 134217729},AN.MAX_PRINT_DIGITS.get=function(){return 32},AN.TEN.get=function(){return LN.valueOf(10)},AN.ONE.get=function(){return LN.valueOf(1)},AN.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},AN.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(LN,AN);var TN=function(){},kN={DP_SAFE_EPSILON:{configurable:!0}};TN.prototype.interfaces_=function(){return[]},TN.prototype.getClass=function(){return TN},TN.orientationIndex=function(t,e,n){var r=TN.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=LN.valueOf(e.x).selfAdd(-t.x),o=LN.valueOf(e.y).selfAdd(-t.y),a=LN.valueOf(n.x).selfAdd(-e.x),s=LN.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},TN.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},TN.intersection=function(t,e,n,r){var i=LN.valueOf(r.y).selfSubtract(n.y).selfMultiply(LN.valueOf(e.x).selfSubtract(t.x)),o=LN.valueOf(r.x).selfSubtract(n.x).selfMultiply(LN.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=LN.valueOf(r.x).selfSubtract(n.x).selfMultiply(LN.valueOf(t.y).selfSubtract(n.y)),u=LN.valueOf(r.y).selfSubtract(n.y).selfMultiply(LN.valueOf(t.x).selfSubtract(n.x)),l=s.subtract(u).selfDivide(a).doubleValue(),c=LN.valueOf(t.x).selfAdd(LN.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=LN.valueOf(e.x).selfSubtract(t.x).selfMultiply(LN.valueOf(t.y).selfSubtract(n.y)),f=LN.valueOf(e.y).selfSubtract(t.y).selfMultiply(LN.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=LN.valueOf(n.y).selfAdd(LN.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new mN(c,d)},TN.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return TN.signum(a);r=i+o}else{if(!(i<0))return TN.signum(a);if(o>=0)return TN.signum(a);r=-i-o}var s=TN.DP_SAFE_EPSILON*r;return a>=s||-a>=s?TN.signum(a):2},TN.signum=function(t){return t>0?1:t<0?-1:0},kN.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(TN,kN);var RN=function(){},DN={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};DN.X.get=function(){return 0},DN.Y.get=function(){return 1},DN.Z.get=function(){return 2},DN.M.get=function(){return 3},RN.prototype.setOrdinate=function(t,e,n){},RN.prototype.size=function(){},RN.prototype.getOrdinate=function(t,e){},RN.prototype.getCoordinate=function(){},RN.prototype.getCoordinateCopy=function(t){},RN.prototype.getDimension=function(){},RN.prototype.getX=function(t){},RN.prototype.clone=function(){},RN.prototype.expandEnvelope=function(t){},RN.prototype.copy=function(){},RN.prototype.getY=function(t){},RN.prototype.toCoordinateArray=function(){},RN.prototype.interfaces_=function(){return[yN]},RN.prototype.getClass=function(){return RN},Object.defineProperties(RN,DN);var FN=function(){},zN=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(FN),GN=function(){};GN.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},GN.getProperty=function(t){return{"line.separator":"\n"}[t]};var qN=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof mN&&arguments[1]instanceof mN){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,y=f.x-h.x,_=h.x*f.y-f.x*h.y,v=p.y-d.y,m=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=y*x-m*_,this.y=v*_-g*x,this.w=g*m-v*y}};qN.prototype.getY=function(){var t=this.y/this.w;if(pN.isNaN(t)||pN.isInfinite(t))throw new zN;return t},qN.prototype.getX=function(){var t=this.x/this.w;if(pN.isNaN(t)||pN.isInfinite(t))throw new zN;return t},qN.prototype.getCoordinate=function(){var t=new mN;return t.x=this.getX(),t.y=this.getY(),t},qN.prototype.interfaces_=function(){return[]},qN.prototype.getClass=function(){return qN},qN.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-s*o,h=(o*l-u*a)/c,f=(s*a-i*l)/c;if(pN.isNaN(h)||pN.isInfinite(h)||pN.isNaN(f)||pN.isInfinite(f))throw new zN;return new mN(h,f)};var jN=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof mN){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},BN={serialVersionUID:{configurable:!0}};jN.prototype.getArea=function(){return this.getWidth()*this.getHeight()},jN.prototype.equals=function(t){if(!(t instanceof jN))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},jN.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new jN;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new jN(e,r,n,i)},jN.prototype.isNull=function(){return this._maxx<this._minx},jN.prototype.getMaxX=function(){return this._maxx},jN.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof mN){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof jN){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&(n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy)}},jN.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof jN){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof mN){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},jN.prototype.getMinY=function(){return this._miny},jN.prototype.getMinX=function(){return this._minx},jN.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof mN){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof jN){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},jN.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},jN.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},jN.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},jN.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},jN.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},jN.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},jN.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},jN.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},jN.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},jN.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof jN){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof mN){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},jN.prototype.centre=function(){return this.isNull()?null:new mN((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},jN.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof mN){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof jN){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},jN.prototype.getMaxY=function(){return this._maxy},jN.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},jN.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+mN.hashCode(this._minx))+mN.hashCode(this._maxx))+mN.hashCode(this._miny))+mN.hashCode(this._maxy)},jN.prototype.interfaces_=function(){return[gN,vN]},jN.prototype.getClass=function(){return jN},jN.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u)&&(!(c<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),!(l>u)&&!(c<s)))}},BN.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(jN,BN);var UN={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},VN=function(t){this.geometryFactory=t||new OI};VN.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=UN.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=UN.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],YN[n]&&(e=YN[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},VN.prototype.write=function(t){return this.extractGeometry(t)},VN.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!WN[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+WN[e].apply(this,[t])+")"};var WN={coordinate:function(t){return t.x+" "+t.y},point:function(t){return WN.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+WN.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(WN.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(WN.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+WN.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+WN.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+WN.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+WN.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},YN={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(UN.spaces);return this.geometryFactory.createPoint(new mN(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(UN.trimParens,"$1"),r.push(YN.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(UN.spaces),r.push(new mN(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(UN.spaces),r.push(new mN(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(UN.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(UN.trimParens,"$1"),r.push(YN.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(UN.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(UN.trimParens,"$1"),n=YN.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(UN.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(UN.trimParens,"$1"),r.push(YN.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},XN=function(t){this.parser=new VN(t)};XN.prototype.write=function(t){return this.parser.write(t)},XN.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $N=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),HN=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($N),QN=function(){};QN.prototype.interfaces_=function(){return[]},QN.prototype.getClass=function(){return QN},QN.shouldNeverReachHere=function(){if(0===arguments.length)QN.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new HN("Should never reach here"+(null!==t?": "+t:""))}},QN.isTrue=function(){var t;if(1===arguments.length)QN.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new HN:new HN(t)},QN.equals=function(){var t,e,n;if(2===arguments.length)QN.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new HN("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var JN=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new mN,this._intPt[1]=new mN,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},KN={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};JN.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},JN.prototype.getTopologySummary=function(){var t=new CN;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},JN.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},JN.prototype.getIntersectionNum=function(){return this._result},JN.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},JN.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},JN.prototype.setPrecisionModel=function(t){this._precisionModel=t},JN.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},JN.prototype.getIntersection=function(t){return this._intPt[t]},JN.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},JN.prototype.hasIntersection=function(){return this._result!==JN.NO_INTERSECTION},JN.prototype.getEdgeDistance=function(t,e){return JN.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},JN.prototype.isCollinear=function(){return this._result===JN.COLLINEAR_INTERSECTION},JN.prototype.toString=function(){return XN.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+XN.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},JN.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},JN.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},JN.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},JN.prototype.interfaces_=function(){return[]},JN.prototype.getClass=function(){return JN},JN.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return QN.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},JN.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return QN.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},KN.DONT_INTERSECT.get=function(){return 0},KN.DO_INTERSECT.get=function(){return 1},KN.COLLINEAR.get=function(){return 2},KN.NO_INTERSECTION.get=function(){return 0},KN.POINT_INTERSECTION.get=function(){return 1},KN.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(JN,KN);var ZN=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new jN(this._inputLines[0][0],this._inputLines[0][1]),n=new jN(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,jN.intersects(n,r,e)&&0===nS.orientationIndex(n,r,e)&&0===nS.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=qN.intersection(t,n,r,i)}catch(a){if(!(a instanceof zN))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new mN(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=TN.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);GN.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&GN.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new mN(t),o=new mN(e),a=new mN(n),s=new mN(r),u=new mN;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=jN.intersects(e,n,r),a=jN.intersects(e,n,i),s=jN.intersects(r,i,e),u=jN.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>l?o:l)+(s<h?s:h))/2,d=((a>c?a:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!jN.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=nS.orientationIndex(e,n,r),a=nS.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=nS.orientationIndex(r,i,e),u=nS.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new mN(r):0===a?this._intPt[0]=new mN(i):0===s?this._intPt[0]=new mN(e):0===u&&(this._intPt[0]=new mN(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=nS.distancePointLine(t,n,r),a=nS.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=nS.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=nS.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(JN),tS=function(){};tS.prototype.interfaces_=function(){return[]},tS.prototype.getClass=function(){return tS},tS.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return tS.signOfDet2x2(r,i,o,a)},tS.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var eS=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};eS.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=tS.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},eS.prototype.isPointInPolygon=function(){return this.getLocation()!==wN.EXTERIOR},eS.prototype.getLocation=function(){return this._isPointOnSegment?wN.BOUNDARY:this._crossingCount%2==1?wN.INTERIOR:wN.EXTERIOR},eS.prototype.isOnSegment=function(){return this._isPointOnSegment},eS.prototype.interfaces_=function(){return[]},eS.prototype.getClass=function(){return eS},eS.locatePointInRing=function(){if(arguments[0]instanceof mN&&NN(arguments[1],RN)){for(var t=arguments[0],e=arguments[1],n=new eS(t),r=new mN,i=new mN,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof mN&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new eS(a),l=1;l<s.length;l++){var c=s[l],h=s[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var nS=function(){},rS={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};nS.prototype.interfaces_=function(){return[]},nS.prototype.getClass=function(){return nS},nS.orientationIndex=function(t,e,n){return TN.orientationIndex(t,e,n)},nS.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,a=t[r-1].y;e+=i*(a-o)}return e/2}if(NN(arguments[0],RN)){var s=arguments[0],u=s.size();if(u<3)return 0;var l=new mN,c=new mN,h=new mN;s.getCoordinate(0,c),s.getCoordinate(1,h);var f=c.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)l.y=c.y,c.x=h.x,c.y=h.y,s.getCoordinate(d+1,h),h.x-=f,p+=c.x*(l.y-h.y);return p/2}},nS.distanceLineLine=function(t,e,n,r){if(t.equals(e))return nS.distancePointLine(t,n,r);if(n.equals(r))return nS.distancePointLine(r,t,e);var i=!1;if(jN.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?SN.min(nS.distancePointLine(t,n,r),nS.distancePointLine(e,n,r),nS.distancePointLine(n,t,e),nS.distancePointLine(r,t,e)):0},nS.isPointInRing=function(t,e){return nS.locatePointInRing(t,e)!==wN.EXTERIOR},nS.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new mN;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n},nS.isCCW=function(t){var e=t.length-1;if(e<3)throw new fN("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],l=t[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=nS.computeOrientation(u,n,l),h=!1;return h=0===c?u.x>l.x:c>0,h},nS.locatePointInRing=function(t,e){return eS.locatePointInRing(t,e)},nS.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},nS.computeOrientation=function(t,e,n){return nS.orientationIndex(t,e,n)},nS.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new fN("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=nS.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(c)*Math.sqrt(u)}},nS.isOnLine=function(t,e){for(var n=new ZN,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},rS.CLOCKWISE.get=function(){return-1},rS.RIGHT.get=function(){return nS.CLOCKWISE},rS.COUNTERCLOCKWISE.get=function(){return 1},rS.LEFT.get=function(){return nS.COUNTERCLOCKWISE},rS.COLLINEAR.get=function(){return 0},rS.STRAIGHT.get=function(){return nS.COLLINEAR},Object.defineProperties(nS,rS);var iS=function(){};iS.prototype.filter=function(t){},iS.prototype.interfaces_=function(){return[]},iS.prototype.getClass=function(){return iS};var oS=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},aS={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};oS.prototype.isGeometryCollection=function(){return this.getSortIndex()===oS.SORTINDEX_GEOMETRYCOLLECTION},oS.prototype.getFactory=function(){return this._factory},oS.prototype.getGeometryN=function(t){return this},oS.prototype.getArea=function(){return 0},oS.prototype.isRectangle=function(){return!1},oS.prototype.equals=function(){if(arguments[0]instanceof oS){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof oS))return!1;var n=e;return this.equalsExact(n)}},oS.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},oS.prototype.geometryChanged=function(){this.apply(oS.geometryChangedFilter)},oS.prototype.geometryChangedAction=function(){this._envelope=null},oS.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},oS.prototype.getLength=function(){return 0},oS.prototype.getNumGeometries=function(){return 1},oS.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},oS.prototype.getUserData=function(){return this._userData},oS.prototype.getSRID=function(){return this._SRID},oS.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},oS.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===oS.SORTINDEX_GEOMETRYCOLLECTION)throw new fN("This method does not support GeometryCollection arguments")},oS.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},oS.prototype.norm=function(){var t=this.copy();return t.normalize(),t},oS.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},oS.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new jN(this._envelope)},oS.prototype.setSRID=function(t){this._SRID=t},oS.prototype.setUserData=function(t){this._userData=t},oS.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},oS.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},oS.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===oS.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===oS.SORTINDEX_MULTIPOINT||this.getSortIndex()===oS.SORTINDEX_MULTILINESTRING||this.getSortIndex()===oS.SORTINDEX_MULTIPOLYGON},oS.prototype.interfaces_=function(){return[yN,gN,vN]},oS.prototype.getClass=function(){return oS},oS.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},oS.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},aS.serialVersionUID.get=function(){return 0x799ea46522854c00},aS.SORTINDEX_POINT.get=function(){return 0},aS.SORTINDEX_MULTIPOINT.get=function(){return 1},aS.SORTINDEX_LINESTRING.get=function(){return 2},aS.SORTINDEX_LINEARRING.get=function(){return 3},aS.SORTINDEX_MULTILINESTRING.get=function(){return 4},aS.SORTINDEX_POLYGON.get=function(){return 5},aS.SORTINDEX_MULTIPOLYGON.get=function(){return 6},aS.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},aS.geometryChangedFilter.get=function(){return sS},Object.defineProperties(oS,aS);var sS=function(){};sS.interfaces_=function(){return[iS]},sS.filter=function(t){t.geometryChangedAction()};var uS=function(){};uS.prototype.filter=function(t){},uS.prototype.interfaces_=function(){return[]},uS.prototype.getClass=function(){return uS};var lS=function(){},cS={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};lS.prototype.isInBoundary=function(t){},lS.prototype.interfaces_=function(){return[]},lS.prototype.getClass=function(){return lS},cS.Mod2BoundaryNodeRule.get=function(){return hS},cS.EndPointBoundaryNodeRule.get=function(){return fS},cS.MultiValentEndPointBoundaryNodeRule.get=function(){return pS},cS.MonoValentEndPointBoundaryNodeRule.get=function(){return dS},cS.MOD2_BOUNDARY_RULE.get=function(){return new hS},cS.ENDPOINT_BOUNDARY_RULE.get=function(){return new fS},cS.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new pS},cS.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new dS},cS.OGC_SFS_BOUNDARY_RULE.get=function(){return lS.MOD2_BOUNDARY_RULE},Object.defineProperties(lS,cS);var hS=function(){};hS.prototype.isInBoundary=function(t){return t%2==1},hS.prototype.interfaces_=function(){return[lS]},hS.prototype.getClass=function(){return hS};var fS=function(){};fS.prototype.isInBoundary=function(t){return t>0},fS.prototype.interfaces_=function(){return[lS]},fS.prototype.getClass=function(){return fS};var pS=function(){};pS.prototype.isInBoundary=function(t){return t>1},pS.prototype.interfaces_=function(){return[lS]},pS.prototype.getClass=function(){return pS};var dS=function(){};dS.prototype.isInBoundary=function(t){return 1===t},dS.prototype.interfaces_=function(){return[lS]},dS.prototype.getClass=function(){return dS};var gS=function(){};function yS(t){this.message=t||""}gS.prototype.add=function(){},gS.prototype.addAll=function(){},gS.prototype.isEmpty=function(){},gS.prototype.iterator=function(){},gS.prototype.size=function(){},gS.prototype.toArray=function(){},gS.prototype.remove=function(){},yS.prototype=new Error,yS.prototype.name="IndexOutOfBoundsException";var _S=function(){};_S.prototype.hasNext=function(){},_S.prototype.next=function(){},_S.prototype.remove=function(){};var vS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(gS);function mS(t){this.message=t||""}mS.prototype=new Error,mS.prototype.name="NoSuchElementException";var xS=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof gS&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,gS]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new bS(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new yS;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(vS),bS=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new mS;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(_S),MS=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],i=!1,o=n.iterator();o.hasNext();)e.add(o.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof mN&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];if(!a&&this.size()>=1){var s=this.get(this.size()-1);if(s.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<c.length;p++)e.add(c[p],h);else for(var d=c.length-1;d>=0;d--)e.add(c[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof mN){var g=arguments[0],y=arguments[1],_=arguments[2];if(!_){var v=this.size();if(v>0){if(g>0){var m=this.get(g-1);if(m.equals2D(y))return null}if(g<v){var x=this.get(g);if(x.equals2D(y))return null}}}t.prototype.add.call(this,g,y)}}else if(4===arguments.length){var b=arguments[0],M=arguments[1],w=arguments[2],E=arguments[3],N=1;w>E&&(N=-1);for(var S=w;S!==E;S+=N)e.add(b[S],M);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new mN(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(xS),wS=function(){},ES={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};ES.ForwardComparator.get=function(){return NS},ES.BidirectionalComparator.get=function(){return SS},ES.coordArrayType.get=function(){return new Array(0).fill(null)},wS.prototype.interfaces_=function(){return[]},wS.prototype.getClass=function(){return wS},wS.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},wS.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(wS.indexOf(r,e)<0)return r}return null},wS.scroll=function(t,e){var n=wS.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);GN.arraycopy(t,n,r,0,t.length-n),GN.arraycopy(t,0,r,t.length-n,n),GN.arraycopy(r,0,t,0,t.length)},wS.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},wS.intersection=function(t,e){for(var n=new MS,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},wS.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},wS.removeRepeatedPoints=function(t){return wS.hasRepeatedPoints(t)?new MS(t,!1).toCoordinateArray():t},wS.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},wS.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},wS.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new mN(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new mN(r[i+u])},wS.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},wS.envelope=function(t){for(var e=new jN,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},wS.toCoordinateArray=function(t){return t.toArray(wS.coordArrayType)},wS.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},wS.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},wS.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},wS.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},wS.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},wS.extract=function(t,e,n){e=SN.clamp(e,0,t.length);var r=(n=SN.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(wS,ES);var NS=function(){};NS.prototype.compare=function(t,e){return wS.compare(t,e)},NS.prototype.interfaces_=function(){return[_N]},NS.prototype.getClass=function(){return NS};var SS=function(){};SS.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=wS.compare(n,r);return wS.isEqualReversed(n,r)?0:i},SS.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=wS.increasingDirection(n),o=wS.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0},SS.prototype.interfaces_=function(){return[_N]},SS.prototype.getClass=function(){return SS};var IS=function(){};IS.prototype.get=function(){},IS.prototype.put=function(){},IS.prototype.size=function(){},IS.prototype.values=function(){},IS.prototype.entrySet=function(){};var CS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(IS);function OS(t){this.message=t||""}function PS(){}OS.prototype=new Error,OS.prototype.name="OperationNotSupported",PS.prototype=new gS,PS.prototype.contains=function(){};var LS=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof gS&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(this.array_[e]===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new AS(this)},e}(PS),AS=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new mS;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new OS},e}(_S);function TS(t){return null===t?0:t.color}function kS(t){return null===t?null:t.parent}function RS(t,e){null!==t&&(t.color=e)}function DS(t){return null===t?null:t.left}function FS(t){return null===t?null:t.right}function zS(){this.root_=null,this.size_=0}zS.prototype=new CS,zS.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},zS.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},zS.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(kS(t)===DS(kS(kS(t)))){var n=FS(kS(kS(t)));1===TS(n)?(RS(kS(t),0),RS(n,0),RS(kS(kS(t)),1),t=kS(kS(t))):(t===FS(kS(t))&&(t=kS(t),e.rotateLeft(t)),RS(kS(t),0),RS(kS(kS(t)),1),e.rotateRight(kS(kS(t))))}else{var r=DS(kS(kS(t)));1===TS(r)?(RS(kS(t),0),RS(r,0),RS(kS(kS(t)),1),t=kS(kS(t))):(t===DS(kS(t))&&(t=kS(t),e.rotateRight(t)),RS(kS(t),0),RS(kS(kS(t)),1),e.rotateLeft(kS(kS(t))))}this.root_.color=0},zS.prototype.values=function(){var t=new xS,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=zS.successor(e));)t.add(e.value);return t},zS.prototype.entrySet=function(){var t=new LS,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=zS.successor(e));)t.add(e);return t},zS.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},zS.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},zS.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},zS.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},zS.prototype.size=function(){return this.size_};var GS=function(){};function qS(){}function jS(){this.array_=[],arguments[0]instanceof gS&&this.addAll(arguments[0])}GS.prototype.interfaces_=function(){return[]},GS.prototype.getClass=function(){return GS},qS.prototype=new PS,jS.prototype=new qS,jS.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},jS.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},jS.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},jS.prototype.remove=function(t){throw new OS},jS.prototype.size=function(){return this.array_.length},jS.prototype.isEmpty=function(){return 0===this.array_.length},jS.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},jS.prototype.iterator=function(){return new BS(this)};var BS=function(t){this.treeSet_=t,this.position_=0};BS.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new mS;return this.treeSet_.array_[this.position_++]},BS.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},BS.prototype.remove=function(){throw new OS};var US=function(){};US.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},US.asList=function(t){for(var e=new xS,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var VS=function(){},WS={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};WS.P.get=function(){return 0},WS.L.get=function(){return 1},WS.A.get=function(){return 2},WS.FALSE.get=function(){return-1},WS.TRUE.get=function(){return-2},WS.DONTCARE.get=function(){return-3},WS.SYM_FALSE.get=function(){return"F"},WS.SYM_TRUE.get=function(){return"T"},WS.SYM_DONTCARE.get=function(){return"*"},WS.SYM_P.get=function(){return"0"},WS.SYM_L.get=function(){return"1"},WS.SYM_A.get=function(){return"2"},VS.prototype.interfaces_=function(){return[]},VS.prototype.getClass=function(){return VS},VS.toDimensionSymbol=function(t){switch(t){case VS.FALSE:return VS.SYM_FALSE;case VS.TRUE:return VS.SYM_TRUE;case VS.DONTCARE:return VS.SYM_DONTCARE;case VS.P:return VS.SYM_P;case VS.L:return VS.SYM_L;case VS.A:return VS.SYM_A}throw new fN("Unknown dimension value: "+t)},VS.toDimensionValue=function(t){switch(PN.toUpperCase(t)){case VS.SYM_FALSE:return VS.FALSE;case VS.SYM_TRUE:return VS.TRUE;case VS.SYM_DONTCARE:return VS.DONTCARE;case VS.SYM_P:return VS.P;case VS.SYM_L:return VS.L;case VS.SYM_A:return VS.A}throw new fN("Unknown dimension symbol: "+t)},Object.defineProperties(VS,WS);var YS=function(){};YS.prototype.filter=function(t){},YS.prototype.interfaces_=function(){return[]},YS.prototype.getClass=function(){return YS};var XS=function(){};XS.prototype.filter=function(t,e){},XS.prototype.isDone=function(){},XS.prototype.isGeometryChanged=function(){},XS.prototype.interfaces_=function(){return[]},XS.prototype.getClass=function(){return XS};var $S=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new fN("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new jN,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();US.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=VS.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=VS.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new jS(US.asList(this._geometries)),r=new jS(US.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],a=i,s=this.getNumGeometries(),u=a.getNumGeometries(),l=0;l<s&&l<u;){var c=t.getGeometryN(l),h=a.getGeometryN(l),f=c.compareToSameClass(h,o);if(0!==f)return f;l++}return l<s?1:l<u?-1:0}},e.prototype.apply=function(){var t=this;if(NN(arguments[0],uS))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(NN(arguments[0],XS)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(NN(arguments[0],YS)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)t._geometries[a].apply(o)}else if(NN(arguments[0],iS)){var s=arguments[0];s.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),QN.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(oS),HS=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oS.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?VS.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new QS(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[GS]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}($S),QS=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=lS.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};QS.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},QS.prototype.getBoundary=function(){return this._geom instanceof sI?this.boundaryLineString(this._geom):this._geom instanceof HS?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},QS.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},QS.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},QS.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new xS;this._endpointMap=new zS;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var a=o.next(),s=a.getValue().count;e._bnRule.isInBoundary(s)&&n.add(a.getKey())}return wS.toCoordinateArray(n)},QS.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new JS,this._endpointMap.put(t,e)),e.count++},QS.prototype.interfaces_=function(){return[]},QS.prototype.getClass=function(){return QS},QS.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new QS(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new QS(n,r);return i.getBoundary()}};var JS=function(){this.count=null};function KS(){}function ZS(){}JS.prototype.interfaces_=function(){return[]},JS.prototype.getClass=function(){return JS};var tI=function(){};function eI(){}function nI(){}function rI(){}var iI=function(){},oI={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};iI.prototype.interfaces_=function(){return[]},iI.prototype.getClass=function(){return iI},iI.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},iI.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new eI,n=new KS(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){var r=arguments[0],i=arguments[1],o="";new ZS(iI.getStackTrace(r));for(var a=new rI(stringReader),s=0;s<i;s++)try{o+=a.readLine()+iI.NEWLINE}catch(t){if(!(t instanceof nI))throw t;QN.shouldNeverReachHere()}return o}},iI.split=function(t,e){for(var n=e.length,r=new xS,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},iI.toString=function(){if(1===arguments.length){var t=arguments[0];return iI.SIMPLE_ORDINATE_FORMAT.format(t)}},iI.spaces=function(t){return iI.chars(" ",t)},oI.NEWLINE.get=function(){return GN.getProperty("line.separator")},oI.SIMPLE_ORDINATE_FORMAT.get=function(){return new tI("0.#")},Object.defineProperties(iI,oI);var aI=function(){};aI.prototype.interfaces_=function(){return[]},aI.prototype.getClass=function(){return aI},aI.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},aI.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,RN.X)===t.getOrdinate(e-1,RN.X)&&t.getOrdinate(0,RN.Y)===t.getOrdinate(e-1,RN.Y))},aI.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!pN.isNaN(a)||!pN.isNaN(s)))return!1}return!0},aI.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(aI.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)aI.copy(e,i-1,r,o,1);return r},aI.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)aI.swap(t,r,e-r)},aI.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},aI.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)aI.copyCoord(t,e+o,n,r+o)},aI.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new CN;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(iI.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},aI.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?aI.createClosedRing(t,e,4):e.getOrdinate(0,RN.X)===e.getOrdinate(n-1,RN.X)&&e.getOrdinate(0,RN.Y)===e.getOrdinate(n-1,RN.Y)?e:aI.createClosedRing(t,e,n+1)},aI.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();aI.copy(e,0,r,0,i);for(var o=i;o<n;o++)aI.copy(e,0,r,o,1);return r};var sI=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new jN:this._points.expandEnvelope(new jN)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&aI.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?VS.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return nS.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return aI.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var a=arguments[0],s=arguments[1],u=a;return s.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(NN(arguments[0],uS))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(NN(arguments[0],XS)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(NN(arguments[0],YS)){var o=arguments[0];o.filter(this)}else if(NN(arguments[0],iS)){var a=arguments[0];a.filter(this)}},e.prototype.getBoundary=function(){return new QS(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new fN("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[GS]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(oS),uI=function(){};uI.prototype.interfaces_=function(){return[]},uI.prototype.getClass=function(){return uI};var lI=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new jN;var t=new jN;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return VS.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(NN(arguments[0],uS)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(NN(arguments[0],XS)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(NN(arguments[0],YS)){var n=arguments[0];n.filter(this)}else if(NN(arguments[0],iS)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),QN.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[uI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(oS),cI=function(){};cI.prototype.interfaces_=function(){return[]},cI.prototype.getClass=function(){return cI};var hI=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new fN("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new fN("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(nS.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(nS.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),l=t.getY(s);if(u!==o===(l!==a))return!1;o=u,a=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,a=i._shell;if(!o.equalsExact(a,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!e._holes[s].equalsExact(i._holes[s],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);US.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);GN.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=wS.minCoordinate(n.getCoordinates());wS.scroll(i,o),GN.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],nS.isCCW(n.getCoordinates())===r&&wS.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i,s=this._shell,u=a._shell,l=s.compareToSameClass(u,o);if(0!==l)return l;for(var c=this.getNumInteriorRing(),h=a.getNumInteriorRing(),f=0;f<c&&f<h;){var p=t.getInteriorRingN(f),d=a.getInteriorRingN(f),g=p.compareToSameClass(d,o);if(0!==g)return g;f++}return f<c?1:f<h?-1:0}},e.prototype.apply=function(t){var e=this;if(NN(t,uS)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(NN(t,XS)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(NN(t,YS))t.filter(this);else if(NN(t,iS)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[cI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(oS),fI=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oS.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return VS.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[uI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}($S),pI=function(t){function e(e,n){e instanceof mN&&n instanceof OI&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oS.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return VS.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return aI.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new fN("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new fN("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(sI),dI=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return oS.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new xS,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[cI]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}($S),gI=function(t){this._factory=t||null,this._isUserDataCopied=!1},yI={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};gI.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},gI.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},gI.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof $S?this.editGeometryCollection(t,e):t instanceof hI?this.editPolygon(t,e):t instanceof lI||t instanceof sI?e.edit(t,this._factory):(QN.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},gI.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new xS,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===fI?this._factory.createMultiPoint(r.toArray([])):n.getClass()===HS?this._factory.createMultiLineString(r.toArray([])):n.getClass()===dI?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},gI.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new xS,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},gI.prototype.interfaces_=function(){return[]},gI.prototype.getClass=function(){return gI},gI.GeometryEditorOperation=function(){},yI.NoOpGeometryOperation.get=function(){return _I},yI.CoordinateOperation.get=function(){return vI},yI.CoordinateSequenceOperation.get=function(){return mI},Object.defineProperties(gI,yI);var _I=function(){};_I.prototype.edit=function(t,e){return t},_I.prototype.interfaces_=function(){return[gI.GeometryEditorOperation]},_I.prototype.getClass=function(){return _I};var vI=function(){};vI.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof pI?e.createLinearRing(n):t instanceof sI?e.createLineString(n):t instanceof lI?n.length>0?e.createPoint(n[0]):e.createPoint():t},vI.prototype.interfaces_=function(){return[gI.GeometryEditorOperation]},vI.prototype.getClass=function(){return vI};var mI=function(){};mI.prototype.edit=function(t,e){return t instanceof pI?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof sI?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof lI?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},mI.prototype.interfaces_=function(){return[gI.GeometryEditorOperation]},mI.prototype.getClass=function(){return mI};var xI=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new mN}else if(NN(arguments[0],RN)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=o,this._dimension=a,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],u=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=u;for(var l=0;l<s;l++)t._coordinates[l]=new mN}},bI={serialVersionUID:{configurable:!0}};xI.prototype.setOrdinate=function(t,e,n){switch(e){case RN.X:this._coordinates[t].x=n;break;case RN.Y:this._coordinates[t].y=n;break;case RN.Z:this._coordinates[t].z=n;break;default:throw new fN("invalid ordinateIndex")}},xI.prototype.size=function(){return this._coordinates.length},xI.prototype.getOrdinate=function(t,e){switch(e){case RN.X:return this._coordinates[t].x;case RN.Y:return this._coordinates[t].y;case RN.Z:return this._coordinates[t].z}return pN.NaN},xI.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},xI.prototype.getCoordinateCopy=function(t){return new mN(this._coordinates[t])},xI.prototype.getDimension=function(){return this._dimension},xI.prototype.getX=function(t){return this._coordinates[t].x},xI.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new xI(t,this._dimension)},xI.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},xI.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new xI(t,this._dimension)},xI.prototype.toString=function(){if(this._coordinates.length>0){var t=new CN(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},xI.prototype.getY=function(t){return this._coordinates[t].y},xI.prototype.toCoordinateArray=function(){return this._coordinates},xI.prototype.interfaces_=function(){return[RN,vN]},xI.prototype.getClass=function(){return xI},bI.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(xI,bI);var MI=function(){},wI={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};MI.prototype.readResolve=function(){return MI.instance()},MI.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new xI(t)}if(NN(arguments[0],RN)){var e=arguments[0];return new xI(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new xI(n):new xI(n,r)}},MI.prototype.interfaces_=function(){return[MN,vN]},MI.prototype.getClass=function(){return MI},MI.instance=function(){return MI.instanceObject},wI.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},wI.instanceObject.get=function(){return new MI},Object.defineProperties(MI,wI);var EI=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new xS,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new LS;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(IS),NI=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof II){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},SI={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};NI.prototype.equals=function(t){if(!(t instanceof NI))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},NI.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new ON(n).compareTo(new ON(r))},NI.prototype.getScale=function(){return this._scale},NI.prototype.isFloating=function(){return this._modelType===NI.FLOATING||this._modelType===NI.FLOATING_SINGLE},NI.prototype.getType=function(){return this._modelType},NI.prototype.toString=function(){var t="UNKNOWN";return this._modelType===NI.FLOATING?t="Floating":this._modelType===NI.FLOATING_SINGLE?t="Floating-Single":this._modelType===NI.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},NI.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(pN.isNaN(t))return t;if(this._modelType===NI.FLOATING_SINGLE){return t}return this._modelType===NI.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof mN){var e=arguments[0];if(this._modelType===NI.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},NI.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===NI.FLOATING?t=16:this._modelType===NI.FLOATING_SINGLE?t=6:this._modelType===NI.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},NI.prototype.setScale=function(t){this._scale=Math.abs(t)},NI.prototype.interfaces_=function(){return[vN,gN]},NI.prototype.getClass=function(){return NI},NI.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},SI.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},SI.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(NI,SI);var II=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},CI={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};II.prototype.readResolve=function(){return II.nameToTypeMap.get(this._name)},II.prototype.toString=function(){return this._name},II.prototype.interfaces_=function(){return[vN]},II.prototype.getClass=function(){return II},CI.serialVersionUID.get=function(){return-552860263173159e4},CI.nameToTypeMap.get=function(){return new EI},Object.defineProperties(II,CI),NI.Type=II,NI.FIXED=new II("FIXED"),NI.FLOATING=new II("FLOATING"),NI.FLOATING_SINGLE=new II("FLOATING SINGLE");var OI=function t(){this._precisionModel=new NI,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?NN(arguments[0],MN)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof NI&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},PI={serialVersionUID:{configurable:!0}};OI.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new mN(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new mN(t.getMinX(),t.getMinY()),new mN(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new mN(t.getMinX(),t.getMinY()),new mN(t.getMinX(),t.getMaxY()),new mN(t.getMaxX(),t.getMaxY()),new mN(t.getMaxX(),t.getMinY()),new mN(t.getMinX(),t.getMinY())]),null)},OI.prototype.createLineString=function(t){return t?t instanceof Array?new sI(this.getCoordinateSequenceFactory().create(t),this):NN(t,RN)?new sI(t,this):void 0:new sI(this.getCoordinateSequenceFactory().create([]),this)},OI.prototype.createMultiLineString=function(){if(0===arguments.length)return new HS(null,this);if(1===arguments.length){var t=arguments[0];return new HS(t,this)}},OI.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(OI.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof hI)return this.createMultiPolygon(OI.toPolygonArray(t));if(s instanceof sI)return this.createMultiLineString(OI.toLineStringArray(t));if(s instanceof lI)return this.createMultiPoint(OI.toPointArray(t));QN.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},OI.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},OI.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof mN){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(NN(arguments[0],RN)){var e=arguments[0];return new lI(e,this)}}},OI.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},OI.prototype.createPolygon=function(){if(0===arguments.length)return new hI(null,null,this);if(1===arguments.length){if(NN(arguments[0],RN)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof pI){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new hI(r,i,this)}},OI.prototype.getSRID=function(){return this._SRID},OI.prototype.createGeometryCollection=function(){if(0===arguments.length)return new $S(null,this);if(1===arguments.length){var t=arguments[0];return new $S(t,this)}},OI.prototype.createGeometry=function(t){return new gI(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},OI.prototype.getPrecisionModel=function(){return this._precisionModel},OI.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(NN(arguments[0],RN)){var e=arguments[0];return new pI(e,this)}}},OI.prototype.createMultiPolygon=function(){if(0===arguments.length)return new dI(null,this);if(1===arguments.length){var t=arguments[0];return new dI(t,this)}},OI.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new fI(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new fI(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(NN(arguments[0],RN)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var a=t.getCoordinateSequenceFactory().create(1,r.getDimension());aI.copy(r,o,a,0,1),i[o]=t.createPoint(a)}return this.createMultiPoint(i)}}},OI.prototype.interfaces_=function(){return[vN]},OI.prototype.getClass=function(){return OI},OI.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.getDefaultCoordinateSequenceFactory=function(){return MI.instance()},OI.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},OI.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},PI.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(OI,PI);var LI=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],AI=function(t){this.geometryFactory=t||new OI};AI.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!TI[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==LI.indexOf(n)?TI[n].apply(this,[e.coordinates]):"GeometryCollection"===n?TI[n].apply(this,[e.geometries]):TI[n].apply(this,[e])},AI.prototype.write=function(t){var e=t.getGeometryType();if(!kI[e])throw new Error("Geometry is not supported");return kI[e].apply(this,[t])};var TI={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!TI[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=TI.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new mN(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new mN(t[0],t[1]),new mN(t[2],t[1]),new mN(t[2],t[3]),new mN(t[0],t[3]),new mN(t[0],t[1])])},Point:function(t){var e=new mN(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(TI.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=TI.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(TI.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=TI.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=TI.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(TI.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},kI={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:kI.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=kI.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(kI.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=kI.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=kI.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=kI.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=kI.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(kI[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},RI=function(t){this.geometryFactory=t||new OI,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new AI(this.geometryFactory)};RI.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===NI.FIXED&&this.reducePrecision(e),e},RI.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var DI=function(){this.parser=new AI(this.geometryFactory)};DI.prototype.write=function(t){return this.parser.write(t)};var FI=function(){},zI={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function GI(t){this.message=t||""}function qI(){this.array_=[]}FI.prototype.interfaces_=function(){return[]},FI.prototype.getClass=function(){return FI},FI.opposite=function(t){return t===FI.LEFT?FI.RIGHT:t===FI.RIGHT?FI.LEFT:t},zI.ON.get=function(){return 0},zI.LEFT.get=function(){return 1},zI.RIGHT.get=function(){return 2},Object.defineProperties(FI,zI),GI.prototype=new Error,GI.prototype.name="EmptyStackException",qI.prototype=new vS,qI.prototype.add=function(t){return this.array_.push(t),!0},qI.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},qI.prototype.push=function(t){return this.array_.push(t),t},qI.prototype.pop=function(t){if(0===this.array_.length)throw new GI;return this.array_.pop()},qI.prototype.peek=function(){if(0===this.array_.length)throw new GI;return this.array_[this.array_.length-1]},qI.prototype.empty=function(){return 0===this.array_.length},qI.prototype.isEmpty=function(){return this.empty()},qI.prototype.search=function(t){return this.array_.indexOf(t)},qI.prototype.size=function(){return this.array_.length},qI.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var jI=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};jI.prototype.getCoordinate=function(){return this._minCoord},jI.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},jI.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();QN.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=nS.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===nS.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===nS.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},jI.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=FI.LEFT;return n[e].y<n[e+1].y&&(r=FI.RIGHT),r},jI.prototype.getEdge=function(){return this._orientedDe},jI.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},jI.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},jI.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}QN.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===FI.LEFT&&(this._orientedDe=this._minDe.getSym())},jI.prototype.interfaces_=function(){return[]},jI.prototype.getClass=function(){return jI};var BI=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new mN(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($N),UI=function(){this.array_=[]};UI.prototype.addLast=function(t){this.array_.push(t)},UI.prototype.removeFirst=function(){return this.array_.shift()},UI.prototype.isEmpty=function(){return 0===this.array_.length};var VI=function(){this._finder=null,this._dirEdgeList=new xS,this._nodes=new xS,this._rightMostCoord=null,this._env=null,this._finder=new jI};VI.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},VI.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},VI.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new BI("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},VI.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(FI.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},VI.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},VI.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(FI.RIGHT)>=1&&e.getDepth(FI.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},VI.prototype.computeDepths=function(t){var e=new LS,n=new UI,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},VI.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},VI.prototype.getEnvelope=function(){if(null===this._env){for(var t=new jN,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},VI.prototype.addReachable=function(t){var e=new qI;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},VI.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(FI.LEFT,t.getDepth(FI.RIGHT)),e.setDepth(FI.RIGHT,t.getDepth(FI.LEFT))},VI.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},VI.prototype.getNodes=function(){return this._nodes},VI.prototype.getDirectedEdges=function(){return this._dirEdgeList},VI.prototype.interfaces_=function(){return[gN]},VI.prototype.getClass=function(){return VI};var WI=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[FI.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var a=arguments[0],s=arguments[1],u=arguments[2];this.init(3),this.location[FI.ON]=a,this.location[FI.LEFT]=s,this.location[FI.RIGHT]=u}};WI.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},WI.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==wN.NONE)return!1;return!0},WI.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===wN.NONE&&(this.location[e]=t)},WI.prototype.isLine=function(){return 1===this.location.length},WI.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[FI.ON]=this.location[FI.ON],e[FI.LEFT]=wN.NONE,e[FI.RIGHT]=wN.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===wN.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},WI.prototype.getLocations=function(){return this.location},WI.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[FI.LEFT];this.location[FI.LEFT]=this.location[FI.RIGHT],this.location[FI.RIGHT]=t},WI.prototype.toString=function(){var t=new CN;return this.location.length>1&&t.append(wN.toLocationSymbol(this.location[FI.LEFT])),t.append(wN.toLocationSymbol(this.location[FI.ON])),this.location.length>1&&t.append(wN.toLocationSymbol(this.location[FI.RIGHT])),t.toString()},WI.prototype.setLocations=function(t,e,n){this.location[FI.ON]=t,this.location[FI.LEFT]=e,this.location[FI.RIGHT]=n},WI.prototype.get=function(t){return t<this.location.length?this.location[t]:wN.NONE},WI.prototype.isArea=function(){return this.location.length>1},WI.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===wN.NONE)return!0;return!1},WI.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(FI.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},WI.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(wN.NONE)},WI.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},WI.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},WI.prototype.interfaces_=function(){return[]},WI.prototype.getClass=function(){return WI};var YI=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new WI(e),this.elt[1]=new WI(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new WI(n.elt[0]),this.elt[1]=new WI(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new WI(wN.NONE),this.elt[1]=new WI(wN.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new WI(o,a,s),this.elt[1]=new WI(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new WI(wN.NONE,wN.NONE,wN.NONE),this.elt[1]=new WI(wN.NONE,wN.NONE,wN.NONE),this.elt[u].setLocations(l,c,h)}};YI.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},YI.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},YI.prototype.isNull=function(t){return this.elt[t].isNull()},YI.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},YI.prototype.isLine=function(t){return this.elt[t].isLine()},YI.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new WI(t.elt[n]):e.elt[n].merge(t.elt[n])},YI.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},YI.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(FI.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},YI.prototype.toString=function(){var t=new CN;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},YI.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},YI.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},YI.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(FI.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},YI.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},YI.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},YI.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new WI(this.elt[t].location[0]))},YI.prototype.interfaces_=function(){return[]},YI.prototype.getClass=function(){return YI},YI.toLineLabel=function(t){for(var e=new YI(wN.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var XI=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new xS,this._pts=new xS,this._label=new YI(wN.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new xS,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};XI.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=nS.isCCW(this._ring.getCoordinates())},XI.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},XI.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new BI("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new BI("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();QN.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},XI.prototype.getLinearRing=function(){return this._ring},XI.prototype.getCoordinate=function(t){return this._pts.get(t)},XI.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},XI.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},XI.prototype.isHole=function(){return this._isHole},XI.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},XI.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!nS.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},XI.prototype.addHole=function(t){this._holes.add(t)},XI.prototype.isShell=function(){return null===this._shell},XI.prototype.getLabel=function(){return this._label},XI.prototype.getEdges=function(){return this._edges},XI.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},XI.prototype.getShell=function(){return this._shell},XI.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,FI.RIGHT);if(r===wN.NONE)return null;if(this._label.getLocation(n)===wN.NONE)return this._label.setLocation(n,r),null}},XI.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},XI.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},XI.prototype.interfaces_=function(){return[]},XI.prototype.getClass=function(){return XI};var $I=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(XI),HI=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new xS,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new $I(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(XI),QI=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};QI.prototype.setVisited=function(t){this._isVisited=t},QI.prototype.setInResult=function(t){this._isInResult=t},QI.prototype.isCovered=function(){return this._isCovered},QI.prototype.isCoveredSet=function(){return this._isCoveredSet},QI.prototype.setLabel=function(t){this._label=t},QI.prototype.getLabel=function(){return this._label},QI.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},QI.prototype.updateIM=function(t){QN.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},QI.prototype.isInResult=function(){return this._isInResult},QI.prototype.isVisited=function(){return this._isVisited},QI.prototype.interfaces_=function(){return[]},QI.prototype.getClass=function(){return QI};var JI=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new YI(0,wN.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=wN.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==wN.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new YI(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof YI)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),a=t._label.getLocation(i);a===wN.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=wN.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;if(e===wN.BOUNDARY)n=wN.INTERIOR;else n=wN.BOUNDARY;this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(QI),KI=function(){this.nodeMap=new zS,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};KI.prototype.find=function(t){return this.nodeMap.get(t)},KI.prototype.addNode=function(){if(arguments[0]instanceof mN){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof JI){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},KI.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},KI.prototype.iterator=function(){return this.nodeMap.values().iterator()},KI.prototype.values=function(){return this.nodeMap.values()},KI.prototype.getBoundaryNodes=function(t){for(var e=new xS,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===wN.BOUNDARY&&e.add(r)}return e},KI.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},KI.prototype.interfaces_=function(){return[]},KI.prototype.getClass=function(){return KI};var ZI=function(){},tC={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ZI.prototype.interfaces_=function(){return[]},ZI.prototype.getClass=function(){return ZI},ZI.isNorthern=function(t){return t===ZI.NE||t===ZI.NW},ZI.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},ZI.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ZI.isInHalfPlane=function(t,e){return e===ZI.SE?t===ZI.SE||t===ZI.SW:t===e||t===e+1},ZI.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new fN("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ZI.NE:ZI.SE:e>=0?ZI.NW:ZI.SW}if(arguments[0]instanceof mN&&arguments[1]instanceof mN){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new fN("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ZI.NE:ZI.SE:r.y>=n.y?ZI.NW:ZI.SW}},tC.NE.get=function(){return 0},tC.NW.get=function(){return 1},tC.SW.get=function(){return 2},tC.SE.get=function(){return 3},Object.defineProperties(ZI,tC);var eC=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this._edge=o,this.init(a,s),this._label=u}};eC.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:nS.computeOrientation(t._p0,t._p1,this._p1)},eC.prototype.getDy=function(){return this._dy},eC.prototype.getCoordinate=function(){return this._p0},eC.prototype.setNode=function(t){this._node=t},eC.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},eC.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},eC.prototype.getDirectedCoordinate=function(){return this._p1},eC.prototype.getDx=function(){return this._dx},eC.prototype.getLabel=function(){return this._label},eC.prototype.getEdge=function(){return this._edge},eC.prototype.getQuadrant=function(){return this._quadrant},eC.prototype.getNode=function(){return this._node},eC.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},eC.prototype.computeLabel=function(t){},eC.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ZI.quadrant(this._dx,this._dy),QN.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},eC.prototype.interfaces_=function(){return[gN]},eC.prototype.getClass=function(){return eC};var nC=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new YI(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new BI("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,FI.LEFT)===wN.INTERIOR&&t._label.getLocation(n,FI.RIGHT)===wN.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[FI.LEFT]+"/"+this._depth[FI.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,wN.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,wN.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===FI.LEFT&&(r=-1);var i=FI.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===wN.EXTERIOR&&e===wN.INTERIOR?1:t===wN.INTERIOR&&e===wN.EXTERIOR?-1:0},e}(eC),rC=function(){};rC.prototype.createNode=function(t){return new JI(t,null)},rC.prototype.interfaces_=function(){return[]},rC.prototype.getClass=function(){return rC};var iC=function(){if(this._edges=new xS,this._nodes=null,this._edgeEndList=new xS,0===arguments.length)this._nodes=new KI(new rC);else if(1===arguments.length){var t=arguments[0];this._nodes=new KI(t)}};iC.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},iC.prototype.find=function(t){return this._nodes.find(t)},iC.prototype.addNode=function(){if(arguments[0]instanceof JI){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof mN){var e=arguments[0];return this._nodes.addNode(e)}},iC.prototype.getNodeIterator=function(){return this._nodes.iterator()},iC.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},iC.prototype.debugPrintln=function(t){GN.out.println(t)},iC.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===wN.BOUNDARY},iC.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},iC.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&(nS.computeOrientation(t,e,r)===nS.COLLINEAR&&ZI.quadrant(t,e)===ZI.quadrant(n,r))},iC.prototype.getEdgeEnds=function(){return this._edgeEndList},iC.prototype.debugPrint=function(t){GN.out.print(t)},iC.prototype.getEdgeIterator=function(){return this._edges.iterator()},iC.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},iC.prototype.insertEdge=function(t){this._edges.add(t)},iC.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},iC.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new nC(r,!0),o=new nC(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},iC.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},iC.prototype.getNodes=function(){return this._nodes.values()},iC.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},iC.prototype.interfaces_=function(){return[]},iC.prototype.getClass=function(){return iC},iC.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}};var oC=function(){this._geometryFactory=null,this._shellList=new xS;var t=arguments[0];this._geometryFactory=t};oC.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},oC.prototype.computePolygons=function(t){for(var e=new xS,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},oC.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new BI("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},oC.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new xS,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},oC.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},oC.prototype.buildMaximalEdgeRings=function(t){for(var e=new xS,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new HI(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},oC.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},oC.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},oC.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&nS.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=u)}return o},oC.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return QN.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},oC.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];iC.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new xS,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},oC.prototype.interfaces_=function(){return[]},oC.prototype.getClass=function(){return oC};var aC=function(){};aC.prototype.getBounds=function(){},aC.prototype.interfaces_=function(){return[]},aC.prototype.getClass=function(){return aC};var sC=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};sC.prototype.getItem=function(){return this._item},sC.prototype.getBounds=function(){return this._bounds},sC.prototype.interfaces_=function(){return[aC,vN]},sC.prototype.getClass=function(){return sC};var uC=function(){this._size=null,this._items=null,this._size=0,this._items=new xS,this._items.add(null)};uC.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},uC.prototype.size=function(){return this._size},uC.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},uC.prototype.clear=function(){this._size=0,this._items.clear()},uC.prototype.isEmpty=function(){return 0===this._size},uC.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},uC.prototype.interfaces_=function(){return[]},uC.prototype.getClass=function(){return uC};var lC=function(){};lC.prototype.visitItem=function(t){},lC.prototype.interfaces_=function(){return[]},lC.prototype.getClass=function(){return lC};var cC=function(){};cC.prototype.insert=function(t,e){},cC.prototype.remove=function(t,e){},cC.prototype.query=function(){},cC.prototype.interfaces_=function(){return[]},cC.prototype.getClass=function(){return cC};var hC=function(){if(this._childBoundables=new xS,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},fC={serialVersionUID:{configurable:!0}};hC.prototype.getLevel=function(){return this._level},hC.prototype.size=function(){return this._childBoundables.size()},hC.prototype.getChildBoundables=function(){return this._childBoundables},hC.prototype.addChildBoundable=function(t){QN.isTrue(null===this._bounds),this._childBoundables.add(t)},hC.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},hC.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},hC.prototype.interfaces_=function(){return[aC,vN]},hC.prototype.getClass=function(){return hC},fC.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(hC,fC);var pC=function(){};pC.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},pC.min=function(t){return pC.sort(t),t.get(0)},pC.sort=function(t,e){var n=t.toArray();e?US.sort(n,e):US.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},pC.singletonList=function(t){var e=new xS;return e.add(t),e};var dC=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};dC.prototype.expandToQueue=function(t,e){var n=dC.isComposite(this._boundable1),r=dC.isComposite(this._boundable2);if(n&&r)return dC.area(this._boundable1)>dC.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new fN("neither boundable is composite")},dC.prototype.isLeaves=function(){return!(dC.isComposite(this._boundable1)||dC.isComposite(this._boundable2))},dC.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},dC.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new dC(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},dC.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},dC.prototype.getDistance=function(){return this._distance},dC.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},dC.prototype.interfaces_=function(){return[gN]},dC.prototype.getClass=function(){return dC},dC.area=function(t){return t.getBounds().getArea()},dC.isComposite=function(t){return t instanceof hC};var gC=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new xS,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];QN.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},yC={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};gC.prototype.getNodeCapacity=function(){return this._nodeCapacity},gC.prototype.lastNode=function(t){return t.get(t.size()-1)},gC.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof hC?n+=t.size(i):i instanceof sC&&(n+=1)}return n}},gC.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof sC&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},gC.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new xS:e}if(1===arguments.length){for(var n=arguments[0],r=new xS,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof hC){var a=t.itemsTree(o);null!==a&&r.add(a)}else o instanceof sC?r.add(o.getItem()):QN.shouldNeverReachHere()}return r.size()<=0?null:r}},gC.prototype.insert=function(t,e){QN.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new sC(t,e))},gC.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new xS;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(QN.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var a=i.getChildBoundables().iterator();a.hasNext();){var s=a.next();s instanceof hC?t.boundablesAtLevel(r,s,o):(QN.isTrue(s instanceof sC),-1===r&&o.add(s))}return null}},gC.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new xS;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(NN(arguments[2],lC)&&arguments[0]instanceof Object&&arguments[1]instanceof hC)for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof hC?t.query(o,c,s):c instanceof sC?s.visitItem(c.getItem()):QN.shouldNeverReachHere())}else if(NN(arguments[2],vS)&&arguments[0]instanceof Object&&arguments[1]instanceof hC)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),g=0;g<d.size();g++){var y=d.get(g);t.getIntersectsOp().intersects(y.getBounds(),h)&&(y instanceof hC?t.query(h,y,p):y instanceof sC?p.add(y.getItem()):QN.shouldNeverReachHere())}},gC.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},gC.prototype.getRoot=function(){return this.build(),this._root},gC.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=this.removeItem(i,o);if(a)return!0;for(var s=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof hC&&(a=t.remove(r,l,o)))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),a}},gC.prototype.createHigherLevels=function(t,e){QN.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},gC.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof hC){var o=t.depth(i);o>n&&(n=o)}}return n+1}},gC.prototype.createParentBoundables=function(t,e){var n=this;QN.isTrue(!t.isEmpty());var r=new xS;r.add(this.createNode(e));var i=new xS(t);pC.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var a=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(a)}return r},gC.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},gC.prototype.interfaces_=function(){return[vN]},gC.prototype.getClass=function(){return gC},gC.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},yC.IntersectsOp.get=function(){return _C},yC.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},yC.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(gC,yC);var _C=function(){},vC=function(){};vC.prototype.distance=function(t,e){},vC.prototype.interfaces_=function(){return[]},vC.prototype.getClass=function(){return vC};var mC=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){QN.isTrue(t.length>0);for(var n=new xS,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new xC(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new xS;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(NN(arguments[2],lC)&&arguments[0]instanceof Object&&arguments[1]instanceof hC){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(NN(arguments[2],vS)&&arguments[0]instanceof Object&&arguments[1]instanceof hC){var s=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,s,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){QN.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new xS(t);pC.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(NN(arguments[0],vC)){var t=arguments[0],n=new dC(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof dC){var r=arguments[0];return this.nearestNeighbour(r,pN.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&NN(arguments[1],vC)){var i=arguments[0],o=arguments[1],a=new dC(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof dC&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=u,c=null,h=new uC;for(h.add(s);!h.isEmpty()&&l>0;){var f=h.poll(),p=f.getDistance();if(p>=l)break;f.isLeaves()?(l=p,c=f):f.expandToQueue(h,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],_=new sC(d,g),v=new dC(this.getRoot(),_,y);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[cC,vN]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return xC},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[_N]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[_N]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(gC),xC=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new jN(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hC),bC=function(){};bC.prototype.interfaces_=function(){return[]},bC.prototype.getClass=function(){return bC},bC.relativeSign=function(t,e){return t<e?-1:t>e?1:0},bC.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=bC.relativeSign(e.x,n.x),i=bC.relativeSign(e.y,n.y);switch(t){case 0:return bC.compareValue(r,i);case 1:return bC.compareValue(i,r);case 2:return bC.compareValue(i,-r);case 3:return bC.compareValue(-r,i);case 4:return bC.compareValue(-r,-i);case 5:return bC.compareValue(-i,-r);case 6:return bC.compareValue(-i,r);case 7:return bC.compareValue(r,-i)}return QN.shouldNeverReachHere("invalid octant value"),0},bC.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var MC=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new mN(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};MC.prototype.getCoordinate=function(){return this.coord},MC.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},MC.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:bC.compare(this._segmentOctant,this.coord,e.coord)},MC.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},MC.prototype.isInterior=function(){return this._isInterior},MC.prototype.interfaces_=function(){return[gN]},MC.prototype.getClass=function(){return MC};var wC=function(){this._nodeMap=new zS,this._edge=null;var t=arguments[0];this._edge=t};wC.prototype.getSplitCoordinates=function(){var t=new MS;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},wC.prototype.addCollapsedNodes=function(){var t=new xS;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},wC.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},wC.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new ON(e+1))}},wC.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new mN(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new mN(e.coord))},wC.prototype.iterator=function(){return this._nodeMap.values().iterator()},wC.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},wC.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},wC.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new ON(e[0])),r=i}},wC.prototype.getEdge=function(){return this._edge},wC.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},wC.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new mN(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new mN(e.coord)),new IC(o,this._edge.getData())},wC.prototype.add=function(t,e){var n=new MC(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(QN.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},wC.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $N("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new $N("bad split edge end point at "+i)},wC.prototype.interfaces_=function(){return[]},wC.prototype.getClass=function(){return wC};var EC=function(){};EC.prototype.interfaces_=function(){return[]},EC.prototype.getClass=function(){return EC},EC.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new fN("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof mN&&arguments[1]instanceof mN){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new fN("Cannot compute the octant for two identical points "+i);return EC.octant(a,s)}};var NC=function(){};NC.prototype.getCoordinates=function(){},NC.prototype.size=function(){},NC.prototype.getCoordinate=function(t){},NC.prototype.isClosed=function(){},NC.prototype.setData=function(t){},NC.prototype.getData=function(){},NC.prototype.interfaces_=function(){return[]},NC.prototype.getClass=function(){return NC};var SC=function(){};SC.prototype.addIntersection=function(t,e){},SC.prototype.interfaces_=function(){return[NC]},SC.prototype.getClass=function(){return SC};var IC=function(){this._nodeList=new wC(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};IC.prototype.getCoordinates=function(){return this._pts},IC.prototype.size=function(){return this._pts.length},IC.prototype.getCoordinate=function(t){return this._pts[t]},IC.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},IC.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},IC.prototype.setData=function(t){this._data=t},IC.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:EC.octant(t,e)},IC.prototype.getData=function(){return this._data},IC.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new mN(n.getIntersection(i));this.addIntersection(o,r)}},IC.prototype.toString=function(){return XN.toLineString(new xI(this._pts))},IC.prototype.getNodeList=function(){return this._nodeList},IC.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},IC.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},IC.prototype.interfaces_=function(){return[SC]},IC.prototype.getClass=function(){return IC},IC.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new xS;return IC.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var CC=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new mN,this.p1=new mN;else if(1===arguments.length){var t=arguments[0];this.p0=new mN(t.p0),this.p1=new mN(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new mN(e,n),this.p1=new mN(r,i)}},OC={serialVersionUID:{configurable:!0}};CC.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},CC.prototype.orientationIndex=function(){if(arguments[0]instanceof CC){var t=arguments[0],e=nS.orientationIndex(this.p0,this.p1,t.p0),n=nS.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof mN){var r=arguments[0];return nS.orientationIndex(this.p0,this.p1,r)}},CC.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},CC.prototype.isVertical=function(){return this.p0.x===this.p1.x},CC.prototype.equals=function(t){if(!(t instanceof CC))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},CC.prototype.intersection=function(t){var e=new ZN;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},CC.prototype.project=function(){if(arguments[0]instanceof mN){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new mN(t);var e=this.projectionFactor(t),n=new mN;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof CC){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new CC(a,s)}},CC.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},CC.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},CC.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},CC.prototype.distancePerpendicular=function(t){return nS.distancePointLinePerpendicular(t,this.p0,this.p1)},CC.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},CC.prototype.midPoint=function(){return CC.midPoint(this.p0,this.p1)},CC.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?pN.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},CC.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=pN.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},CC.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},CC.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},CC.prototype.getLength=function(){return this.p0.distance(this.p1)},CC.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},CC.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},CC.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},CC.prototype.lineIntersection=function(t){try{return qN.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof zN))throw t}return null},CC.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},CC.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new mN(n-u,r+s)},CC.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},CC.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||pN.isNaN(e))&&(e=1),e},CC.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},CC.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},CC.prototype.distance=function(){if(arguments[0]instanceof CC){var t=arguments[0];return nS.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof mN){var e=arguments[0];return nS.distancePointLine(e,this.p0,this.p1)}},CC.prototype.pointAlong=function(t){var e=new mN;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},CC.prototype.hashCode=function(){var t=pN.doubleToLongBits(this.p0.x);t^=31*pN.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=pN.doubleToLongBits(this.p1.x);return n^=31*pN.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},CC.prototype.interfaces_=function(){return[gN,vN]},CC.prototype.getClass=function(){return CC},CC.midPoint=function(t,e){return new mN((t.x+e.x)/2,(t.y+e.y)/2)},OC.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(CC,OC);var PC=function(){this.tempEnv1=new jN,this.tempEnv2=new jN,this._overlapSeg1=new CC,this._overlapSeg2=new CC};PC.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},PC.prototype.interfaces_=function(){return[]},PC.prototype.getClass=function(){return PC};var LC=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};LC.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},LC.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},LC.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},LC.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},LC.prototype.setId=function(t){this._id=t},LC.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},LC.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new jN(t,e)}return this._env},LC.prototype.getEndIndex=function(){return this._end},LC.prototype.getStartIndex=function(){return this._start},LC.prototype.getContext=function(){return this._context},LC.prototype.getId=function(){return this._id},LC.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},LC.prototype.interfaces_=function(){return[]},LC.prototype.getClass=function(){return LC};var AC=function(){};AC.prototype.interfaces_=function(){return[]},AC.prototype.getClass=function(){return AC},AC.getChainStartIndices=function(t){var e=0,n=new xS;n.add(new ON(e));do{var r=AC.findChainEnd(t,e);n.add(new ON(r)),e=r}while(e<t.length-1);return AC.toIntArray(n)},AC.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ZI.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i]))if(ZI.quadrant(t[i-1],t[i])!==r)break;i++}return i-1},AC.getChains=function(){if(1===arguments.length){var t=arguments[0];return AC.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new xS,i=AC.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new LC(e,i[o],i[o+1],n);r.add(a)}return r}},AC.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var TC=function(){};TC.prototype.computeNodes=function(t){},TC.prototype.getNodedSubstrings=function(){},TC.prototype.interfaces_=function(){return[]},TC.prototype.getClass=function(){return TC};var kC=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};kC.prototype.setSegmentIntersector=function(t){this._segInt=t},kC.prototype.interfaces_=function(){return[TC]},kC.prototype.getClass=function(){return kC};var RC=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new xS,this._index=new mC,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return IC.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=AC.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new DC(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return DC},Object.defineProperties(e,n),e}(kC),DC=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(PC),FC=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},zC={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};FC.prototype.getEndCapStyle=function(){return this._endCapStyle},FC.prototype.isSingleSided=function(){return this._isSingleSided},FC.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=FC.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=FC.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==FC.JOIN_ROUND&&(this._quadrantSegments=FC.DEFAULT_QUADRANT_SEGMENTS)},FC.prototype.getJoinStyle=function(){return this._joinStyle},FC.prototype.setJoinStyle=function(t){this._joinStyle=t},FC.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},FC.prototype.getSimplifyFactor=function(){return this._simplifyFactor},FC.prototype.getQuadrantSegments=function(){return this._quadrantSegments},FC.prototype.setEndCapStyle=function(t){this._endCapStyle=t},FC.prototype.getMitreLimit=function(){return this._mitreLimit},FC.prototype.setMitreLimit=function(t){this._mitreLimit=t},FC.prototype.setSingleSided=function(t){this._isSingleSided=t},FC.prototype.interfaces_=function(){return[]},FC.prototype.getClass=function(){return FC},FC.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},zC.CAP_ROUND.get=function(){return 1},zC.CAP_FLAT.get=function(){return 2},zC.CAP_SQUARE.get=function(){return 3},zC.JOIN_ROUND.get=function(){return 1},zC.JOIN_MITRE.get=function(){return 2},zC.JOIN_BEVEL.get=function(){return 3},zC.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},zC.DEFAULT_MITRE_LIMIT.get=function(){return 5},zC.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(FC,zC);var GC=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=nS.COUNTERCLOCKWISE,this._inputLine=t||null},qC={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};GC.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&(!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r))},GC.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=GC.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},GC.prototype.isShallowConcavity=function(t,e,n,r){return nS.computeOrientation(t,e,n)===this._angleOrientation&&nS.distancePointLine(e,t,n)<r},GC.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/GC.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},GC.prototype.isConcave=function(t,e,n){var r=nS.computeOrientation(t,e,n)===this._angleOrientation;return r},GC.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=nS.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},GC.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===GC.DELETE;)e++;return e},GC.prototype.isShallow=function(t,e,n,r){return nS.distancePointLine(e,t,n)<r},GC.prototype.collapseLine=function(){for(var t=new MS,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==GC.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},GC.prototype.interfaces_=function(){return[]},GC.prototype.getClass=function(){return GC},GC.simplify=function(t,e){return new GC(t).simplify(e)},qC.INIT.get=function(){return 0},qC.DELETE.get=function(){return 1},qC.KEEP.get=function(){return 1},qC.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(GC,qC);var jC=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new xS},BC={COORDINATE_ARRAY_TYPE:{configurable:!0}};jC.prototype.getCoordinates=function(){return this._ptList.toArray(jC.COORDINATE_ARRAY_TYPE)},jC.prototype.setPrecisionModel=function(t){this._precisionModel=t},jC.prototype.addPt=function(t){var e=new mN(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},jC.prototype.revere=function(){},jC.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},jC.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},jC.prototype.toString=function(){return(new OI).createLineString(this.getCoordinates()).toString()},jC.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new mN(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},jC.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},jC.prototype.interfaces_=function(){return[]},jC.prototype.getClass=function(){return jC},BC.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(jC,BC);var UC=function(){},VC={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};UC.prototype.interfaces_=function(){return[]},UC.prototype.getClass=function(){return UC},UC.toDegrees=function(t){return 180*t/Math.PI},UC.normalize=function(t){for(;t>Math.PI;)t-=UC.PI_TIMES_2;for(;t<=-Math.PI;)t+=UC.PI_TIMES_2;return t},UC.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},UC.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},UC.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},UC.interiorAngle=function(t,e,n){var r=UC.angle(e,t),i=UC.angle(e,n);return Math.abs(i-r)},UC.normalizePositive=function(t){if(t<0){for(;t<0;)t+=UC.PI_TIMES_2;t>=UC.PI_TIMES_2&&(t=0)}else{for(;t>=UC.PI_TIMES_2;)t-=UC.PI_TIMES_2;t<0&&(t=0)}return t},UC.angleBetween=function(t,e,n){var r=UC.angle(e,t),i=UC.angle(e,n);return UC.diff(r,i)},UC.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},UC.toRadians=function(t){return t*Math.PI/180},UC.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?UC.COUNTERCLOCKWISE:n<0?UC.CLOCKWISE:UC.NONE},UC.angleBetweenOriented=function(t,e,n){var r=UC.angle(e,t),i=UC.angle(e,n)-r;return i<=-Math.PI?i+UC.PI_TIMES_2:i>Math.PI?i-UC.PI_TIMES_2:i},VC.PI_TIMES_2.get=function(){return 2*Math.PI},VC.PI_OVER_2.get=function(){return Math.PI/2},VC.PI_OVER_4.get=function(){return Math.PI/4},VC.COUNTERCLOCKWISE.get=function(){return nS.COUNTERCLOCKWISE},VC.CLOCKWISE.get=function(){return nS.CLOCKWISE},VC.NONE.get=function(){return nS.COLLINEAR},Object.defineProperties(UC,VC);var WC=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new CC,this._seg1=new CC,this._offset0=new CC,this._offset1=new CC,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new ZN,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===FC.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},YC={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};WC.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=nS.computeOrientation(this._s0,this._s1,this._s2),r=n===nS.CLOCKWISE&&this._side===FI.LEFT||n===nS.COUNTERCLOCKWISE&&this._side===FI.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},WC.prototype.addLineEndCap=function(t,e){var n=new CC(t,e),r=new CC;this.computeOffsetSegment(n,FI.LEFT,this._distance,r);var i=new CC;this.computeOffsetSegment(n,FI.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case FC.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,nS.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case FC.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case FC.CAP_SQUARE:var u=new mN;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new mN(r.p1.x+u.x,r.p1.y+u.y),c=new mN(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},WC.prototype.getCoordinates=function(){return this._segList.getCoordinates()},WC.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=qN.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof zN))throw t;o=new mN(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},WC.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===nS.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},WC.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*WC.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===FC.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===FC.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},WC.prototype.createSquare=function(t){this._segList.addPt(new mN(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new mN(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new mN(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new mN(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},WC.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},WC.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},WC.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},WC.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},WC.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=UC.angle(i,this._seg0.p0),a=UC.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=UC.normalize(o+a),u=UC.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new mN(h,f),d=new CC(i,p),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===FI.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},WC.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===FI.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},WC.prototype.addFilletArc=function(t,e,n,r,i){var o=r===nS.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new mN;l<a;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},WC.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*WC.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new mN((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new mN((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},WC.prototype.createCircle=function(t){var e=new mN(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},WC.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},WC.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new jC,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*WC.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},WC.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===FC.JOIN_BEVEL||this._bufParams.getJoinStyle()===FC.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,nS.CLOCKWISE,this._distance))},WC.prototype.closeRing=function(){this._segList.closeRing()},WC.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},WC.prototype.interfaces_=function(){return[]},WC.prototype.getClass=function(){return WC},YC.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},YC.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},YC.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},YC.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(WC,YC);var XC=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};XC.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&wS.reverse(o),o},XC.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=GC.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],FI.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=GC.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],FI.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},XC.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===FI.RIGHT&&(r=-r);var i=GC.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},XC.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=GC.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],FI.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=GC.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],FI.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},XC.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case FC.CAP_ROUND:e.createCircle(t);break;case FC.CAP_SQUARE:e.createSquare(t)}},XC.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},XC.prototype.getBufferParameters=function(){return this._bufParams},XC.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},XC.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return XC.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},XC.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=GC.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],FI.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=GC.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],FI.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},XC.prototype.getSegGen=function(t){return new WC(this._precisionModel,this._bufParams,t)},XC.prototype.interfaces_=function(){return[]},XC.prototype.getClass=function(){return XC},XC.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new mN(t[n]);return e};var $C=function(){this._subgraphs=null,this._seg=new CC,this._cga=new nS;var t=arguments[0];this._subgraphs=t},HC={DepthSegment:{configurable:!0}};$C.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new xS,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(NN(arguments[2],vS)&&arguments[0]instanceof mN&&arguments[1]instanceof nC)for(var a=arguments[0],s=arguments[1],u=arguments[2],l=s.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<a.x)&&!(t._seg.isHorizontal()||a.y<t._seg.p0.y||a.y>t._seg.p1.y||nS.computeOrientation(t._seg.p0,t._seg.p1,a)===nS.RIGHT)){var f=s.getDepth(FI.LEFT);t._seg.p0.equals(l[c])||(f=s.getDepth(FI.RIGHT));var p=new QC(t._seg,f);u.add(p)}}else if(NN(arguments[2],vS)&&arguments[0]instanceof mN&&NN(arguments[1],vS))for(var d=arguments[0],g=arguments[1],y=arguments[2],_=g.iterator();_.hasNext();){var v=_.next();v.isForward()&&t.findStabbedSegments(d,v,y)}},$C.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:pC.min(e)._leftDepth},$C.prototype.interfaces_=function(){return[]},$C.prototype.getClass=function(){return $C},HC.DepthSegment.get=function(){return QC},Object.defineProperties($C,HC);var QC=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new CC(t),this._leftDepth=e};QC.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},QC.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},QC.prototype.toString=function(){return this._upwardSeg.toString()},QC.prototype.interfaces_=function(){return[gN]},QC.prototype.getClass=function(){return QC};var JC=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};JC.prototype.area=function(){return JC.area(this.p0,this.p1,this.p2)},JC.prototype.signedArea=function(){return JC.signedArea(this.p0,this.p1,this.p2)},JC.prototype.interpolateZ=function(t){if(null===t)throw new fN("Supplied point is null.");return JC.interpolateZ(t,this.p0,this.p1,this.p2)},JC.prototype.longestSideLength=function(){return JC.longestSideLength(this.p0,this.p1,this.p2)},JC.prototype.isAcute=function(){return JC.isAcute(this.p0,this.p1,this.p2)},JC.prototype.circumcentre=function(){return JC.circumcentre(this.p0,this.p1,this.p2)},JC.prototype.area3D=function(){return JC.area3D(this.p0,this.p1,this.p2)},JC.prototype.centroid=function(){return JC.centroid(this.p0,this.p1,this.p2)},JC.prototype.inCentre=function(){return JC.inCentre(this.p0,this.p1,this.p2)},JC.prototype.interfaces_=function(){return[]},JC.prototype.getClass=function(){return JC},JC.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},JC.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},JC.det=function(t,e,n,r){return t*r-e*n},JC.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,h=t.x-i,f=t.y-o,p=(l*h-s*f)/c,d=(-u*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},JC.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},JC.isAcute=function(t,e,n){return!!UC.isAcute(t,e,n)&&(!!UC.isAcute(e,n,t)&&!!UC.isAcute(n,t,e))},JC.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*JC.det(o,a,s,u),c=JC.det(a,o*o+a*a,u,s*s+u*u),h=JC.det(o,o*o+a*a,s,s*s+u*u);return new mN(r-c/l,i+h/l)},JC.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new qN(t.x+n/2,t.y+r/2,1),o=new qN(t.x-r+n/2,t.y+n+r/2,1);return new qN(i,o)},JC.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new mN(t.x+i*o,t.y+i*a)},JC.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,h=r*s-i*a,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},JC.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new mN(r,i)},JC.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new mN(s,u)};var KC=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new xS;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};KC.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,wN.EXTERIOR,wN.INTERIOR)},KC.prototype.addPolygon=function(t){var e=this,n=this._distance,r=FI.LEFT;this._distance<0&&(n=-this._distance,r=FI.RIGHT);var i=t.getExteriorRing(),o=wS.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,wN.EXTERIOR,wN.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var s=t.getInteriorRingN(a),u=wS.removeRepeatedPoints(s.getCoordinates());e._distance>0&&e.isErodedCompletely(s,-e._distance)||e.addPolygonRing(u,n,FI.opposite(r),wN.INTERIOR,wN.EXTERIOR)}},KC.prototype.isTriangleErodedCompletely=function(t,e){var n=new JC(t[0],t[1],t[2]),r=n.inCentre();return nS.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},KC.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=wS.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,wN.EXTERIOR,wN.INTERIOR)},KC.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new IC(t,new YI(0,wN.BOUNDARY,e,n));this._curveList.add(r)},KC.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},KC.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<pI.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=pI.MINIMUM_VALID_SIZE&&nS.isCCW(t)&&(o=i,a=r,n=FI.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},KC.prototype.add=function(t){if(t.isEmpty())return null;t instanceof hI?this.addPolygon(t):t instanceof sI?this.addLineString(t):t instanceof lI?this.addPoint(t):(t instanceof fI||t instanceof HS||t instanceof dI||t instanceof $S)&&this.addCollection(t)},KC.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},KC.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},KC.prototype.interfaces_=function(){return[]},KC.prototype.getClass=function(){return KC};var ZC=function(){};ZC.prototype.locate=function(t){},ZC.prototype.interfaces_=function(){return[]},ZC.prototype.getClass=function(){return ZC};var tO=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};tO.prototype.next=function(){if(this._atStart)return this._atStart=!1,tO.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new mS;var t=this._parent.getGeometryN(this._index++);return t instanceof $S?(this._subcollectionIterator=new tO(t),this._subcollectionIterator.next()):t},tO.prototype.remove=function(){throw new Error(this.getClass().getName())},tO.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},tO.prototype.interfaces_=function(){return[_S]},tO.prototype.getClass=function(){return tO},tO.isAtomic=function(t){return!(t instanceof $S)};var eO=function(){this._geom=null;var t=arguments[0];this._geom=t};eO.prototype.locate=function(t){return eO.locate(t,this._geom)},eO.prototype.interfaces_=function(){return[ZC]},eO.prototype.getClass=function(){return eO},eO.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&nS.isPointInRing(t,e.getCoordinates())},eO.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!eO.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(eO.isPointInRing(t,i))return!1}return!0},eO.containsPoint=function(t,e){if(e instanceof hI)return eO.containsPointInPolygon(t,e);if(e instanceof $S)for(var n=new tO(e);n.hasNext();){var r=n.next();if(r!==e&&eO.containsPoint(t,r))return!0}return!1},eO.locate=function(t,e){return e.isEmpty()?wN.EXTERIOR:eO.containsPoint(t,e)?wN.INTERIOR:wN.EXTERIOR};var nO=function(){this._edgeMap=new zS,this._edgeList=null,this._ptInAreaLocation=[wN.NONE,wN.NONE]};nO.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},nO.prototype.propagateSideLabels=function(t){for(var e=wN.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,FI.LEFT)!==wN.NONE&&(e=r.getLocation(t,FI.LEFT))}if(e===wN.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,FI.ON)===wN.NONE&&s.setLocation(t,FI.ON,i),s.isArea(t)){var u=s.getLocation(t,FI.LEFT),l=s.getLocation(t,FI.RIGHT);if(l!==wN.NONE){if(l!==i)throw new BI("side location conflict",a.getCoordinate());u===wN.NONE&&QN.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else QN.isTrue(s.getLocation(t,FI.LEFT)===wN.NONE,"found single null side"),s.setLocation(t,FI.RIGHT,i),s.setLocation(t,FI.LEFT,i)}}},nO.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},nO.prototype.print=function(t){GN.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},nO.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},nO.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,FI.LEFT);QN.isTrue(r!==wN.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();QN.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,FI.LEFT),u=a.getLocation(t,FI.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},nO.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1},nO.prototype.iterator=function(){return this.getEdges().iterator()},nO.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new xS(this._edgeMap.values())),this._edgeList},nO.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===wN.NONE&&(this._ptInAreaLocation[t]=eO.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},nO.prototype.toString=function(){var t=new CN;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},nO.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},nO.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===wN.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=wN.NONE;if(e[u])l=wN.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},nO.prototype.getDegree=function(){return this._edgeMap.size()},nO.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},nO.prototype.interfaces_=function(){return[]},nO.prototype.getClass=function(){return nO};var rO=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),a=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!a.isInResult())continue;n=a,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new BI("no outgoing dirEdge found",this.getCoordinate());QN.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ZI.isNorthern(i)&&ZI.isNorthern(o)?n:ZI.isNorthern(i)||ZI.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(QN.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){GN.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new xS;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(FI.LEFT),i=e.getDepth(FI.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r),a=this.computeDepths(0,n,o);if(a!==i)throw new BI("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],u=arguments[1],l=arguments[2],c=l,h=s;h<u;h++){var f=t._edgeList.get(h);f.setEdgeDepths(FI.RIGHT,c),c=f.getDepth(FI.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var a=e._resultAreaEdgeList.get(o),s=a.getSym();switch(null===n&&a.getEdgeRing()===t&&(n=a),i){case e._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;r=s,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(a.getEdgeRing()!==t)continue;r.setNextMin(a),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(QN.isTrue(null!==n,"found null for first outgoing dirEdge"),QN.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var a=o.next();a.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=wN.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=wN.INTERIOR;break}if(r.isInResult()){t=wN.EXTERIOR;break}}}if(t===wN.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===wN.INTERIOR):(a.isInResult()&&(i=wN.EXTERIOR),s.isInResult()&&(i=wN.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new YI(wN.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==wN.INTERIOR&&o!==wN.BOUNDARY||this._label.setLocation(i,wN.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nO),iO=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new JI(t,new rO)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rC),oO=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};oO.prototype.compareTo=function(t){var e=t;return oO.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},oO.prototype.interfaces_=function(){return[gN]},oO.prototype.getClass=function(){return oO},oO.orientation=function(t){return 1===wS.increasingDirection(t)},oO.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===a,f=(l+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var aO=function(){this._edges=new xS,this._ocaMap=new zS};aO.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},aO.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},aO.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},aO.prototype.iterator=function(){return this._edges.iterator()},aO.prototype.getEdges=function(){return this._edges},aO.prototype.get=function(t){return this._edges.get(t)},aO.prototype.findEqualEdge=function(t){var e=new oO(t.getCoordinates());return this._ocaMap.get(e)},aO.prototype.add=function(t){this._edges.add(t);var e=new oO(t.getCoordinates());this._ocaMap.put(e,t)},aO.prototype.interfaces_=function(){return[]},aO.prototype.getClass=function(){return aO};var sO=function(){};sO.prototype.processIntersections=function(t,e,n,r){},sO.prototype.isDone=function(){},sO.prototype.interfaces_=function(){return[]},sO.prototype.getClass=function(){return sO};var uO=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};uO.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(uO.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},uO.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},uO.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},uO.prototype.getLineIntersector=function(){return this._li},uO.prototype.hasProperIntersection=function(){return this._hasProper},uO.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},uO.prototype.hasIntersection=function(){return this._hasIntersection},uO.prototype.isDone=function(){return!1},uO.prototype.hasInteriorIntersection=function(){return this._hasInterior},uO.prototype.interfaces_=function(){return[sO]},uO.prototype.getClass=function(){return uO},uO.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var lO=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new mN(t),this.segmentIndex=e,this.dist=n};lO.prototype.getSegmentIndex=function(){return this.segmentIndex},lO.prototype.getCoordinate=function(){return this.coord},lO.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},lO.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},lO.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},lO.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},lO.prototype.getDistance=function(){return this.dist},lO.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},lO.prototype.interfaces_=function(){return[gN]},lO.prototype.getClass=function(){return lO};var cO=function(){this._nodeMap=new zS,this.edge=null;var t=arguments[0];this.edge=t};cO.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},cO.prototype.iterator=function(){return this._nodeMap.values().iterator()},cO.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cO.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},cO.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new mN(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new gO(o,new YI(this.edge._label))},cO.prototype.add=function(t,e,n){var r=new lO(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},cO.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},cO.prototype.interfaces_=function(){return[]},cO.prototype.getClass=function(){return cO};var hO=function(){};hO.prototype.getChainStartIndices=function(t){var e=0,n=new xS;n.add(new ON(e));do{var r=this.findChainEnd(t,e);n.add(new ON(r)),e=r}while(e<t.length-1);return hO.toIntArray(n)},hO.prototype.findChainEnd=function(t,e){for(var n=ZI.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){if(ZI.quadrant(t[r-1],t[r])!==n)break;r++}return r-1},hO.prototype.interfaces_=function(){return[]},hO.prototype.getClass=function(){return hO},hO.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var fO=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new jN,this.env2=new jN;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new hO;this.startIndex=e.getChainStartIndices(this.pts)};fO.prototype.getCoordinates=function(){return this.pts},fO.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},fO.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},fO.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},fO.prototype.getStartIndexes=function(){return this.startIndex},fO.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},fO.prototype.interfaces_=function(){return[]},fO.prototype.getClass=function(){return fO};var pO=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},dO={NULL_VALUE:{configurable:!0}};pO.prototype.getDepth=function(t,e){return this._depth[t][e]},pO.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},pO.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==pO.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===pO.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===pO.NULL_VALUE}},pO.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},pO.prototype.getDelta=function(t){return this._depth[t][FI.RIGHT]-this._depth[t][FI.LEFT]},pO.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?wN.EXTERIOR:wN.INTERIOR},pO.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},pO.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==wN.EXTERIOR&&i!==wN.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=pO.depthAtLocation(i):t._depth[n][r]+=pO.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];s===wN.INTERIOR&&this._depth[o][a]++}},pO.prototype.interfaces_=function(){return[]},pO.prototype.getClass=function(){return pO},pO.depthAtLocation=function(t){return t===wN.EXTERIOR?0:t===wN.INTERIOR?1:pO.NULL_VALUE},dO.NULL_VALUE.get=function(){return-1},Object.defineProperties(pO,dO);var gO=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new cO(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new pO,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,YI.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new fO(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new jN;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new mN(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new CN;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,FI.ON),e.getLocation(1,FI.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,FI.LEFT),e.getLocation(1,FI.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,FI.RIGHT),e.getLocation(1,FI.RIGHT),2))},e}(QI),yO=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new aO,this._bufParams=t||null};yO.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},yO.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new YI(t.getLabel())).flip(),n.merge(r);var i=yO.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(yO.depthDelta(t.getLabel()))},yO.prototype.buildSubgraphs=function(t,e){for(var n=new xS,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new $C(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},yO.prototype.createSubgraphs=function(t){for(var e=new xS,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new VI;i.create(r),e.add(i)}}return pC.sort(e,pC.reverseOrder()),e},yO.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},yO.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new RC,n=new ZN;return n.setPrecisionModel(t),e.setSegmentIntersector(new uO(n)),e},yO.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new XC(n,this._bufParams),i=new KC(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new iC(new iO),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new oC(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},yO.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new gO(i.getCoordinates(),new YI(a));this.insertUniqueEdge(s)}}},yO.prototype.setNoder=function(t){this._workingNoder=t},yO.prototype.interfaces_=function(){return[]},yO.prototype.getClass=function(){return yO},yO.depthDelta=function(t){var e=t.getLocation(0,FI.LEFT),n=t.getLocation(0,FI.RIGHT);return e===wN.INTERIOR&&n===wN.EXTERIOR?1:e===wN.EXTERIOR&&n===wN.INTERIOR?-1:0},yO.convertSegStrings=function(t){for(var e=new OI,n=new xS;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var _O=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};_O.prototype.rescale=function(){var t=this;if(NN(arguments[0],gS))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&GN.out.println(i)}},_O.prototype.scale=function(){var t=this;if(NN(arguments[0],gS)){for(var e=arguments[0],n=new xS,r=e.iterator();r.hasNext();){var i=r.next();n.add(new IC(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new mN(Math.round((o[s].x-t._offsetX)*t._scaleFactor),Math.round((o[s].y-t._offsetY)*t._scaleFactor),o[s].z);var u=wS.removeRepeatedPoints(a);return u}},_O.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},_O.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},_O.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},_O.prototype.interfaces_=function(){return[TC]},_O.prototype.getClass=function(){return _O};var vO=function(){this._li=new ZN,this._segStrings=null;var t=arguments[0];this._segStrings=t},mO={fact:{configurable:!0}};vO.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=o.iterator();a.hasNext();)for(var s=a.next(),u=s.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new $N("found endpt/interior pt intersection at index "+l+" :pt "+i)},vO.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],a=arguments[1],s=o.getCoordinates(),u=a.getCoordinates(),l=0;l<s.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(o,l,a,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var g=h.getCoordinates()[f],y=h.getCoordinates()[f+1],_=p.getCoordinates()[d],v=p.getCoordinates()[d+1];if(this._li.computeIntersection(g,y,_,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,_,v)))throw new $N("found non-noded intersection at "+g+"-"+y+" and "+_+"-"+v)}},vO.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},vO.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},vO.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},vO.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $N("found non-noded collapse at "+vO.fact.createLineString([t,e,n]))},vO.prototype.interfaces_=function(){return[]},vO.prototype.getClass=function(){return vO},mO.fact.get=function(){return new OI},Object.defineProperties(vO,mO);var xO=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new fN("Scale factor must be non-zero");1!==e&&(this._pt=new mN(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new mN,this._p1Scaled=new mN),this.initCorners(this._pt)},bO={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};xO.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return QN.isTrue(!(a&&s),"Found bad envelope test"),s},xO.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new mN(this._maxx,this._maxy),this._corner[1]=new mN(this._minx,this._maxy),this._corner[2]=new mN(this._minx,this._miny),this._corner[3]=new mN(this._maxx,this._miny)},xO.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},xO.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},xO.prototype.getCoordinate=function(){return this._originalPt},xO.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},xO.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=xO.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new jN(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},xO.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},xO.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!r)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},xO.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},xO.prototype.interfaces_=function(){return[]},xO.prototype.getClass=function(){return xO},bO.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(xO,bO);var MO=function(){this.tempEnv1=new jN,this.selectedSegment=new CC};MO.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},MO.prototype.interfaces_=function(){return[]},MO.prototype.getClass=function(){return MO};var wO=function(){this._index=null;var t=arguments[0];this._index=t},EO={HotPixelSnapAction:{configurable:!0}};wO.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new NO(e,n,r);return this._index.query(i,{interfaces_:function(){return[lC]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},wO.prototype.interfaces_=function(){return[]},wO.prototype.getClass=function(){return wO},EO.HotPixelSnapAction.get=function(){return NO},Object.defineProperties(wO,EO);var NO=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(MO),SO=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new xS};SO.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},SO.prototype.isDone=function(){return!1},SO.prototype.getInteriorIntersections=function(){return this._interiorIntersections},SO.prototype.interfaces_=function(){return[sO]},SO.prototype.getClass=function(){return SO};var IO=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ZN,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};IO.prototype.checkCorrectness=function(t){var e=IC.getNodedSubstrings(t),n=new vO(e);try{n.checkValid()}catch(t){if(!(t instanceof FN))throw t;t.printStackTrace()}},IO.prototype.getNodedSubstrings=function(){return IC.getNodedSubstrings(this._nodedSegStrings)},IO.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},IO.prototype.findInteriorIntersections=function(t,e){var n=new SO(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},IO.prototype.computeVertexSnaps=function(){var t=this;if(NN(arguments[0],gS))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof IC)for(var i=arguments[0],o=i.getCoordinates(),a=0;a<o.length;a++){var s=new xO(o[a],t._scaleFactor,t._li),u=t._pointSnapper.snap(s,i,a);u&&i.addIntersection(o[a],a)}},IO.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new RC,this._pointSnapper=new wO(this._noder.getIndex()),this.snapRound(t,this._li)},IO.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new xO(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},IO.prototype.interfaces_=function(){return[TC]},IO.prototype.getClass=function(){return IO};var CO=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new FC,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},OO={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};CO.prototype.bufferFixedPrecision=function(t){var e=new _O(new IO(new NI(1)),t.getScale()),n=new yO(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},CO.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=CO.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof BI))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=CO.precisionScaleFactor(this._argGeom,this._distance,n),i=new NI(r);this.bufferFixedPrecision(i)}},CO.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===NI.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},CO.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},CO.prototype.bufferOriginalPrecision=function(){try{var t=new yO(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $N))throw t;this._saveException=t}},CO.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},CO.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},CO.prototype.interfaces_=function(){return[]},CO.prototype.getClass=function(){return CO},CO.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new CO(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof oS&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=arguments[2],s=new CO(i);s.setQuadrantSegments(a);var u=s.getResultGeometry(o);return u}if(arguments[2]instanceof FC&&arguments[0]instanceof oS&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],h=arguments[2],f=new CO(l,h),p=f.getResultGeometry(c);return p}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],_=arguments[3],v=new CO(d);v.setQuadrantSegments(y),v.setEndCapStyle(_);var m=v.getResultGeometry(g);return m}},CO.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=SN.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},OO.CAP_ROUND.get=function(){return FC.CAP_ROUND},OO.CAP_BUTT.get=function(){return FC.CAP_FLAT},OO.CAP_FLAT.get=function(){return FC.CAP_FLAT},OO.CAP_SQUARE.get=function(){return FC.CAP_SQUARE},OO.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(CO,OO);var PO=function(){this._pt=[new mN,new mN],this._distance=pN.NaN,this._isNull=!0};PO.prototype.getCoordinates=function(){return this._pt},PO.prototype.getCoordinate=function(t){return this._pt[t]},PO.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},PO.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},PO.prototype.getDistance=function(){return this._distance},PO.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},PO.prototype.interfaces_=function(){return[]},PO.prototype.getClass=function(){return PO};var LO=function(){};LO.prototype.interfaces_=function(){return[]},LO.prototype.getClass=function(){return LO},LO.computeDistance=function(){if(arguments[2]instanceof PO&&arguments[0]instanceof sI&&arguments[1]instanceof mN)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new CC,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof PO&&arguments[0]instanceof hI&&arguments[1]instanceof mN){var s=arguments[0],u=arguments[1],l=arguments[2];LO.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)LO.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof PO&&arguments[0]instanceof oS&&arguments[1]instanceof mN){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof sI)LO.computeDistance(h,f,p);else if(h instanceof hI)LO.computeDistance(h,f,p);else if(h instanceof $S)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);LO.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof PO&&arguments[0]instanceof CC&&arguments[1]instanceof mN){var _=arguments[0],v=arguments[1],m=arguments[2],x=_.closestPoint(v);m.setMinimum(x,v)}};var AO=function(t){this._maxPtDist=new PO,this._inputGeom=t||null},TO={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};AO.prototype.computeMaxMidpointDistance=function(t){var e=new RO(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},AO.prototype.computeMaxVertexDistance=function(t){var e=new kO(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},AO.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},AO.prototype.getDistancePoints=function(){return this._maxPtDist},AO.prototype.interfaces_=function(){return[]},AO.prototype.getClass=function(){return AO},TO.MaxPointDistanceFilter.get=function(){return kO},TO.MaxMidpointDistanceFilter.get=function(){return RO},Object.defineProperties(AO,TO);var kO=function(t){this._maxPtDist=new PO,this._minPtDist=new PO,this._geom=t||null};kO.prototype.filter=function(t){this._minPtDist.initialize(),LO.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},kO.prototype.getMaxPointDistance=function(){return this._maxPtDist},kO.prototype.interfaces_=function(){return[uS]},kO.prototype.getClass=function(){return kO};var RO=function(t){this._maxPtDist=new PO,this._minPtDist=new PO,this._geom=t||null};RO.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new mN((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),LO.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},RO.prototype.isDone=function(){return!1},RO.prototype.isGeometryChanged=function(){return!1},RO.prototype.getMaxPointDistance=function(){return this._maxPtDist},RO.prototype.interfaces_=function(){return[XS]},RO.prototype.getClass=function(){return RO};var DO=function(t){this._comps=t||null};DO.prototype.filter=function(t){t instanceof hI&&this._comps.add(t)},DO.prototype.interfaces_=function(){return[YS]},DO.prototype.getClass=function(){return DO},DO.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return DO.getPolygons(t,new xS)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof hI?n.add(e):e instanceof $S&&e.apply(new DO(n)),n}};var FO=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};FO.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof pI){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof sI&&this._lines.add(t)},FO.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},FO.prototype.interfaces_=function(){return[iS]},FO.prototype.getClass=function(){return FO},FO.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(FO.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(FO.getLines(e,n))}},FO.getLines=function(){if(1===arguments.length){var t=arguments[0];return FO.getLines(t,!1)}if(2===arguments.length){if(NN(arguments[0],gS)&&NN(arguments[1],gS)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();FO.getLines(i,n)}return n}if(arguments[0]instanceof oS&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new xS;return o.apply(new FO(s,a)),s}if(arguments[0]instanceof oS&&NN(arguments[1],gS)){var u=arguments[0],l=arguments[1];return u instanceof sI?l.add(u):u.apply(new FO(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&NN(arguments[0],gS)&&NN(arguments[1],gS)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();FO.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof oS&&NN(arguments[1],gS)){var g=arguments[0],y=arguments[1],_=arguments[2];return g.apply(new FO(y,_)),y}}};var zO=function(){if(this._boundaryRule=lS.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new fN("Rule must be non-null");this._boundaryRule=t}};zO.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof mN&&arguments[1]instanceof hI){var e=arguments[0],n=arguments[1];if(n.isEmpty())return wN.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===wN.EXTERIOR)return wN.EXTERIOR;if(i===wN.BOUNDARY)return wN.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o),s=t.locateInPolygonRing(e,a);if(s===wN.INTERIOR)return wN.EXTERIOR;if(s===wN.BOUNDARY)return wN.BOUNDARY}return wN.INTERIOR}if(arguments[0]instanceof mN&&arguments[1]instanceof sI){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return wN.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!u.equals(c[0])&&!u.equals(c[c.length-1])?nS.isOnLine(u,c)?wN.INTERIOR:wN.EXTERIOR:wN.BOUNDARY}if(arguments[0]instanceof mN&&arguments[1]instanceof lI){var h=arguments[0],f=arguments[1],p=f.getCoordinate();return p.equals2D(h)?wN.INTERIOR:wN.EXTERIOR}},zO.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?nS.locatePointInRing(t,e.getCoordinates()):wN.EXTERIOR},zO.prototype.intersects=function(t,e){return this.locate(t,e)!==wN.EXTERIOR},zO.prototype.updateLocationInfo=function(t){t===wN.INTERIOR&&(this._isIn=!0),t===wN.BOUNDARY&&this._numBoundaries++},zO.prototype.computeLocation=function(t,e){var n=this;if(e instanceof lI&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof sI)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof hI)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof HS)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof dI)for(var a=e,s=0;s<a.getNumGeometries();s++){var u=a.getGeometryN(s);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof $S)for(var l=new tO(e);l.hasNext();){var c=l.next();c!==e&&n.computeLocation(t,c)}},zO.prototype.locate=function(t,e){return e.isEmpty()?wN.EXTERIOR:e instanceof sI||e instanceof hI?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?wN.BOUNDARY:this._numBoundaries>0||this._isIn?wN.INTERIOR:wN.EXTERIOR)},zO.prototype.interfaces_=function(){return[]},zO.prototype.getClass=function(){return zO};var GO=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},qO={INSIDE_AREA:{configurable:!0}};GO.prototype.isInsideArea=function(){return this._segIndex===GO.INSIDE_AREA},GO.prototype.getCoordinate=function(){return this._pt},GO.prototype.getGeometryComponent=function(){return this._component},GO.prototype.getSegmentIndex=function(){return this._segIndex},GO.prototype.interfaces_=function(){return[]},GO.prototype.getClass=function(){return GO},qO.INSIDE_AREA.get=function(){return-1},Object.defineProperties(GO,qO);var jO=function(t){this._pts=t||null};jO.prototype.filter=function(t){t instanceof lI&&this._pts.add(t)},jO.prototype.interfaces_=function(){return[YS]},jO.prototype.getClass=function(){return jO},jO.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof lI?pC.singletonList(t):jO.getPoints(t,new xS)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof lI?n.add(e):e instanceof $S&&e.apply(new jO(n)),n}};var BO=function(){this._locations=null;var t=arguments[0];this._locations=t};BO.prototype.filter=function(t){(t instanceof lI||t instanceof sI||t instanceof hI)&&this._locations.add(new GO(t,0,t.getCoordinate()))},BO.prototype.interfaces_=function(){return[YS]},BO.prototype.getClass=function(){return BO},BO.getLocations=function(t){var e=new xS;return t.apply(new BO(e)),e};var UO=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new zO,this._minDistanceLocation=null,this._minDistance=pN.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};UO.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=DO.getPolygons(this._geom[n]);if(o.size()>0){var a=BO.getLocations(this._geom[i]);if(this.computeContainmentDistance(a,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&NN(arguments[0],vS)&&NN(arguments[1],vS)){for(var s=arguments[0],u=arguments[1],l=arguments[2],c=0;c<s.size();c++)for(var h=s.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof GO&&arguments[1]instanceof hI){var p=arguments[0],d=arguments[1],g=arguments[2],y=p.getCoordinate();if(wN.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=p,g[1]=new GO(d,y),null}},UO.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},UO.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=FO.getLines(this._geom[0]),n=FO.getLines(this._geom[1]),r=jO.getPoints(this._geom[0]),i=jO.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},UO.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},UO.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},UO.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},UO.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof sI&&arguments[1]instanceof lI){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),a=0;a<i.length-1;a++){var s=nS.distancePointLine(o,i[a],i[a+1]);if(s<t._minDistance){t._minDistance=s;var u=new CC(i[a],i[a+1]),l=u.closestPoint(o);r[0]=new GO(e,a,l),r[1]=new GO(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof sI&&arguments[1]instanceof sI){var c=arguments[0],h=arguments[1],f=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=c.getCoordinates(),d=h.getCoordinates(),g=0;g<p.length-1;g++)for(var y=0;y<d.length-1;y++){var _=nS.distanceLineLine(p[g],p[g+1],d[y],d[y+1]);if(_<t._minDistance){t._minDistance=_;var v=new CC(p[g],p[g+1]),m=new CC(d[y],d[y+1]),x=v.closestPoints(m);f[0]=new GO(c,g,x[0]),f[1]=new GO(h,y,x[1])}if(t._minDistance<=t._terminateDistance)return null}}},UO.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a),u=o.getCoordinate().distance(s.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new GO(o,0,o.getCoordinate()),n[1]=new GO(s,0,s.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},UO.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new fN("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},UO.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},UO.prototype.interfaces_=function(){return[]},UO.prototype.getClass=function(){return UO},UO.distance=function(t,e){return new UO(t,e).distance()},UO.isWithinDistance=function(t,e,n){return new UO(t,e,n).distance()<=n},UO.nearestPoints=function(t,e){return new UO(t,e).nearestPoints()};var VO=function(){this._pt=[new mN,new mN],this._distance=pN.NaN,this._isNull=!0};VO.prototype.getCoordinates=function(){return this._pt},VO.prototype.getCoordinate=function(t){return this._pt[t]},VO.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},VO.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},VO.prototype.toString=function(){return XN.toLineString(this._pt[0],this._pt[1])},VO.prototype.getDistance=function(){return this._distance},VO.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},VO.prototype.interfaces_=function(){return[]},VO.prototype.getClass=function(){return VO};var WO=function(){};WO.prototype.interfaces_=function(){return[]},WO.prototype.getClass=function(){return WO},WO.computeDistance=function(){if(arguments[2]instanceof VO&&arguments[0]instanceof sI&&arguments[1]instanceof mN)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new CC,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof VO&&arguments[0]instanceof hI&&arguments[1]instanceof mN){var s=arguments[0],u=arguments[1],l=arguments[2];WO.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)WO.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof VO&&arguments[0]instanceof oS&&arguments[1]instanceof mN){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof sI)WO.computeDistance(h,f,p);else if(h instanceof hI)WO.computeDistance(h,f,p);else if(h instanceof $S)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);WO.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof VO&&arguments[0]instanceof CC&&arguments[1]instanceof mN){var _=arguments[0],v=arguments[1],m=arguments[2],x=_.closestPoint(v);m.setMinimum(x,v)}};var YO=function(){this._g0=null,this._g1=null,this._ptDist=new VO,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},XO={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};YO.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},YO.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new fN("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},YO.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},YO.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},YO.prototype.computeOrientedDistance=function(t,e,n){var r=new $O(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new HO(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},YO.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},YO.prototype.interfaces_=function(){return[]},YO.prototype.getClass=function(){return YO},YO.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new YO(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new YO(r,i);return a.setDensifyFraction(o),a.distance()}},XO.MaxPointDistanceFilter.get=function(){return $O},XO.MaxDensifiedByFractionDistanceFilter.get=function(){return HO},Object.defineProperties(YO,XO);var $O=function(){this._maxPtDist=new VO,this._minPtDist=new VO,this._euclideanDist=new WO,this._geom=null;var t=arguments[0];this._geom=t};$O.prototype.filter=function(t){this._minPtDist.initialize(),WO.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},$O.prototype.getMaxPointDistance=function(){return this._maxPtDist},$O.prototype.interfaces_=function(){return[uS]},$O.prototype.getClass=function(){return $O};var HO=function(){this._maxPtDist=new VO,this._minPtDist=new VO,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};HO.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,a=(i.y-r.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var u=r.x+s*o,l=r.y+s*a,c=new mN(u,l);n._minPtDist.initialize(),WO.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},HO.prototype.isDone=function(){return!1},HO.prototype.isGeometryChanged=function(){return!1},HO.prototype.getMaxPointDistance=function(){return this._maxPtDist},HO.prototype.interfaces_=function(){return[XS]},HO.prototype.getClass=function(){return HO};var QO=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},JO={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};QO.prototype.checkMaximumDistance=function(t,e,n){var r=new YO(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+XN.toLineString(i[0],i[1])+")"}},QO.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=QO.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),QO.VERBOSE&&GN.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},QO.prototype.checkNegativeValid=function(){if(!(this._input instanceof hI||this._input instanceof dI||this._input instanceof $S))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},QO.prototype.getErrorIndicator=function(){return this._errorIndicator},QO.prototype.checkMinimumDistance=function(t,e,n){var r=new UO(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+XN.toLineString(i[0],i[1])+" )"}},QO.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},QO.prototype.getErrorLocation=function(){return this._errorLocation},QO.prototype.getPolygonLines=function(t){for(var e=new xS,n=new FO(e),r=DO.getPolygons(t).iterator();r.hasNext();){r.next().apply(n)}return t.getFactory().buildGeometry(e)},QO.prototype.getErrorMessage=function(){return this._errMsg},QO.prototype.interfaces_=function(){return[]},QO.prototype.getClass=function(){return QO},JO.VERBOSE.get=function(){return!1},JO.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(QO,JO);var KO=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},ZO={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};KO.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},KO.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*KO.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new jN(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new jN(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},KO.prototype.checkDistance=function(){var t=new QO(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},KO.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},KO.prototype.checkPolygonal=function(){this._result instanceof hI||this._result instanceof dI||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},KO.prototype.getErrorIndicator=function(){return this._errorIndicator},KO.prototype.getErrorLocation=function(){return this._errorLocation},KO.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},KO.prototype.report=function(t){if(!KO.VERBOSE)return null;GN.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},KO.prototype.getErrorMessage=function(){return this._errorMsg},KO.prototype.interfaces_=function(){return[]},KO.prototype.getClass=function(){return KO},KO.isValidMsg=function(t,e,n){var r=new KO(t,e,n);return r.isValid()?null:r.getErrorMessage()},KO.isValid=function(t,e,n){return!!new KO(t,e,n).isValid()},ZO.VERBOSE.get=function(){return!1},ZO.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(KO,ZO);var tP=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};tP.prototype.getCoordinates=function(){return this._pts},tP.prototype.size=function(){return this._pts.length},tP.prototype.getCoordinate=function(t){return this._pts[t]},tP.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},tP.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:EC.octant(this.getCoordinate(t),this.getCoordinate(t+1))},tP.prototype.setData=function(t){this._data=t},tP.prototype.getData=function(){return this._data},tP.prototype.toString=function(){return XN.toLineString(new xI(this._pts))},tP.prototype.interfaces_=function(){return[NC]},tP.prototype.getClass=function(){return tP};var eP=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new xS,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};eP.prototype.getInteriorIntersection=function(){return this._interiorIntersection},eP.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},eP.prototype.getIntersectionSegments=function(){return this._intSegments},eP.prototype.count=function(){return this._intersectionCount},eP.prototype.getIntersections=function(){return this._intersections},eP.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},eP.prototype.setKeepIntersections=function(t){this._keepIntersections=t},eP.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,r)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},eP.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},eP.prototype.hasIntersection=function(){return null!==this._interiorIntersection},eP.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},eP.prototype.interfaces_=function(){return[sO]},eP.prototype.getClass=function(){return eP},eP.createAllIntersectionsFinder=function(t){var e=new eP(t);return e.setFindAllIntersections(!0),e},eP.createAnyIntersectionFinder=function(t){return new eP(t)},eP.createIntersectionCounter=function(t){var e=new eP(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var nP=function(){this._li=new ZN,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};nP.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},nP.prototype.getIntersections=function(){return this._segInt.getIntersections()},nP.prototype.isValid=function(){return this.execute(),this._isValid},nP.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},nP.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new eP(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new RC;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},nP.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new BI(this.getErrorMessage(),this._segInt.getInteriorIntersection())},nP.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+XN.toLineString(t[0],t[1])+" and "+XN.toLineString(t[2],t[3])},nP.prototype.interfaces_=function(){return[]},nP.prototype.getClass=function(){return nP},nP.computeIntersections=function(t){var e=new nP(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var rP=function t(){this._nv=null;var e=arguments[0];this._nv=new nP(t.toSegmentStrings(e))};rP.prototype.checkValid=function(){this._nv.checkValid()},rP.prototype.interfaces_=function(){return[]},rP.prototype.getClass=function(){return rP},rP.toSegmentStrings=function(t){for(var e=new xS,n=t.iterator();n.hasNext();){var r=n.next();e.add(new tP(r.getCoordinates(),r))}return e},rP.checkValid=function(t){new rP(t).checkValid()};var iP=function(t){this._mapOp=t};iP.prototype.map=function(t){for(var e=new xS,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(OI.toGeometryArray(e))},iP.prototype.interfaces_=function(){return[]},iP.prototype.getClass=function(){return iP},iP.map=function(t,e){return new iP(e).map(t)};var oP=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new xS,this._resultLineList=new xS;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};oP.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},oP.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},oP.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},oP.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!GP.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},oP.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},oP.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},oP.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},oP.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(QN.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(GP.isResultOfOp(r,e)&&e===GP.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},oP.prototype.interfaces_=function(){return[]},oP.prototype.getClass=function(){return oP};var aP=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new xS;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};aP.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},aP.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&(!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===GP.INTERSECTION))){var r=n.getLabel();GP.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},aP.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},aP.prototype.interfaces_=function(){return[]},aP.prototype.getClass=function(){return aP};var sP=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};sP.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},sP.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof pI&&!r.isEmpty()||(n=!1);for(var i=new xS,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof pI||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new xS;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},sP.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},sP.prototype.getInputGeometry=function(){return this._inputGeom},sP.prototype.transformMultiLineString=function(t,e){for(var n=new xS,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},sP.prototype.transformCoordinates=function(t,e){return this.copy(t)},sP.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},sP.prototype.transformMultiPoint=function(t,e){for(var n=new xS,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},sP.prototype.transformMultiPolygon=function(t,e){for(var n=new xS,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},sP.prototype.copy=function(t){return t.copy()},sP.prototype.transformGeometryCollection=function(t,e){for(var n=new xS,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(OI.toGeometryArray(n)):this._factory.buildGeometry(n)},sP.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof lI)return this.transformPoint(t,null);if(t instanceof fI)return this.transformMultiPoint(t,null);if(t instanceof pI)return this.transformLinearRing(t,null);if(t instanceof sI)return this.transformLineString(t,null);if(t instanceof HS)return this.transformMultiLineString(t,null);if(t instanceof hI)return this.transformPolygon(t,null);if(t instanceof dI)return this.transformMultiPolygon(t,null);if(t instanceof $S)return this.transformGeometryCollection(t,null);throw new fN("Unknown Geometry subtype: "+t.getClass().getName())},sP.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},sP.prototype.interfaces_=function(){return[]},sP.prototype.getClass=function(){return sP};var uP=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new CC,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof sI&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};uP.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new mN(o)),0===r&&this._isClosed&&t.set(t.size()-1,new mN(o)))}},uP.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},uP.prototype.snapTo=function(t){var e=new MS(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},uP.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new mN(i),!1)}},uP.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=pN.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<r&&(r=a,i=o)}return i},uP.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},uP.prototype.interfaces_=function(){return[]},uP.prototype.getClass=function(){return uP},uP.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var lP=function(t){this._srcGeom=t||null},cP={SNAP_PRECISION_FACTOR:{configurable:!0}};lP.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new hP(e,n).transform(this._srcGeom)},lP.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new hP(t,n,!0).transform(this._srcGeom),i=r;return e&&NN(i,cI)&&(i=r.buffer(0)),i},lP.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},lP.prototype.extractTargetCoordinates=function(t){for(var e=new jS,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},lP.prototype.computeMinimumSegmentLength=function(t){for(var e=pN.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},lP.prototype.interfaces_=function(){return[]},lP.prototype.getClass=function(){return lP},lP.snap=function(t,e,n){var r=new Array(2).fill(null),i=new lP(t);r[0]=i.snapTo(e,n);var o=new lP(e);return r[1]=o.snapTo(r[0],n),r},lP.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=lP.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===NI.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(lP.computeOverlaySnapTolerance(i),lP.computeOverlaySnapTolerance(o))}},lP.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*lP.SNAP_PRECISION_FACTOR},lP.snapToSelf=function(t,e,n){return new lP(t).snapToSelf(e,n)},cP.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(lP,cP);var hP=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new uP(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(sP),fP=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};fP.prototype.getCommon=function(){return pN.longBitsToDouble(this._commonBits)},fP.prototype.add=function(t){var e=pN.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=fP.signExpBits(this._commonBits),this._isFirst=!1,null):fP.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=fP.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=fP.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},fP.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=pN.longBitsToDouble(t),n=pN.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},fP.prototype.interfaces_=function(){return[]},fP.prototype.getClass=function(){return fP},fP.getBit=function(t,e){return 0!=(t&1<<e)?1:0},fP.signExpBits=function(t){return t>>52},fP.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},fP.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(fP.getBit(t,r)!==fP.getBit(e,r))return n;n++}return 52};var pP=function(){this._commonCoord=null,this._ccFilter=new gP},dP={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};pP.prototype.addCommonBits=function(t){var e=new yP(this._commonCoord);t.apply(e),t.geometryChanged()},pP.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new mN(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new yP(e);return t.apply(n),t.geometryChanged(),t},pP.prototype.getCommonCoordinate=function(){return this._commonCoord},pP.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},pP.prototype.interfaces_=function(){return[]},pP.prototype.getClass=function(){return pP},dP.CommonCoordinateFilter.get=function(){return gP},dP.Translater.get=function(){return yP},Object.defineProperties(pP,dP);var gP=function(){this._commonBitsX=new fP,this._commonBitsY=new fP};gP.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},gP.prototype.getCommonCoordinate=function(){return new mN(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},gP.prototype.interfaces_=function(){return[uS]},gP.prototype.getClass=function(){return gP};var yP=function(){this.trans=null;var t=arguments[0];this.trans=t};yP.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},yP.prototype.isDone=function(){return!1},yP.prototype.isGeometryChanged=function(){return!0},yP.prototype.interfaces_=function(){return[XS]},yP.prototype.getClass=function(){return yP};var _P=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};_P.prototype.selfSnap=function(t){return new lP(t).snapTo(t,this._snapTolerance)},_P.prototype.removeCommonBits=function(t){this._cbr=new pP,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},_P.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},_P.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=GP.overlayOp(e[0],e[1],t);return this.prepareResult(n)},_P.prototype.checkValid=function(t){t.isValid()||GN.out.println("Snapped geometry is invalid")},_P.prototype.computeSnapTolerance=function(){this._snapTolerance=lP.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},_P.prototype.snap=function(t){var e=this.removeCommonBits(t);return lP.snap(e[0],e[1],this._snapTolerance)},_P.prototype.interfaces_=function(){return[]},_P.prototype.getClass=function(){return _P},_P.overlayOp=function(t,e,n){return new _P(t,e).getResultGeometry(n)},_P.union=function(t,e){return _P.overlayOp(t,e,GP.UNION)},_P.intersection=function(t,e){return _P.overlayOp(t,e,GP.INTERSECTION)},_P.symDifference=function(t,e){return _P.overlayOp(t,e,GP.SYMDIFFERENCE)},_P.difference=function(t,e){return _P.overlayOp(t,e,GP.DIFFERENCE)};var vP=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};vP.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=GP.overlayOp(this._geom[0],this._geom[1],t);n=!0}catch(t){if(!(t instanceof $N))throw t;r=t}if(!n)try{e=_P.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $N?r:t}return e},vP.prototype.interfaces_=function(){return[]},vP.prototype.getClass=function(){return vP},vP.overlayOp=function(t,e,n){return new vP(t,e).getResultGeometry(n)},vP.union=function(t,e){return vP.overlayOp(t,e,GP.UNION)},vP.intersection=function(t,e){return vP.overlayOp(t,e,GP.INTERSECTION)},vP.symDifference=function(t,e){return vP.overlayOp(t,e,GP.SYMDIFFERENCE)},vP.difference=function(t,e){return vP.overlayOp(t,e,GP.DIFFERENCE)};var mP=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};mP.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},mP.prototype.interfaces_=function(){return[]},mP.prototype.getClass=function(){return mP};var xP=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},bP={INSERT:{configurable:!0},DELETE:{configurable:!0}};xP.prototype.isDelete=function(){return this._eventType===xP.DELETE},xP.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},xP.prototype.getObject=function(){return this._obj},xP.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},xP.prototype.getInsertEvent=function(){return this._insertEvent},xP.prototype.isInsert=function(){return this._eventType===xP.INSERT},xP.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},xP.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},xP.prototype.interfaces_=function(){return[gN]},xP.prototype.getClass=function(){return xP},bP.INSERT.get=function(){return 1},bP.DELETE.get=function(){return 2},Object.defineProperties(xP,bP);var MP=function(){};MP.prototype.interfaces_=function(){return[]},MP.prototype.getClass=function(){return MP};var wP=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};wP.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(wP.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},wP.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},wP.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},wP.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},wP.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},wP.prototype.hasProperIntersection=function(){return this._hasProper},wP.prototype.hasIntersection=function(){return this._hasIntersection},wP.prototype.isDone=function(){return this._isDone},wP.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},wP.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},wP.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},wP.prototype.interfaces_=function(){return[]},wP.prototype.getClass=function(){return wP},wP.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var EP=function(t){function e(){t.call(this),this.events=new xS,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){pC.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof wP&&NN(arguments[0],vS)&&NN(arguments[1],vS)){var i=arguments[0],o=arguments[1],a=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(a)}else if("boolean"==typeof arguments[2]&&NN(arguments[0],vS)&&arguments[1]instanceof wP){var s=arguments[0],u=arguments[1],l=arguments[2];l?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new mP(n,i),a=new xP(e,n.getMinX(i),o);this.events.add(a),this.events.add(new xP(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.iterator();a.hasNext();){var s=a.next();t.addEdge(s,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(MP),NP=function(){this._min=pN.POSITIVE_INFINITY,this._max=pN.NEGATIVE_INFINITY},SP={NodeComparator:{configurable:!0}};NP.prototype.getMin=function(){return this._min},NP.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},NP.prototype.getMax=function(){return this._max},NP.prototype.toString=function(){return XN.toLineString(new mN(this._min,0),new mN(this._max,0))},NP.prototype.interfaces_=function(){return[]},NP.prototype.getClass=function(){return NP},SP.NodeComparator.get=function(){return IP},Object.defineProperties(NP,SP);var IP=function(){};IP.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},IP.prototype.interfaces_=function(){return[_N]},IP.prototype.getClass=function(){return IP};var CP=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(NP),OP=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(NP),PP=function(){this._leaves=new xS,this._root=null,this._level=0};PP.prototype.buildTree=function(){pC.sort(this._leaves,new NP.NodeComparator);for(var t=this._leaves,e=null,n=new xS;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},PP.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new CP(t,e,n))},PP.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},PP.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},PP.prototype.printNode=function(t){GN.out.println(XN.toLineString(new mN(t._min,this._level),new mN(t._max,this._level)))},PP.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},PP.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new OP(t.get(n),t.get(n+1));e.add(i)}}},PP.prototype.interfaces_=function(){return[]},PP.prototype.getClass=function(){return PP};var LP=function(){this._items=new xS};LP.prototype.visitItem=function(t){this._items.add(t)},LP.prototype.getItems=function(){return this._items},LP.prototype.interfaces_=function(){return[lC]},LP.prototype.getClass=function(){return LP};var AP=function(){this._index=null;var t=arguments[0];if(!NN(t,cI))throw new fN("Argument must be Polygonal");this._index=new RP(t)},TP={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};AP.prototype.locate=function(t){var e=new eS(t),n=new kP(e);return this._index.query(t.y,t.y,n),e.getLocation()},AP.prototype.interfaces_=function(){return[ZC]},AP.prototype.getClass=function(){return AP},TP.SegmentVisitor.get=function(){return kP},TP.IntervalIndexedGeometry.get=function(){return RP},Object.defineProperties(AP,TP);var kP=function(){this._counter=null;var t=arguments[0];this._counter=t};kP.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},kP.prototype.interfaces_=function(){return[lC]},kP.prototype.getClass=function(){return kP};var RP=function(){this._index=new PP;var t=arguments[0];this.init(t)};RP.prototype.init=function(t){for(var e=FO.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},RP.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new CC(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},RP.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new LP;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},RP.prototype.interfaces_=function(){return[]},RP.prototype.getClass=function(){return RP};var DP=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new EI,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new zO,2===arguments.length){var e=arguments[0],n=arguments[1],r=lS.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,FI.ON)===wN.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new wP(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof pI||this._parentGeom instanceof hI||this._parentGeom instanceof dI,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new wP(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof lI){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,wN.INTERIOR)}else if(arguments[0]instanceof mN){var n=arguments[0];this.insertPoint(this._argIndex,n,wN.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),wN.EXTERIOR,wN.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,wN.INTERIOR,wN.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],wN.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],wN.BOUNDARY)},e.prototype.addLineString=function(t){var e=wS.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new gO(e,new YI(this._argIndex,wN.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),QN.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===wN.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=wS.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;nS.isCCW(r)&&(i=n,o=e);var a=new gO(r,new YI(this._argIndex,wN.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],wN.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new YI(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new EP},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof dI&&(this._useBoundaryDeterminationRule=!1),e instanceof hI)this.addPolygon(e);else if(e instanceof sI)this.addLineString(e);else if(e instanceof lI)this.addPoint(e);else if(e instanceof fI)this.addCollection(e);else if(e instanceof HS)this.addCollection(e);else if(e instanceof dI)this.addCollection(e);else{if(!(e instanceof $S))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return NN(this._parentGeom,cI)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new AP(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?wN.BOUNDARY:wN.INTERIOR},e}(iC),FP=function(){if(this._li=new ZN,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new DP(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=lS.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new DP(0,e,r),this._arg[1]=new DP(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new DP(0,i,a),this._arg[1]=new DP(1,o,a)}};FP.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},FP.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},FP.prototype.interfaces_=function(){return[]},FP.prototype.getClass=function(){return FP};var zP=function(){};zP.prototype.interfaces_=function(){return[]},zP.prototype.getClass=function(){return zP},zP.map=function(){if(arguments[0]instanceof oS&&NN(arguments[1],zP.MapOp)){for(var t=arguments[0],e=arguments[1],n=new xS,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(NN(arguments[0],gS)&&NN(arguments[1],zP.MapOp)){for(var o=arguments[0],a=arguments[1],s=new xS,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},zP.MapOp=function(){};var GP=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new zO,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new aO,this._resultPolyList=new xS,this._resultLineList=new xS,this._resultPointList=new xS,this._graph=new iC(new iO),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new YI(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new xS;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==wN.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new xS,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new xS;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),rP.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new oC(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new oP(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new aP(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,FI.RIGHT),i.getLocation(1,FI.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(QN.isTrue(!r.isNull(i,FI.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,FI.LEFT,r.getLocation(i,FI.LEFT)),QN.isTrue(!r.isNull(i,FI.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,FI.RIGHT,r.getLocation(i,FI.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(FP);GP.overlayOp=function(t,e,n){return new GP(t,e).getResultGeometry(n)},GP.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return GP.createEmptyResult(GP.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return iP.map(t,{interfaces_:function(){return[zP.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),vP.overlayOp(t,e,GP.INTERSECTION)},GP.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return GP.createEmptyResult(GP.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),vP.overlayOp(t,e,GP.SYMDIFFERENCE)},GP.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case GP.INTERSECTION:o=Math.min(r,i);break;case GP.UNION:o=Math.max(r,i);break;case GP.DIFFERENCE:o=r;break;case GP.SYMDIFFERENCE:o=Math.max(r,i)}return o},GP.createEmptyResult=function(t,e,n,r){var i=null;switch(GP.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},GP.difference=function(t,e){return t.isEmpty()?GP.createEmptyResult(GP.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),vP.overlayOp(t,e,GP.DIFFERENCE))},GP.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return GP.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===wN.BOUNDARY&&(i=wN.INTERIOR),o===wN.BOUNDARY&&(o=wN.INTERIOR),a){case GP.INTERSECTION:return i===wN.INTERIOR&&o===wN.INTERIOR;case GP.UNION:return i===wN.INTERIOR||o===wN.INTERIOR;case GP.DIFFERENCE:return i===wN.INTERIOR&&o!==wN.INTERIOR;case GP.SYMDIFFERENCE:return i===wN.INTERIOR&&o!==wN.INTERIOR||i!==wN.INTERIOR&&o===wN.INTERIOR}return!1}},GP.INTERSECTION=1,GP.UNION=2,GP.DIFFERENCE=3,GP.SYMDIFFERENCE=4;var qP=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new zO,this._seg=new CC;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};qP.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++){if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0}return!1},qP.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?wN.BOUNDARY:this._ptLocator.locate(t,this._g)},qP.prototype.extractLinework=function(t){var e=new jP;t.apply(e);var n=e.getLinework(),r=OI.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},qP.prototype.interfaces_=function(){return[]},qP.prototype.getClass=function(){return qP};var jP=function(){this._linework=null,this._linework=new xS};jP.prototype.getLinework=function(){return this._linework},jP.prototype.filter=function(t){if(t instanceof hI){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},jP.prototype.interfaces_=function(){return[YS]},jP.prototype.getClass=function(){return jP};var BP=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};BP.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},BP.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},BP.prototype.getPoints=function(t){for(var e=new xS,n=FO.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},BP.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new mN(l-u,c+s);r.add(h)}if(this._doRight){var f=new mN(l+u,c-s);r.add(f)}},BP.prototype.interfaces_=function(){return[]},BP.prototype.getClass=function(){return BP};var UP=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new xS;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new qP(this._geom[0],this._boundaryDistanceTolerance),new qP(this._geom[1],this._boundaryDistanceTolerance),new qP(this._geom[2],this._boundaryDistanceTolerance)]},VP={TOLERANCE:{configurable:!0}};UP.prototype.reportResult=function(t,e,n){GN.out.println("Overlay result invalid - A:"+wN.toLocationSymbol(e[0])+" B:"+wN.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+wN.toLocationSymbol(e[2]))},UP.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},UP.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!UP.hasLocation(this._location,wN.BOUNDARY)||this.isValidResult(i,this._location)}},UP.prototype.addTestPts=function(t){var e=new BP(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},UP.prototype.isValidResult=function(t,e){var n=GP.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===wN.INTERIOR);return r||this.reportResult(t,e,n),r},UP.prototype.getInvalidLocation=function(){return this._invalidLocation},UP.prototype.interfaces_=function(){return[]},UP.prototype.getClass=function(){return UP},UP.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},UP.computeBoundaryDistanceTolerance=function(t,e){return Math.min(lP.computeSizeBasedSnapTolerance(t),lP.computeSizeBasedSnapTolerance(e))},UP.isValid=function(t,e,n,r){return new UP(t,e,r).isValid(n)},VP.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(UP,VP);var WP=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};WP.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},WP.prototype.combine=function(){for(var t=new xS,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},WP.prototype.interfaces_=function(){return[]},WP.prototype.getClass=function(){return WP},WP.combine=function(){if(1===arguments.length){var t=arguments[0],e=new WP(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new WP(WP.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=new WP(WP.createList(o,a,s));return u.combine()}},WP.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},WP.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new xS;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new xS;return a.add(r),a.add(i),a.add(o),a}};var YP=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new xS)},XP={STRTREE_NODE_CAPACITY:{configurable:!0}};YP.prototype.reduceToGeometries=function(t){for(var e=new xS,n=t.iterator();n.hasNext();){var r=n.next(),i=null;NN(r,vS)?i=this.unionTree(r):r instanceof oS&&(i=r),e.add(i)}return e},YP.prototype.extractByEnvelope=function(t,e,n){for(var r=new xS,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},YP.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return WP.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},YP.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new mC(YP.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},YP.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=YP.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(YP.getGeometry(e,n),YP.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},YP.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},YP.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},YP.prototype.unionActual=function(t,e){return YP.restrictToPolygons(t.union(e))},YP.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},YP.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new xS,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),WP.combine(r)},YP.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i.getFactory(),s=a.createGeometryCollection([i,o]),u=s.buffer(0);return u}},YP.prototype.interfaces_=function(){return[]},YP.prototype.getClass=function(){return YP},YP.restrictToPolygons=function(t){if(NN(t,cI))return t;var e=DO.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(OI.toPolygonArray(e))},YP.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},YP.union=function(t){return new YP(t).union()},XP.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(YP,XP);var $P=function(){};function HP(){return new QP}function QP(){this.reset()}$P.prototype.interfaces_=function(){return[]},$P.prototype.getClass=function(){return $P},$P.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return GP.createEmptyResult(GP.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),vP.overlayOp(t,e,GP.UNION)},QP.prototype={constructor:QP,reset:function(){this.s=this.t=0},add:function(t){KP(JP,t,this.t),KP(this,JP.s,this.s),this.s?this.t+=JP.t:this.s=JP.t},valueOf:function(){return this.s}};var JP=new QP;function KP(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var ZP=1e-6,tL=Math.PI,eL=tL/2,nL=tL/4,rL=2*tL,iL=180/tL,oL=tL/180,aL=Math.abs,sL=Math.atan,uL=Math.atan2,lL=Math.cos,cL=Math.sin,hL=Math.sqrt;function fL(t){return t>1?0:t<-1?tL:Math.acos(t)}function pL(t){return t>1?eL:t<-1?-eL:Math.asin(t)}function dL(){}function gL(t,e){t&&mL.hasOwnProperty(t.type)&&mL[t.type](t,e)}var yL,_L,vL={Feature:function(t,e){gL(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)gL(n[r].geometry,e)}},mL={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){xL(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xL(n[r],e,0)},Polygon:function(t,e){bL(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)bL(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)gL(n[r],e)}};function xL(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function bL(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)xL(t[n],e,1);e.polygonEnd()}function ML(t){return[uL(t[1],t[0]),pL(t[2])]}function wL(t){var e=t[0],n=t[1],r=lL(n);return[r*lL(e),r*cL(e),cL(n)]}function EL(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function NL(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function SL(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function IL(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function CL(t){var e=hL(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function OL(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function PL(t,e){return[t>tL?t-rL:t<-tL?t+rL:t,e]}function LL(t){return function(e,n){return[(e+=t)>tL?e-rL:e<-tL?e+rL:e,n]}}function AL(t){var e=LL(t);return e.invert=LL(-t),e}function TL(t,e){var n=lL(t),r=cL(t),i=lL(e),o=cL(e);function a(t,e){var a=lL(e),s=lL(t)*a,u=cL(t)*a,l=cL(e),c=l*n+s*r;return[uL(u*i-c*o,s*n-l*r),pL(c*i+u*o)]}return a.invert=function(t,e){var a=lL(e),s=lL(t)*a,u=cL(t)*a,l=cL(e),c=l*i-u*o;return[uL(u*i+l*o,s*n+c*r),pL(c*n-s*r)]},a}function kL(t,e){(e=wL(e))[0]-=t,CL(e);var n=fL(-e[1]);return((-e[2]<0?-n:n)+rL-ZP)%rL}function RL(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:dL,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function DL(t,e){return aL(t[0]-e[0])<ZP&&aL(t[1]-e[1])<ZP}function FL(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function zL(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(DL(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new FL(r,t,null,!0)),u.push(n.o=new FL(r,null,n,!1)),s.push(n=new FL(a,t,null,!1)),u.push(n.o=new FL(a,null,n,!0))}})),s.length){for(u.sort(e),GL(s),GL(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function GL(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function qL(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function jL(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}HP(),HP(),HP(),PL.invert=PL,1===(yL=qL).length&&(_L=yL,yL=function(t,e){return qL(_L(t),e)});var BL=1e9,UL=-BL;function VL(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,h=0;if(null==i||(c=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==h);else l.point(o[0],o[1])}function a(r,i){return aL(r[0]-t)<ZP?i>0?0:3:aL(r[0]-n)<ZP?i>0?2:1:aL(r[1]-e)<ZP?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,h,f,p,d,g,y,_,v,m=a,x=RL(),b={point:M,lineStart:function(){b.point=w,l&&l.push(c=[]);_=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(w(h,f),p&&y&&x.rejoin(),u.push(x.result()));b.point=M,y&&m.lineEnd()},polygonStart:function(){m=x,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,h=s[0],f=h[0],p=h[1];u<c;++u)o=f,a=p,f=(h=s[u])[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=jL(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&zL(u,s,e,o,a),a.polygonEnd());m=a,u=l=c=null}};function M(t,e){i(t,e)&&m.point(t,e)}function w(o,a){var s=i(o,a);if(l&&c.push([o,a]),_)h=o,f=a,p=s,_=!1,s&&(m.lineStart(),m.point(o,a));else if(s&&y)m.point(o,a);else{var u=[d=Math.max(UL,Math.min(BL,d)),g=Math.max(UL,Math.min(BL,g))],x=[o=Math.max(UL,Math.min(BL,o)),a=Math.max(UL,Math.min(BL,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}}(u,x,t,e,n,r)?s&&(m.lineStart(),m.point(o,a),v=!1):(y||(m.lineStart(),m.point(u[0],u[1])),m.point(x[0],x[1]),s||m.lineEnd(),v=!1)}d=o,g=a,y=s}return b}}var WL=HP();function YL(t){return t}HP(),HP(),HP();var XL=1/0,$L=XL,HL=-XL,QL=HL,JL={point:function(t,e){t<XL&&(XL=t);t>HL&&(HL=t);e<$L&&($L=e);e>QL&&(QL=e)},lineStart:dL,lineEnd:dL,polygonStart:dL,polygonEnd:dL,result:function(){var t=[[XL,$L],[HL,QL]];return HL=QL=-($L=XL=1/0),t}};function KL(t,e,n,r){return function(i,o){var a,s,u,l=e(o),c=i.invert(r[0],r[1]),h=RL(),f=e(h),p=!1,d={point:g,lineStart:_,lineEnd:v,polygonStart:function(){d.point=m,d.lineStart=x,d.lineEnd=b,s=[],a=[]},polygonEnd:function(){d.point=g,d.lineStart=_,d.lineEnd=v,s=jL(s);var t=function(t,e){var n=e[0],r=e[1],i=[cL(n),-lL(n),0],o=0,a=0;WL.reset();for(var s=0,u=t.length;s<u;++s)if(c=(l=t[s]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+nL,d=cL(p),g=lL(p),y=0;y<c;++y,f=v,d=x,g=b,h=_){var _=l[y],v=_[0],m=_[1]/2+nL,x=cL(m),b=lL(m),M=v-f,w=M>=0?1:-1,E=w*M,N=E>tL,S=d*x;if(WL.add(uL(S*w*cL(E),g*b+S*lL(E))),o+=N?M+w*rL:M,N^f>=n^v>=n){var I=NL(wL(h),wL(_));CL(I);var C=NL(i,I);CL(C);var O=(N^M>=0?-1:1)*pL(C[2]);(r>O||r===O&&(I[0]||I[1]))&&(a+=N^M>=0?1:-1)}}return(o<-ZP||o<ZP&&WL<-ZP)^1&a}(a,c);s.length?(p||(o.polygonStart(),p=!0),zL(s,tA,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function y(t,e){var n=i(t,e);l.point(n[0],n[1])}function _(){d.point=y,l.lineStart()}function v(){d.point=g,l.lineEnd()}function m(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function x(){f.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),a.push(u),u=null,c)if(1&i){if((e=(n=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),s.push(l.filter(ZL))}return d}}function ZL(t){return t.length>1}function tA(t,e){return((t=t.x)[0]<0?t[1]-eL-ZP:eL-t[1])-((e=e.x)[0]<0?e[1]-eL-ZP:eL-e[1])}HP();var eA=KL((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?tL:-tL,u=aL(o-n);aL(u-tL)<ZP?(t.point(n,r=(r+a)/2>0?eL:-eL),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=tL&&(aL(n-i)<ZP&&(n-=i*ZP),aL(o-s)<ZP&&(o-=s*ZP),r=function(t,e,n,r){var i,o,a=cL(t-n);return aL(a)>ZP?sL((cL(e)*(o=lL(r))*cL(n)-cL(r)*(i=lL(e))*cL(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*eL,r.point(-tL,i),r.point(0,i),r.point(tL,i),r.point(tL,0),r.point(tL,-i),r.point(0,-i),r.point(-tL,-i),r.point(-tL,0),r.point(-tL,i);else if(aL(t[0]-e[0])>ZP){var o=t[0]<e[0]?tL:-tL;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-tL,-eL]);function nA(t,e){var n=lL(t),r=n>0,i=aL(n)>ZP;function o(t,e){return lL(t)*lL(e)>n}function a(t,e,r){var i=[1,0,0],o=NL(wL(t),wL(e)),a=EL(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=n*a/u,c=-n*s/u,h=NL(i,o),f=IL(i,l);SL(f,IL(o,c));var p=h,d=EL(f,p),g=EL(p,p),y=d*d-g*(EL(f,f)-1);if(!(y<0)){var _=hL(y),v=IL(p,(-d-_)/g);if(SL(v,f),v=ML(v),!r)return v;var m,x=t[0],b=e[0],M=t[1],w=e[1];b<x&&(m=x,x=b,b=m);var E=b-x,N=aL(E-tL)<ZP;if(!N&&w<M&&(m=M,M=w,w=m),N||E<ZP?N?M+w>0^v[1]<(aL(v[0]-x)<ZP?M:w):M<=v[1]&&v[1]<=w:E>tL^(x<=v[0]&&v[0]<=b)){var S=IL(p,(-d+_)/g);return SL(S,f),[v,ML(S)]}}}function s(e,n){var i=r?t:tL-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return KL(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=o(h,f),y=r?g?0:s(h,f):g?s(h+(h<0?tL:-tL),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(p=a(e,d))||DL(e,p)||DL(d,p))&&(d[0]+=ZP,d[1]+=ZP,g=o(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var _;y&n||!(_=a(d,e,!0))||(c=0,r?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!g||e&&DL(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=lL(e),s=cL(e),u=r*n;null==i?(i=e+r*rL,o=e-u/2):(i=kL(a,i),o=kL(a,o),(r>0?i<o:i>o)&&(i+=r*rL));for(var l,c=i;r>0?c>o:c<o;c-=u)l=ML([a,-s*lL(c),-s*cL(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-tL,t-tL])}function rA(t){return function(e){var n=new iA;for(var r in t)n[r]=t[r];return n.stream=e,n}}function iA(){}function oA(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&vL.hasOwnProperty(t.type)?vL[t.type](t,e):gL(t,e)}(n,t.stream(JL));var a=JL.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,l])}iA.prototype={constructor:iA,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var aA=lL(30*oL);function sA(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,h,f,p,d,g,y){var _=l-r,v=c-i,m=_*_+v*v;if(m>4*e&&g--){var x=a+f,b=s+p,M=u+d,w=hL(x*x+b*b+M*M),E=pL(M/=w),N=aL(aL(M)-1)<ZP||aL(o-h)<ZP?(o+h)/2:uL(b,x),S=t(N,E),I=S[0],C=S[1],O=I-r,P=C-i,L=v*O-_*P;(L*L/m>e||aL((_*O+v*P)/m-.5)>.3||a*f+s*p+u*d<aA)&&(n(r,i,o,a,s,u,I,C,N,x/=w,b/=w,M,g,y),y.point(I,C),n(I,C,N,x,b,M,l,c,h,f,p,d,g,y))}}return function(e){var r,i,o,a,s,u,l,c,h,f,p,d,g={point:y,lineStart:_,lineEnd:m,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function _(){c=NaN,g.point=v,e.lineStart()}function v(r,i){var o=wL([r,i]),a=t(r,i);n(c,h,l,f,p,d,c=a[0],h=a[1],l=r,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function m(){g.point=y,e.lineEnd()}function x(){_(),g.point=b,g.lineEnd=M}function b(t,e){v(r=t,e),i=c,o=h,a=f,s=p,u=d,g.point=v}function M(){n(c,h,l,f,p,d,i,o,r,a,s,u,16,e),g.lineEnd=m,m()}return g}}(t,e):function(t){return rA({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var uA=rA({point:function(t,e){this.stream.point(t*oL,e*oL)}});function lA(t){return function(t){var e,n,r,i,o,a,s,u,l,c,h=150,f=480,p=250,d=0,g=0,y=0,_=0,v=0,m=null,x=eA,b=null,M=YL,w=.5,E=sA(I,w);function N(t){return[(t=o(t[0]*oL,t[1]*oL))[0]*h+n,r-t[1]*h]}function S(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*iL,t[1]*iL]}function I(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function C(){o=OL(i=function(t,e,n){return(t%=rL)?e||n?OL(AL(t),TL(e,n)):AL(t):e||n?TL(e,n):PL}(y,_,v),e);var t=e(d,g);return n=f-t[0]*h,r=p+t[1]*h,O()}function O(){return l=c=null,N}return N.stream=function(t){return l&&c===t?l:l=uA(x(i,E(M(c=t))))},N.clipAngle=function(t){return arguments.length?(x=+t?nA(m=t*oL,6*oL):(m=null,eA),O()):m*iL},N.clipExtent=function(t){return arguments.length?(M=null==t?(b=a=s=u=null,YL):VL(b=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),O()):null==b?null:[[b,a],[s,u]]},N.scale=function(t){return arguments.length?(h=+t,C()):h},N.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],C()):[f,p]},N.center=function(t){return arguments.length?(d=t[0]%360*oL,g=t[1]%360*oL,C()):[d*iL,g*iL]},N.rotate=function(t){return arguments.length?(y=t[0]%360*oL,_=t[1]%360*oL,v=t.length>2?t[2]%360*oL:0,C()):[y*iL,_*iL,v*iL]},N.precision=function(t){return arguments.length?(E=sA(I,w=t*t),O()):hL(w)},N.fitExtent=function(t,e){return oA(N,t,e)},N.fitSize=function(t,e){return function(t,e,n){return oA(t,[[0,0],e],n)}(N,t,e)},function(){return e=t.apply(this,arguments),N.invert=e.invert&&S,C()}}((function(){return t}))()}function cA(t){return function(e,n){var r=lL(e),i=lL(n),o=t(r*i);return[o*i*cL(e),o*cL(n)]}}function hA(t){return function(e,n){var r=hL(e*e+n*n),i=t(r),o=cL(i),a=lL(i);return[uL(e*o,r*a),pL(r&&n*o/r)]}}cA((function(t){return hL(2/(1+t))})).invert=hA((function(t){return 2*pL(t/2)}));var fA=cA((function(t){return(t=fL(t))&&t/cL(t)}));function pA(){return lA(fA).scale(79.4188).clipAngle(179.999)}function dA(t,e){return[t,e]}function gA(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return uN(t,(function(t){var n=yA(t,e,r,i);n&&o.push(n)})),XE(o);case"FeatureCollection":return sN(t,(function(t){var n=yA(t,e,r,i);n&&sN(n,(function(t){t&&o.push(t)}))})),XE(o)}return yA(t,e,r,i)}function yA(t,e,n,r){var i=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return uN(t,(function(t){var i=yA(t,e,n,r);i&&a.push(i)})),XE(a)}var s=function(t){var e=cN(t).geometry.coordinates,n=[-e[0],-e[1]];return pA().rotate(n).scale(VE)}(o),u={type:o.type,coordinates:vA(o.coordinates,s)},l=(new RI).read(u),c=function(t,e){void 0===e&&(e="kilometers");var n=WE[e];if(!n)throw new Error(e+" units is invalid");return t*n}(function(t,e){void 0===e&&(e="kilometers");var n=WE[e];if(!n)throw new Error(e+" units is invalid");return t/n}(e,n),"meters"),h=CO.bufferOp(l,c,r);if(!_A((h=(new DI).write(h)).coordinates))return YE({type:h.type,coordinates:mA(h.coordinates,s)},i)}function _A(t){return Array.isArray(t[0])?_A(t[0]):isNaN(t[0])}function vA(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return vA(t,e)}))}function mA(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return mA(t,e)}))}fA.invert=hA((function(t){return t})),dA.invert=dA;const xA=Object.assign({},bt,ya,Iw),bA=Object.assign({},Ac,Vc);function MA(){this.reset()}MA.prototype={constructor:MA,reset:function(){this.s=this.t=0},add:function(t){EA(wA,t,this.t),EA(this,wA.s,this.s),this.s?this.t+=wA.t:this.s=wA.t},valueOf:function(){return this.s}};const wA=new MA;function EA(t,e,n){const r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function NA(t,e){t&&IA.hasOwnProperty(t.type)&&IA[t.type](t,e)}const SA={Feature:function(t,e){NA(t.geometry,e)},FeatureCollection:function(t,e){let n=t.features,r=-1,i=n.length;for(;++r<i;)NA(n[r].geometry,e)}},IA={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){let n=t.coordinates,r=-1,i=n.length;for(;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){CA(t.coordinates,e,0)},MultiLineString:function(t,e){let n=t.coordinates,r=-1,i=n.length;for(;++r<i;)CA(n[r],e,0)},Polygon:function(t,e){OA(t.coordinates,e)},MultiPolygon:function(t,e){let n=t.coordinates,r=-1,i=n.length;for(;++r<i;)OA(n[r],e)},GeometryCollection:function(t,e){let n=t.geometries,r=-1,i=n.length;for(;++r<i;)NA(n[r],e)}};function CA(t,e,n){let r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function OA(t,e){let n=-1,r=t.length;for(e.polygonStart();++n<r;)CA(t[n],e,1);e.polygonEnd()}let PA,LA,AA,TA=new MA;const kA={sphere:t=>{},point:t=>{},lineStart:function(){kA.point=DA,kA.lineEnd=RA},lineEnd:t=>{},polygonStart:t=>{},polygonEnd:t=>{}};function RA(){kA.point=kA.lineEnd=t=>{}}function DA(t,e){t*=Math.PI/180,e*=Math.PI/180,PA=t,LA=Math.sin(e),AA=Math.cos(e),kA.point=FA}function FA(t,e){t*=Math.PI/180,e*=Math.PI/180;const n=Math.sin(e),r=Math.cos(e),i=Math.abs(t-PA),o=Math.cos(i),a=r*Math.sin(i),s=AA*n-LA*r*o,u=LA*n+AA*r*o;TA.add(Math.atan2(Math.sqrt(a*a+s*s),u)),PA=t,LA=n,AA=r}function zA(t){return TA.reset(),function(t,e){t&&SA.hasOwnProperty(t.type)?SA[t.type](t,e):NA(t,e)}(t,kA),+TA}const GA=[null,null],qA={type:"LineString",coordinates:GA};function jA(t,e){return GA[0]=t,GA[1]=e,zA(qA)}function BA(){return 1}var UA={units:"kilometers",radius:6371.0088};var VA=Object.freeze({__proto__:null,geoScaleBar:function(){let t,e,n,r,i,o=null,a=0,s=0,u=1,l=UA.radius,c=UA.units,h=t=>+t.toFixed(2),f=2,p=4,d="start",g=1,y=!0;function _(_){i=null===i?null:i||c.charAt(0).toUpperCase()+c.slice(1);let v=o[1][0]-o[0][0],m=o[1][1]-o[0][1],x=o[0][0]+v*a,b=o[0][1]+m*s,M=t.invert([x,b]),w=0,E=0;if(e)w=e,E=w/(jA(M,t.invert([x+1,b]))*l);else{let e=.01,r=80/(y?1:g),i=0,o=100,a=[1,2,4,5];for(;E<r&&i<o;){for(let n=0,i=a.length;n<i&&(w=e*a[n],E=w/(jA(M,t.invert([x+1,b]))*l),!(E>=r));n++);e*=10,i++}n=w}let N=w/(y?g:1),S=null===r?[]:r||[0,N/4,N/2,N],I=t=>t*E/(w/g),C=_.selection?_.selection():_,O=C.selectAll(".label").data([i]),P=C.selectAll(".domain").data([null]),L=C.selectAll(".tick").data(S,I).order(),A=L.exit(),T=L.enter().append("g").attr("class","tick"),k=L.select("line"),R=L.select("text"),D=L.select("rect");C.attr("font-family","sans-serif").attr("transform",`translate(${[x,b]})`),P=P.merge(P.enter().insert("path",".tick").attr("class","domain").attr("fill","none").attr("stroke","currentColor")),L=L.merge(T),k=k.merge(T.append("line").attr("stroke","currentColor").attr("y2",p*u)),R=R.merge(T.append("text").attr("fill","currentColor").attr("y",p*u+f*u).attr("font-size",10).attr("text-anchor","middle").attr("dy",(1===u?.71:0)+"em")),D=D.merge(T.append("rect").attr("fill",((t,e)=>e%2==0?"currentColor":"#fff")).attr("stroke","currentColor").attr("stroke-width",.5).attr("width",((t,e,n)=>e===n.length-1?0:I(S[e+1]-t))).attr("y",1===u?0:-p).attr("height",p)),_!==C&&(L=L.transition(_),P=P.transition(_),D=D.transition(_),A=A.transition(_).attr("opacity",1e-6).attr("transform",(t=>`translate(${I(t)})`)),T.attr("opacity",1e-6).attr("transform",(t=>`translate(${I(t)})`))),A.remove(),P.attr("d",`M${I(0)},${p*u} L${I(0)},0 L${I(N)},0 L${I(N)},${p*u}`),L.attr("transform",(t=>`translate(${I(t)})`)).attr("opacity",1),k.attr("y2",p*u),R.attr("y",p*u+f*u).text(h),D.attr("fill",((t,e)=>e%2==0?"currentColor":"#fff")).attr("width",((t,e,n)=>e===n.length-1?0:I(S[e+1]-t))).attr("y",1===u?0:-p).attr("height",p),null===O?O.remove():(_!==C?O.transition(_).attr("x","start"===d?0:I("middle"===d?N/2:N)).attr("y",1===u?0:"1.3em").attr("text-anchor",d).text((t=>t)):O.attr("x","start"===d?0:I("middle"===d?N/2:N)).attr("y",1===u?0:"1.3em").attr("text-anchor",d).text((t=>t)),O.enter().append("text").attr("class","label").attr("fill","currentColor").attr("font-size",12).attr("dy","-0.32em").attr("x","start"===d?0:I("middle"===d?N/2:N)).attr("y",1===u?0:"1.3em").attr("text-anchor",d).text((t=>t)))}return _.distance=function(t){return arguments.length?(e=+t,_):e||n},_.extent=function(t){return arguments.length?(o=t,_):o},_.label=function(t){return arguments.length?(i=t,_):i},_.labelAnchor=function(t){return arguments.length?(d=t,_):d},_.left=function(t){return arguments.length?(a=+t>1?1:+t<0?0:+t,_):a},_.orient=function(t){return arguments.length?(u=t(),_):1===u?"bottom":"top"},_.projection=function(e){return arguments.length?(t=e,_):t},_.radius=function(t){return arguments.length?(l=+t,_):l},_.size=function(t){return arguments.length?(o=[[0,0],t],_):o[1]},_.top=function(t){return arguments.length?(s=+t>1?1:+t<0?0:+t,_):s},_.tickFormat=function(t){return arguments.length?(h=t,_):h},_.tickPadding=function(t){return arguments.length?(f=+t,_):f},_.tickSize=function(t){return arguments.length?(p=+t,_):p},_.tickValues=function(t){return arguments.length?(r=t,_):r},_.units=function(t){return arguments.length?(({units:c,radius:l}=t),_):c},_.zoomClamp=function(t){return arguments.length?(y=!!t,_):y},_.zoomFactor=function(t){return arguments.length?(g=+t,_):g},_},geoScaleBottom:BA,geoScaleTop:function(){return-1},geoScaleFeet:{units:"feet",radius:20902259.664},geoScaleKilometers:UA,geoScaleMeters:{units:"meters",radius:6371008.8},geoScaleMiles:{units:"miles",radius:3958.7613}});const WA=Object.assign({},bt,VA);function YA(t,e,n,r={}){let i,o,a,s,u,l,c=r.position?r.position:"topright",h=r.text?r.text:"Your text here!",f=r.fontSize?r.fontSize:15,p=r.fontFamily?r.fontFamily:"Robotto",d=r.margin?r.margin:0,g=r.textDecoration?r.textDecoration:"none",y=r.fontWeight?r.fontWeight:"normal",_=r.fontStyle?r.fontStyle:"normal",v=r.anchor?r.anchor:"start",m=r.baseline?r.baseline:"baseline",x=r.fill?r.fill:"#474342",b=r.stroke?r.stroke:"none",M=r.frame_fill?r.frame_fill:"none",w=r.frame_stroke?r.frame_stroke:"none",E=r.strokeWidth?r.strokeWidth:1,N=r.frame_opacity?r.frame_opacity:1;switch(c){case"topleft":v="start",m="hanging",i=5,o=5;break;case"topright":v="end",m="hanging",i=e-5,o=5;break;case"top":v="middle",m="hanging",i=e/2,o=5;break;case"left":v="start",m="middle",i=5,o=n/2;break;case"middle":v="middle",m="middle",i=e/2,o=n/2;break;case"right":v="end",m="middle",i=e-5,o=n/2;break;case"bottomleft":v="start",m="baseline",i=5,o=n-5;break;case"bottom":v="middle",m="baseline",i=e/2,o=n-5;break;case"bottomright":v="end",m="baseline",i=e-5,o=n-5;break;default:i=c[0],o=c[1]}let S=h.split("\n"),I=[];S.forEach((t=>I.push(t.length)));let C=I.indexOf(Math.max(...I)),O=t.append("text").attr("font-size",`${f}px`).attr("font-family",p).attr("font-style",_).attr("text-decoration",g).attr("font-weight",y).text(S[C]);t.node().appendChild(O.node()),document.body.appendChild(t.node());const P=O.node().getBBox().width;document.body.removeChild(t.node()),O.remove();let L=f*I.length;"hanging"==m&&(u=0,s=d),"middle"==m&&(u=f*S.length/2,s=0),"baseline"==m&&(u=f*S.length,s=-d),"start"==v&&(l=0,a=d),"middle"==v&&(l=P/2,a=0),"end"==v&&(l=P,a=-d);let A=t.append("g").attr(":inkscape:groupmode","layer").attr("id","note").attr(":inkscape:label","note");A.append("rect").attr("x",i-d-l+a).attr("y",o-d-u+s).attr("height",L+2*d).attr("width",P+2*d).attr("fill",M).attr("stroke-width",E).attr("fill-opacity",N).attr("stroke",w),A.selectAll("text").data(S).join("text").attr("x",i+a).attr("y",o-+u+s).attr("font-size",`${f}px`).attr("font-style",_).attr("text-decoration",g).attr("font-weight",y).attr("font-family",p).attr("dy",((t,e)=>e*f)).attr("text-anchor",v).attr("dominant-baseline","hanging").attr("fill",x).attr("stroke",b).text((t=>t))}function XA(t,e,n={},r){let i=Yc(n.geojson),o=n.values,a=n.fill?n.fill:"#474342",s=n.fontSize?n.fontSize:10,u=n.fontFamily?n.fontFamily:"Robotto",l=n.textDecoration?n.textDecoration:"none",c=n.fontWeight?n.fontWeight:"normal",h=n.fontStyle?n.fontStyle:"normal",f=n.opacity??1;const p=zE(i);t.append("g").selectAll("text").data(p.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[o]))).join("text").attr("x",(t=>e(t.geometry.coordinates)[0])).attr("y",(t=>e(t.geometry.coordinates)[1])).attr("fill",a).attr("opacity",f).attr("font-size",s).attr("font-family",u).attr("font-style",h).attr("text-decoration",l).attr("font-weight",c).attr("text-anchor","middle").attr("dominant-baseline","middle").text((t=>t.properties[o]))}Object.assign({},bt),Object.assign({},bt);const $A=Object.assign({},bt,ke,Iw,ya,gc);function HA(t,e,n={},r,i,o){let a=Yc(n.geojson),s=n.values,u=void 0!==n.k?n.k:50,l=void 0!==n.w?n.w:10,c=n.fill?n.fill:"#ffa3e3",h=n.stroke?n.stroke:"#a31d88",f=n.strokeWidth?n.strokeWidth:1,p=n.fillOpacity?n.fillOpacity:1,d=n.strokeLinecap??"round",g=n.strokeLinejoin??"round",y=n.strokeDasharray??"none",_=n.strokeOpacity??1,v=!!n.tooltip&&n.tooltip;Array.isArray(v)&&(v={fields:v}),"string"==typeof v&&(v={fields:[v]});let m=n.leg_x?n.leg_x:null,x=n.leg_y?n.leg_y:null;!n.leg_w||n.leg_w,!n.leg_h||n.leg_h;let b=n.leg_title?n.leg_title:null,M=n.leg_fontSize?n.leg_fontSize:14,w=n.leg_fontSize2?n.leg_fontSize2:10;!n.leg_stroke||n.leg_stroke,!n.fillOpacity||n.fillOpacity,!n.leg_strokeWidth||n.leg_strokeWidth;let E,N=n.leg_txtcol?n.leg_txtcol:"#363636",S=void 0!==n.leg_round?n.leg_round:void 0;E="p"==$c(a)?a.features:zE(a);const I=$A.scaleLinear().domain([0,$A.max(E.map((t=>+t.properties[s])))]).range([0,u]);t.append("g").selectAll("path").data(E.filter((t=>null!=t.geometry.coordinates)).filter((t=>null!=t.properties[s])).sort(((t,e)=>$A.descending(+t.properties[s],+e.properties[s])))).join("path").attr("fill",(t=>LE(E,c).getcol(t.properties[c.values]||void 0))).attr("stroke",(t=>LE(E,h).getcol(t.properties[h.values]||void 0))).attr("stroke-width",(t=>TE(E,f).getthickness(t.properties[f.values]||void 0))).attr("fill-opacity",p).attr("stroke-opacity",_).attr("stroke-linecap",d).attr("stroke-linejoin",g).attr("stroke-dasharray",y).attr("d",(t=>`M ${e(t.geometry.coordinates)[0]-l/2}, ${e(t.geometry.coordinates)[1]} ${e(t.geometry.coordinates)[0]}, ${e(t.geometry.coordinates)[1]-I(t.properties[s])} ${e(t.geometry.coordinates)[0]+l/2}, ${e(t.geometry.coordinates)[1]}`)).on("touchmove mousemove",(function(e,n){v&&t.select("#info").call(DE,{fields:function(){const t=Array.isArray(v.fields)?v.fields:[v.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:v.fontWeight,fontSize:v.fontSize,fontStyle:v.fontStyle,fill:v.fill,stroke:v.stroke,strokeWidth:v.strokeWidth,fillOpacity:v.fillOpacity,strokeOpacity:v.strokeOpacity,col:v.col,type:RE($A.pointer(e,this),i,o)}),v&&(t.select("#info").attr("transform",`translate(${$A.pointer(e,this)})`),$A.select(this).attr("stroke-opacity",_-.3).attr("fill-opacity",p-.3).raise())})).on("touchend mouseleave",(function(){t.select("#info").call(DE,null),$A.select(this).attr("stroke-opacity",_).attr("fill-opacity",p).lower()}));const C=E.filter((t=>""!=t.properties[s])).map((t=>+t.properties[s])),O=[$A.min(C),I.invert(u/3),I.invert(u/1.5),$A.max(C)];if(null!=m&&null!=x){let e=t.append("g").attr("class","bertinlegend");null!=b&&(b.split("\n").length,e.append("g").selectAll("text").data(b.split("\n")).join("text").attr("x",m).attr("y",x).attr("font-size",`${M}px`).attr("dy",((t,e)=>e*M)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",N).text((t=>t))),e.append("g").selectAll("path").data(O.sort($A.descending)).join("path").attr("d",(t=>`M ${-l/2},0 0,${-I(t)} ${l/2},0`)).attr("fill","object"==typeof c?"white":c).attr("stroke","object"==typeof h?"black":h).attr("stroke-width",1).attr("transform",((t,e)=>`translate(${m+l/2+(l+5)*e},${x+u+(b.split("\n").length+1)*M})`)),e.append("g").selectAll("text").data(O.sort($A.descending)).join("text").attr("text-anchor","start").attr("dominant-baseline","middle").attr("transform",((t,e)=>`translate(${m+l/2+(l+5)*e},${x+u+(b.split("\n").length+1)*M+w/2}) rotate(90)`)).attr("font-size",`${w}px`).attr("fill",N).text((t=>ME(t,S)))}kE(a,t,c,h,f)}const QA=Object.assign({},bt,ke,ya,gE);function JA(t,e,n={},r,i,o){let a=["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],s=Yc(n.geojson),u=n.values,l=n.radius??4,c=n.nbmax??200,h=n.onedot??Math.round(QA.sum(s.features.map((t=>+t.properties[u])))/c),f=n.span??.5,p=n.fill??a[Math.floor(Math.random()*a.length)],d=n.stroke??"none",g=n.strokeWidth??0,y=n.fillOpacity??1,_=n.strokeDasharray??"none",v=n.strokeOpacity??1,m=!!n.tooltip&&n.tooltip;Array.isArray(m)&&(m={fields:m}),"string"==typeof m&&(m={fields:[m]});let x,b=n.iteration??200;x="p"==$c(s)?s.features:zE(s);let M=[];for(let t=0;t<=x.length-1;t++){let e=Math.round(+x[t].properties[u]/h);for(let n=1;n<=e;n++)M.push({...x[t]})}const w=QA.forceSimulation(M).force("x",QA.forceX((t=>e(t.geometry.coordinates)[0]))).force("y",QA.forceY((t=>e(t.geometry.coordinates)[1]))).force("collide",QA.forceCollide(l+f+g/2));for(let t=0;t<b;t++)w.tick();t.append("g").selectAll("circle").data(M.filter((t=>null!=t.geometry.coordinates))).join("circle").attr("fill",(t=>LE(M,p).getcol(t.properties[p.values]||void 0))).attr("stroke",(t=>LE(M,d).getcol(t.properties[d.values]||void 0))).attr("stroke-width",(t=>TE(M,g).getthickness(t.properties[g.values]||void 0))).attr("fill-opacity",y).attr("stroke-dasharray",_).attr("stroke-opacity",v).attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("r",l).on("touchmove mousemove",(function(e,n){m&&t.select("#info").call(DE,{fields:function(){const t=Array.isArray(m.fields)?m.fields:[m.fields];let e=[];return t.forEach((t=>{e.push("$"==t[0]?`${n.properties[t.substr(1,t.length)]}`:t)})),e}(),fontWeight:m.fontWeight,fontSize:m.fontSize,fontStyle:m.fontStyle,fill:m.fill,stroke:m.stroke,strokeWidth:m.strokeWidth,fillOpacity:m.fillOpacity,strokeOpacity:m.strokeOpacity,col:m.col,type:RE(QA.pointer(e,this),i,o)}),m&&(t.select("#info").attr("transform",`translate(${QA.pointer(e,this)})`),QA.select(this).attr("stroke-opacity",v-.3).attr("fill-opacity",y-.3))})).on("touchend mouseleave",(function(){t.select("#info").call(DE,null),QA.select(this).attr("stroke-opacity",v).attr("fill-opacity",y)}));const E=n.leg_x??null,N=n.leg_y??null,S=n.leg_title??"leg_title",I=n.leg_fontSize??14,C=n.leg_fontSize2??10,O=n.leg_txtcol??"#363636",P=n.leg_stroke??d,L=n.leg_strokeWidth??g,A="string"==typeof p?p:n.leg_fill,T=n.leg_txt??h;if(null!=E&&null!=N){let e=t.append("g").attr("class","bertinlegend");null!=S&&(S.split("\n").length,e.append("g").selectAll("text").data(S.split("\n")).join("text").attr("x",E).attr("y",N).attr("font-size",`${I}px`).attr("dy",((t,e)=>e*I)).attr("text-anchor","start").attr("dominant-baseline","hanging").attr("fill",O).text((t=>t))),e.append("circle").attr("r",l).attr("fill",A).attr("stroke",P).attr("stroke-width",L).attr("cx",E+l).attr("cy",N+2*l+S.split("\n").length*I),e.append("text").attr("fill",O).attr("font-size",`${C}px`).attr("dominant-baseline","middle").attr("x",E+2*l+C).attr("y",N+2*l+S.split("\n").length*I).text(T)}kE({type:"FeatureCollection",features:M},t,p,d,g)}function KA(t){let e=[];t.features.forEach((t=>{e.push(function(t){let e=[];t.geometry.type.includes("Multi")?t.geometry.coordinates.forEach((n=>{e.push({type:"Feature",properties:t.properties,geometry:{type:t.geometry.type.replace("Multi",""),coordinates:n}})})):e.push({...t});const n=Dn(t);return e.forEach((t=>t.__share=Dn(t)/n)),JSON.parse(JSON.stringify(e))}(t))}));const n=Object.keys(t).filter((t=>"features"!=t)),r={};return n.forEach((e=>{r[e]=t[e]})),r.features=e.flat(),r}function ZA(t){return Array.isArray(t)?eT(t):t&&t.bbox?eT(t.bbox):[360*tT(),180*tT()]}function tT(){return Math.random()-.5}function eT(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function nT(t,e,n){let r=[];t.features.forEach((t=>{r.push(function(t,e,n){let r=[],i=0,o=0;const a=Math.round(+t.properties[e]/n),s=lN(t);for(;i<a&&o<10*a;){const e=ZA(s),n={type:"Feature",properties:t.properties,geometry:{type:"Point",coordinates:e}};HE(n,t)&&(r.push(n),i++),o++}return JSON.parse(JSON.stringify(r))}(t,e,n))}));const i=Object.keys(t).filter((t=>"features"!=t)),o={};return i.forEach((e=>{o[e]=t[e]})),o.features=r.flat(),o}Object.assign({},bt,ya,gc);const rT=Object.assign({},ke);function iT(t){return t.k}function oT(t){return[t.x,t.y]}function aT(t){return function(){return t}}var sT=Object.freeze({__proto__:null,tile:function(){let t=0,e=0,n=960,r=500,i=!0,o=!0,a=256,s=iT,u=oT,l=0;function c(){const c=+s.apply(this,arguments),h=u.apply(this,arguments),f=Math.log2(c/a),p=Math.round(Math.max(f+l,0)),d=Math.pow(2,f-p)*a,g=+h[0]-c/2,y=+h[1]-c/2,_=Math.max(i?0:-1/0,Math.floor((t-g)/d)),v=Math.min(i?1<<p:1/0,Math.ceil((n-g)/d)),m=Math.max(o?0:-1/0,Math.floor((e-y)/d)),x=Math.min(o?1<<p:1/0,Math.ceil((r-y)/d)),b=[];for(let t=m;t<x;++t)for(let e=_;e<v;++e)b.push([e,t,p]);return b.translate=[g/d,y/d],b.scale=d,b}return c.size=function(i){return arguments.length?(t=e=0,n=+i[0],r=+i[1],c):[n-t,r-e]},c.extent=function(i){return arguments.length?(t=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1],c):[[t,e],[n,r]]},c.scale=function(t){return arguments.length?(s="function"==typeof t?t:aT(+t),c):s},c.translate=function(t){return arguments.length?(u="function"==typeof t?t:aT([+t[0],+t[1]]),c):u},c.zoomDelta=function(t){return arguments.length?(l=+t,c):l},c.tileSize=function(t){return arguments.length?(a=+t,c):a},c.clamp=function(t){return arguments.length?(i=o=!!t,c):i&&o},c.clampX=function(t){return arguments.length?(i=!!t,c):i},c.clampY=function(t){return arguments.length?(o=!!t,c):o},c},tileWrap:function([t,e,n]){const r=1<<n;return[t-Math.floor(t/r)*r,e-Math.floor(e/r)*r,n]}});const uT=Object.assign({},sT,ya);function lT(t,e,n,r={}){let i=r.url??"https://github.com/neocarto/bertin/raw/main/img/logo.png",o=new Image;o.scr=i;let a=r.size??100,s=o.height*a/o.width,u=r.x??10,l=r.y??n-10-s;t.append("g").append("image").attr("xlink:href",i).attr("width",a).attr("height",s).attr("x",u).attr("y",l)}const cT=Object.assign({},bt,ya,gc);function hT({params:t={},layers:e={}}={}){let n=t.projection?t.projection:cT.geoEquirectangular();"string"==typeof n&&(n=function(t){let e;+t==t&&(e=lf("EPSG:"+t)),e||(e=lf(t));const n=180/Math.PI,r=1/n,i=function(t,r){return e.forward([t*n,r*n])};i.invert=function(t,n){return e.inverse([t,n]).map((function(t){return t*r}))};const o=rd.geoProjection(i).scale(1);return o.raw=e,o}(n));e.map((t=>t.type)).includes("tiles")&&(n=cT.geoMercator());let r=t.width?t.width:1e3,i=t.extent?t.extent:null;i=Array.isArray(i)&&Array.isArray(i[0])&&Array.isArray(i[1])?od(i):i;let o=t.margin?t.margin:1,a=t.background,s=t.clip??!1,u=function(t,e,n,r,i){let o;const a=t.map((t=>t.geojson)).filter((t=>void 0!==t)).length,s=t.map((t=>t.type));if(e&&(o=e),!e&&s.includes("outline")&&(o={type:"Sphere"}),!e&&a>0&&!s.includes("outline")){let e=t.map((t=>t.geojson)).filter((t=>void 0!==t)),n=[];e.forEach((t=>n.push(Yc(t).features))),o={type:"FeatureCollection",features:n.flat()}}!e&&0==a&&s.includes("tiles")&&(o={type:"Sphere"});const[[u,l],[c,h]]=Xc.geoPath(r.fitWidth(i-2*n,o)).bounds(o);let f=r.translate();return r.translate([f[0]+n,f[1]+n]),Math.ceil(h-l)+2*n}(e,i,o,n,r),l=0,c=e.find((t=>"header"==t.type));c&&(c.text&&(l=25*c.text.split("\n").length+10),c.fontSize&&(l=c.fontSize*c.text.split("\n").length+10));let h=0,f=e.find((t=>"footer"==t.type));f&&(f.text&&(h=10*f.text.split("\n").length+10),f.fontSize&&(h=f.fontSize*f.text.split("\n").length+10));const p=cT.create("svg").attr("width",r).attr("height",u+l+h).attr("viewBox",[0,-l,r,u+l+h]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;");let d=p.append("defs");d.append("style").attr("type","text/css").text("@import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto&family=Rubik&family=Ubuntu&display=swap');");let g=null;s&&(g=Date.now().toString(36)+Math.random().toString(36).substring(2),p.append("clipPath").attr("id",`clip_${g}`).append("path").datum({type:"Sphere"}).attr("d",cT.geoPath(n))),a&&p.append("rect").attr("x",0).attr("y",0).attr("width",r).attr("height",u).attr("fill",a);let y=e.find((t=>"outline"==t.type));y&&gd(p,n,{fill:y.fill,fillOpacity:y.fillOpacity,stroke:"none",strokeWidth:"none"}),e.reverse().forEach((t=>{"graticule"==t.type&&pd(p,n,{stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,step:t.step},g),"tiles"==t.type&&function(t,e,n,r,i){let o=i.opacity??1,a=i.tileSize??512;i.zoomDelta;let s=i.clip??void 0,u=i.style??"opentopomap",l=i.zoomDelta??1,c=i.increasetilesize??1,h=i.source??"bottomright";const f=[{name:"openstreetmap",provider:"OpenStreetMap contributors",url:(t,e,n)=>`https://tile.openstreetmap.org/${n}/${t}/${e}.png`},{name:"opentopomap",provider:"OpenStreetMap contributors",url:(t,e,n)=>`https://tile.opentopomap.org/${n}/${t}/${e}.png`},{name:"worldterrain",provider:"USGS, Esri, TANA, DeLorme, and NPS",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldimagery",provider:"Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldStreet",provider:"Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/${n}/${e}/${t}.png`},{name:"worldphysical",provider:"Esri, US National Park Service",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/${n}/${e}/${t}`},{name:"shadedrelief",provider:"ESRI",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/${n}/${e}/${t}.png`},{name:"oceanbasemap",provider:"GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri",url:(t,e,n)=>`https://server.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/${n}/${e}/${t}.png`}];let p=f.find((t=>t.name==u)).url,d=uT.tile().size([e,n]).scale(2*r.scale()*Math.PI).translate(r([0,0])).tileSize(a).zoomDelta(l);const g=Date.now().toString(36)+Math.random().toString(36).substring(2);s&&t.append("clipPath").attr("id",`tileclip_${g}`).append("path").datum(s).attr("d",uT.geoPath(r)),t.append("g").attr("clip-path",`url(#tileclip_${g}`).selectAll("image").data(d()).join("image").attr("xlink:href",(t=>p(t[0],t[1],t[2]))).attr("x",(t=>Math.round((t[0]+d().translate[0])*d().scale))).attr("y",(t=>Math.round((t[1]+d().translate[1])*d().scale))).attr("width",d().scale+c+"px").attr("height",d().scale+c+"px").attr("opacity",o),YA(t,e,n,i={text:`Source: ${f.find((t=>t.name==u)).provider}`,position:h,fontSize:12,fill:"white",frame_fill:"black",frame_opacity:.3,fontFamily:"Roboto",margin:6})}(p,r,u,n,{opacity:t.opacity,tileSize:t.tileSize,zoomDelta:t.zoomDelta,style:t.style,clip:t.clip,increasetilesize:t.increasetilesize,source:t.source}),"layer"!=t.type&&"simple"!=t.type&&null!=t.type||qE(p,n,{geojson:t.geojson,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,fillOpacity:t.fillOpacity,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,symbol:t.symbol,symbol_size:t.symbol_size,symbol_iteration:t.symbol_iteration,symbol_shift:t.symbol_shift,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_text:t.leg_text,leg_type:t.leg_type,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},g,r,u),"dotdensity"==t.type&&function(t,e,n,r,i,o){let a=n.nbdots??rT.sum(n.geojson.features.map((t=>+t.properties[n.values])))/1e3;n.dotvalue=n.dotvalue??a,n.symbol_size=n.symbol_size??8,n.fill=n.fill??"#cc190c",n.leg_text=n.leg_text??`= ${n.dotvalue}`,n.leg_type=n.symbol?n.symbol:"circle";let s=KA(n.geojson);s.features.forEach(((t,e)=>{t.properties.__value=+t.properties[n.values]*t.__share,t.__test=+t.properties[n.values]*t.__share}));const u=nT(s,"__value",n.dotvalue);n.geojson=JSON.parse(JSON.stringify(u)),qE(t,e,n,r,i,o)}(p,n,{geojson:t.geojson,values:t.values,dotvalue:t.dotvalue,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,fillOpacity:t.fillOpacity,strokeOpacity:t.strokeOpacity,strokeDasharray:t.strokeDasharray,symbol:t.symbol,symbol_size:t.symbol_size,symbol_iteration:t.symbol_iteration,symbol_shift:t.symbol_shift,tooltip:t.tooltip,leg_type:t.leg_type,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_text:t.leg_text,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},g,r,u),"spikes"==t.type&&HA(p,n,{geojson:t.geojson,values:t.values,k:t.k,w:t.w,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_stroke:t.leg_stroke,leg_fillOpacity:t.leg_fillOpacity,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_round:t.leg_round},0,r,u),"mushroom"==t.type&&eN(p,n,{geojson:t.geojson,top_values:t.top_values,bottom_values:t.bottom_values,top_fill:t.top_fill,bottom_fill:t.bottom_fill,k:t.k,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,top_tooltip:t.top_tooltip,bottom_tooltip:t.bottom_tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_top_txt:t.leg_top_txt,leg_bottom_txt:t.leg_bottom_txt,leg_top_fill:t.leg_top_fill,leg_bottom_fill:t.leg_bottom_fill,leg_stroke:t.leg_stroke,leg_strokeWidth:t.leg_strokeWidth},g,r,u),"label"==t.type&&XA(p,n,{geojson:t.geojson,values:t.values,fill:t.fill,fontSize:t.fontSize,fontFamily:t.fontFamily,textDecoration:t.textDecoration,fontWeight:t.fontWeight,fontStyle:t.fontStyle,opacity:t.opacity}),"text"==t.type&&YA(p,r,u,{position:t.position,text:t.text,fill:t.fill,stroke:t.stroke,fontSize:t.fontSize,fontFamily:t.fontFamily,textDecoration:t.textDecoration,fontWeight:t.fontWeight,fontStyle:t.fontStyle,margin:t.margin,anchor:t.anchor,baseline:t.baseline,frame_fill:t.frame_fill,frame_stroke:t.frame_stroke,frame_opacity:t.frame_opacity,frame_strokeWidth:t.frame_strokeWidth}),"logo"==t.type&&lT(p,0,u,{url:t.url,size:t.size,x:t.x,y:t.y}),"missing"==t.type&&rN(p,n,{geojson:t.geojson,values:t.values,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,leg_x:t.leg_x,leg_y:t.leg_y,leg_w:t.leg_w,leg_h:t.leg_h,leg_text:t.leg_text,leg_fontSize:t.leg_fontSize,leg_stroke:t.leg_stroke,leg_fillOpacity:t.fillOpacity,leg_fill:t.fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol},g),"shadow"==t.type&&function(t,e,n,r,i,o){let a=o.col?o.col:"#35383d",s=o.dx?o.dx:3,u=o.dy?o.dy:3,l=o.stdDeviation?o.stdDeviation:1.5,c=o.opacity?o.opacity:.7,h=a,f=oN.topology({foo:Yc(n)}),p=oN.merge(f,f.objects.foo.geometries);i.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",l);const d=iN.geoPath(e);t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).append("path").datum(p).attr("d",d).attr("fill",h).attr("opacity",c).attr("stroke","none").attr("filter","url(#blur)").attr("transform",`translate(${s} ${u})`)}(p,n,t.geojson,g,d,{col:t.col,dx:t.dx,dy:t.dy,opacity:t.opacity,stdDeviation:t.stdDeviation}),"waterlines"==t.type&&function(t,e,n,r,i){let o=i.dist??200,a=i.unit??"kilometers",s=i.nb??5,u=i.stroke??"#5d81ba",l=i.strokeOpacity??[1,.1],c=i.strokeWidth??[1.2,.2],h=i.strokeDasharray??"none",f=i.strokeLinecap??"round",p=i.strokeLinejoin??"round",d=bA.topology({foo:Yc(n)}),g=bA.merge(d,d.objects.foo.geometries),y=[];for(let t=1;t<=s;t++)y.push(gA(g,o*t,{units:a}));t.append("g").attr("clip-path",null==r?"none":`url(#clip_${r}`).selectAll("path").data(y).join("path").attr("d",xA.geoPath(e)).attr("fill","none").attr("stroke-opacity",((t,e)=>Array.isArray(l)?xA.scaleLinear().domain([1,s]).range(l)(e):l)).attr("stroke-width",((t,e)=>Array.isArray(c)?xA.scaleLinear().domain([1,s]).range(c)(e):c)).attr("stroke",((t,e)=>Array.isArray(u)?xA.scaleLinear().domain([1,s]).range(u)(e):u)).attr("stroke-dasharray",h).attr("stroke-linecap",f).attr("stroke-linejoin",p)}(p,n,t.geojson,g,{stroke:t.stroke,dist:t.dist,unit:t.unit,nb:t.nb,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth,stroke:t.stroke,strokeDasharray:t.strokeDasharray,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),"dotcartogram"==t.type&&JA(p,n,{geojson:t.geojson,values:t.values,radius:t.radius,nbmax:t.nbmax,onedot:t.onedot,span:t.span,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_txtcol:t.leg_txtcol,leg_stroke:t.leg_stroke,leg_strokeWidth:t.leg_strokeWidth,leg_fill:t.leg_fill,leg_txt:t.leg_txt},0,r,u),"bubble"==t.type&&UE(p,n,{geojson:t.geojson,values:t.values,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,r,u),"regularbubble"==t.type&&ZE(p,n,{geojson:t.geojson,values:t.values,step:t.step,planar:t.planar,k:t.k,fixmax:t.fixmax,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,fillOpacity:t.fillOpacity,strokeDasharray:t.strokeDasharray,strokeOpacity:t.strokeOpacity,dorling:t.dorling,iteration:t.iteration,tooltip:t.tooltip,leg_x:t.leg_x,leg_y:t.leg_y,leg_stroke:t.leg_stroke,leg_fill:t.leg_fill,leg_strokeWidth:t.leg_strokeWidth,leg_txtcol:t.leg_txtcol,leg_title:t.leg_title,leg_fontSize:t.leg_fontSize,leg_fontSize2:t.leg_fontSize2,leg_round:t.leg_round},0,r,u),"header"==t.type&&function(t,e,n){let r;n.text&&(r=25),n.fontSize&&(r=n.fontSize);let i=n.text?n.text:"",o=n.fill?n.fill:"#9e9696",a=n.background?n.background:"white",s=n.backgroundOpacity?n.backgroundOpacity:1,u=n.anchor?n.anchor:"middle";const l=r*i.split("\n").length;let c;"start"==u&&(c=5),"middle"==u&&(c=e/2),"end"==u&&(c=e-5);let h=t.append("g");h.append("rect").attr("x",0).attr("y",0-l-10).attr("width",e).attr("height",l+10).attr("fill",a).attr("fill-opacity",s),h.selectAll("text").data(n.text.split("\n")).join("text").attr("x",c).attr("y",-l-5).attr("font-size",`${r}px`).attr("dy",((t,e)=>e*r+r/2)).attr("text-anchor",u).attr("dominant-baseline","central").attr("fill",o).attr("font-family","sans-serif").attr("font-weight","bold").attr("fill-opacity",1).text((t=>t))}(p,r,{fontSize:t.fontSize,text:t.text,fill:t.fill,background:t.background,backgroundOpacity:t.backgroundOpacity,anchor:t.anchor}),"footer"==t.type&&function(t,e,n,r){let i;r.text&&(i=10),r.fontSize&&(i=r.fontSize);let o=r.text?r.text:"",a=r.fill?r.fill:"#9e9696",s=r.background?r.background:"white",u=r.backgroundOpacity?r.backgroundOpacity:1,l=r.anchor?r.anchor:"end";const c=i*o.split("\n").length;let h;"start"==l&&(h=5),"middle"==l&&(h=e/2),"end"==l&&(h=e-5);let f=t.append("g");f.append("rect").attr("x",0).attr("y",n).attr("width",e).attr("height",c+10).attr("fill",s).attr("fill-opacity",u),f.selectAll("text").data(r.text.split("\n")).join("text").attr("x",h).attr("y",n+5).attr("font-size",`${i}px`).attr("dy",((t,e)=>e*i)).attr("text-anchor",l).attr("dominant-baseline","hanging").attr("fill",a).attr("font-family","sans-serif").attr("fill-opacity",1).text((t=>t))}(p,r,u,{fontSize:t.fontSize,text:t.text,fill:t.fill,background:t.background,backgroundOpacity:t.backgroundOpacity,anchor:t.anchor}),"hatch"!=t.type&&"hatching"!=t.type||function(t,e,n,r){let i=t.append("defs");const o=e.stroke??"#786d6c",a=e.strokeWidth??2,s=e.strokeOpacity??.1,u=e.angle??45,l=e.spacing??8,c=e.strokeDasharray??"none";i.append("pattern").attr("id","hatch").attr("patternUnits","userSpaceOnUse").attr("width",l).attr("height",l).attr("patternTransform",`rotate(${u})`).append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y1",l).attr("stroke",o).attr("stroke-linejoin","butt").attr("stroke-width",a).attr("stroke-dasharray",c).attr("stroke-opacity",s),t.append("rect").attr("x",0).attr("y",0).attr("width",n).attr("height",r).attr("fill","url('#hatch')")}(p,{stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,angle:t.angle,spacing:t.spacing,strokeDasharray:t.strokeDasharray},r,u)}));let _=e.find((t=>"scalebar"==t.type));return _&&function(t,e,n,r,i){let o=i.x?i.x:20,a=i.y?i.y:r-30,s=i.units?i.units:"kilometers";o/=n,a/=r;const u=WA.geoScaleBar().projection(e).size([n,r]).left(o).top(a).label("miles"==s?"Miles":"Km").units("miles"==s?WA.geoScaleMiles:WA.geoScaleKilometers).orient(WA.geoScaleBottom).tickPadding(5).tickSize(0);t.append("g").attr("transform",`translate(${o}, ${a})`).append("g").call(u)}(p,n,r,u,{x:_.x,y:_.y,units:_.units}),y&&gd(p,n,{fill:"none",stroke:y.stroke,strokeWidth:y.strokeWidth}),p.append("g").attr("id","info").attr("class","info"),p.selectAll(".bertinlegend").raise(),Object.assign(p.node(),{})}const fT=Object.assign({},bt,Iw);const pT=Object.assign({},ke);const dT=Object.assign({},Vc,Ac),gT=Object.assign({},ke);const yT=Object.assign({},Ac,Vc);t.bbox=od,t.borders=function({geojson:t,id:e,values:n,type:r="rel",share:i=null}){t=Yc(t);const o=dT.topology({d:t}),a=t.features.map((t=>t.properties[e])),s=dT.neighbors(o.objects.d.geometries),u=new Map(t.features.map((t=>[t.properties[e],t.properties[n]])));let l=[];a.forEach((t=>{s[a.indexOf(t)].map((e=>({properties:{i:t,j:a[e],var_i:+u.get(t),var_j:+u.get(a[e]),disc:"rel"==r?0!=gT.min([+u.get(t),+u.get(a[e])])?gT.max([+u.get(t),+u.get(a[e])])/gT.min([+u.get(t),+u.get(a[e])]):null:gT.max([+u.get(t),+u.get(a[e])])-gT.min([+u.get(t),+u.get(a[e])])}}))).forEach((t=>{let n=dT.mesh(o,o.objects.d,((n,r)=>n.properties[e]==t.properties.i&r.properties[e]==t.properties.j)),r=Object.assign({type:"Feature"},t);l.push(Object.assign(r,{geometry:n}))}))})),l.sort(((t,e)=>gT.descending(t.properties.disc,e.properties.disc)));const c=l.length;return l.map((t=>t.properties)).forEach(((t,e)=>{Object.assign(t,{share:(e+1)/c})})),null!=i&&(l=l.filter((t=>t.properties.share<i))),{type:"FeatureCollection",features:l}},t.bubble=UE,t.dotcartogram=JA,t.draw=hT,t.graticule=pd,t.label=XA,t.links=function(t={}){let e,n=Yc(t.geojson),r=t.geojson_id,i=t.data,o=t.data_i??"i",a=t.data_j??"j";e="p"==$c(n)?n.features:zE(n);const s=new Map(e.map((t=>[t.properties[r],t.geometry.coordinates])));let u=[];return i.forEach((t=>{null!=s.get(t[o])&&null!=s.get(t[a])&&u.push({type:"Feature",properties:t,geometry:{type:"LineString",coordinates:[s.get(t[o]),s.get(t[a])]}})})),{type:"FeatureCollection",features:u}},t.logo=lT,t.match=function(t,e,n,r){let i=(t=Yc(t)).features.map((t=>t.properties[e])),o=n.map((t=>t[r])),a=Array.from(new Set(i.concat(o))),s=i.filter((t=>o.includes(t))),u=i.filter((t=>!o.includes(t))),l=o.filter((t=>!i.includes(t))),c=s.filter((t=>o.includes(t))),h=s.filter((t=>i.includes(t))),f=1e3,p=100,d=30,g=fT.scaleLinear().domain([0,a.length]).range([0,f]);const y=fT.create("svg").attr("width",f).attr("height",p).attr("viewBox",[0,0,f,p]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;");return y.append("defs").append("pattern").attr("id","hatch").attr("patternUnits","userSpaceOnUse").attr("width",5).attr("height",5).append("line").attr("x1",0).attr("y1",0).attr("x2",5).attr("y1",5).attr("stroke","#ffcc36").attr("stroke-width",1).attr("stroke-opacity",1),y.append("rect").attr("x",0).attr("y",25).attr("height",10).attr("width",g(u.length+s.length)).attr("stroke","none").attr("fill","#CCC").attr("fill-opacity",.35),y.append("rect").attr("x",f-g(l.length+s.length)).attr("y",65).attr("height",10).attr("width",g(l.length+s.length)).attr("stroke","none").attr("fill","#CCC").attr("fill-opacity",.35),y.append("rect").attr("x",g(u.length)).attr("y",d).attr("height",40).attr("width",g(s.length)).attr("fill","#ffe599"),y.append("rect").attr("x",g(u.length)).attr("y",d).attr("height",40).attr("width",g(s.length)).attr("fill","url('#hatch')"),y.append("text").attr("x",f-g(o.length)+g(s.length)/2).attr("y",53).attr("text-anchor","middle").attr("dominant-baseline","middle").text(`${Math.round(s.length/a.length*100)}%`).attr("font-size",40).attr("fill","black"),y.append("text").attr("x",f-g(o.length)+5).attr("y",37).attr("text-anchor","start").attr("dominant-baseline","hanging").text("Matched geom").attr("font-size",12).attr("fill","black"),y.append("text").attr("x",f-g(o.length)+5).attr("y",62).attr("text-anchor","start").attr("dominant-baseline","baseline").text(`${s.length}/${i.length}`).attr("font-size",14).attr("fill","black"),y.append("text").attr("x",f-g(l.length)-5).attr("y",37).attr("text-anchor","end").attr("dominant-baseline","hanging").text("Matched data").attr("font-size",12).attr("fill","black"),y.append("text").attr("x",f-g(l.length)-5).attr("y",62).attr("text-anchor","end").attr("dominant-baseline","baseline").text(`${s.length}/${o.length}`).attr("font-size",14).attr("fill","black"),y.append("line").attr("x1",0).attr("y1",d).attr("x2",g(i.length)).attr("y2",d).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",.5).attr("y1",25).attr("x2",.5).attr("y2",35).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",g(i.length)-.5).attr("y1",25).attr("x2",g(i.length)-.5).attr("y2",35).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",f-g(o.length)).attr("y1",70).attr("x2",f).attr("y2",70).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",999.5).attr("y1",65).attr("x2",999.5).attr("y2",75).attr("stroke","black").attr("stroke-width",.5),y.append("line").attr("x1",f-g(o.length)+.5).attr("y1",65).attr("x2",f-g(o.length)+.5).attr("y2",75).attr("stroke","black").attr("stroke-width",.5),y.append("text").attr("x",f-g(o.length/2)).attr("y",95).attr("text-anchor","middle").text("DATA").attr("font-size",28).attr("font-weight","bold").attr("fill","#CCC").attr("opacity",.45),y.append("text").attr("x",g(i.length/2)).attr("y",22).attr("text-anchor","middle").text("GEOMETRIES").attr("font-size",28).attr("font-weight","bold").attr("fill","#CCC").attr("opacity",.45),Object.assign(y.node(),{matched:s,unmatched_geom:u,unmatched_data:l,matched_data:c,matched_geom:h})},t.merge=function(t,e,n,r,i=!0){let o=JSON.parse(JSON.stringify(Yc(t))),a=JSON.parse(JSON.stringify(n)),s=o.features.map((t=>t.properties[e])),u=n.map((t=>t[r]));s.filter((t=>u.includes(t)));let l=Object.keys(o.features[0].properties);if(Object.keys(a[0]).includes(r)){let t=pT.index(a,(t=>t[r]));o.features.forEach((n=>{const r=t.get(n.properties[e]);null!=r&&Object.keys(r).forEach((t=>{void 0!==l.find((e=>e==t))&&(r[`_${t}`]=r[t],delete r[t])})),n.properties=Object.assign(n.properties,r)})),!1===i&&(o.features=o.features.filter((t=>u.includes(t.properties[e]))))}return o},t.missing=rN,t.mushroom=eN,t.outline=gd,t.quickdraw=function(t,e=1e3,n=5){if(Array.isArray(t)){let r=[];return t.forEach((t=>r.push({type:"layer",geojson:t}))),hT({params:{margin:n,width:e},layers:r})}return hT({params:{margin:n,width:e},layers:[{type:"layer",geojson:t}]})},t.regularbubble=ZE,t.simple=qE,t.spikes=HA,t.subgeo=function(t={}){const e=t.geojson.type,n=Yc(t.geojson),r=t.field,i=t.operator??"==",o=Array.isArray(t.array)?t.array:[t.array];let a=[];"=="==i&&o.forEach((t=>{a.push(n.features.filter((e=>e.properties[r]==t)))})),"!="==i&&o.forEach((t=>{a.push(n.features.filter((e=>e.properties[r]!=t)))}));const s={type:"FeatureCollection",features:a.flat()};return"FeatureCollection"==e?s:"Topology"==e?yT.topology({foo:s}):void 0},t.table2geo=function(t,e,n){return{type:"FeatureCollection",features:t.map((t=>({type:"Feature",properties:t,geometry:{type:"Point",coordinates:[+t[n],+t[e]]}})))}},Object.defineProperty(t,"__esModule",{value:!0})}));
